

  .oooooo.    ooooooooo.   ooooooooooooo  .oooooo..o                                 
 d8P'  `Y8b   `888   `Y88. 8'   888   `8 d8P'    `Y8                                 
888            888   .d88'      888      Y88bo.       .ooooo.   .oooo.   ooo. .oo.   
888            888ooo88P'       888       `"Y8888o.  d88' `"Y8 `P  )88b  `888P"Y88b  
888     ooooo  888              888           `"Y88b 888        .oP"888   888   888  
`88.    .88'   888              888      oo     .d8P 888   .o8 d8(  888   888   888  
 `Y8bood8P'   o888o            o888o     8""88888P'  `Y8bod8P' `Y888""8o o888o o888o                                                        


                                                                   

[19:17:44] Loaded 10 rules                                                                                                                                                                             tasks.py:119
[12/08/24 19:17:44] INFO     CryticCompile: 'npx hardhat clean' running (wd: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main)                 subprocess.py:41
[12/08/24 19:17:47] ERROR    CryticCompile: 'npx' returned non-zero exit code 1                                                                                                                    subprocess.py:60
                    ERROR    CryticCompile: An unexpected error occurred:                                                                                                                          subprocess.py:68
                             stderr: Error: ENOENT: no such file or directory, open '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/.env'                    
                             stderr:     at Object.readFileSync (node:fs:441:20)                                                                                                                                   
                             stderr:     at Object.config                                                                                                                                                          
                             (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/node_modules/dotenv/lib/main.js:96:29)                                          
                             stderr:     at Object.<anonymous> (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/hardhat.config.ts:18:23)                      
                             stderr:     at Module._compile (node:internal/modules/cjs/loader:1565:14)                                                                                                             
                             stderr:     at Module.m._compile                                                                                                                                                      
                             (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/node_modules/ts-node/src/index.ts:1056:23)                                      
                             stderr:     at node:internal/modules/cjs/loader:1708:10                                                                                                                               
                             stderr:     at Object.require.extensions.<computed> [as .ts]                                                                                                                          
                             (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/node_modules/ts-node/src/index.ts:1059:12)                                      
                             stderr:     at Module.load (node:internal/modules/cjs/loader:1318:32)                                                                                                                 
                             stderr:     at Function._load (node:internal/modules/cjs/loader:1128:12)                                                                                                              
                             stderr:     at TracingChannel.traceSync (node:diagnostics_channel:322:14) {                                                                                                           
                             stderr:   errno: -2,                                                                                                                                                                  
                             stderr:   code: 'ENOENT',                                                                                                                                                             
                             stderr:   syscall: 'open',                                                                                                                                                            
                             stderr:   path: '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/.env'                                                           
                             stderr: }                                                                                                                                                                             
                             stderr: (node:121711) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.                                                   
                             stderr: (Use `node --trace-deprecation ...` to show where the warning was created)                                                                                                    
                    INFO     CryticCompile: 'npx hardhat clean --global' running (wd: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main)        subprocess.py:41
[12/08/24 19:17:49] ERROR    CryticCompile: 'npx' returned non-zero exit code 1                                                                                                                    subprocess.py:60
                    ERROR    CryticCompile: An unexpected error occurred:                                                                                                                          subprocess.py:68
                             stderr: Error: ENOENT: no such file or directory, open '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/.env'                    
                             stderr:     at Object.readFileSync (node:fs:441:20)                                                                                                                                   
                             stderr:     at Object.config                                                                                                                                                          
                             (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/node_modules/dotenv/lib/main.js:96:29)                                          
                             stderr:     at Object.<anonymous> (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/hardhat.config.ts:18:23)                      
                             stderr:     at Module._compile (node:internal/modules/cjs/loader:1565:14)                                                                                                             
                             stderr:     at Module.m._compile                                                                                                                                                      
                             (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/node_modules/ts-node/src/index.ts:1056:23)                                      
                             stderr:     at node:internal/modules/cjs/loader:1708:10                                                                                                                               
                             stderr:     at Object.require.extensions.<computed> [as .ts]                                                                                                                          
                             (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/node_modules/ts-node/src/index.ts:1059:12)                                      
                             stderr:     at Module.load (node:internal/modules/cjs/loader:1318:32)                                                                                                                 
                             stderr:     at Function._load (node:internal/modules/cjs/loader:1128:12)                                                                                                              
                             stderr:     at TracingChannel.traceSync (node:diagnostics_channel:322:14) {                                                                                                           
                             stderr:   errno: -2,                                                                                                                                                                  
                             stderr:   code: 'ENOENT',                                                                                                                                                             
                             stderr:   syscall: 'open',                                                                                                                                                            
                             stderr:   path: '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/.env'                                                           
                             stderr: }                                                                                                                                                                             
                             stderr: (node:121771) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.                                                   
                             stderr: (Use `node --trace-deprecation ...` to show where the warning was created)                                                                                                    
[12/08/24 19:17:51] INFO     CryticCompile: Problem executing hardhat: An unexpected error occurred:                                                                                                 hardhat.py:327
                             Error: ENOENT: no such file or directory, open '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/.env'                            
                                 at Object.readFileSync (node:fs:441:20)                                                                                                                                           
                                 at Object.config (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/node_modules/dotenv/lib/main.js:96:29)                     
                                 at Object.<anonymous> (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/hardhat.config.ts:18:23)                              
                                 at Module._compile (node:internal/modules/cjs/loader:1565:14)                                                                                                                     
                                 at Module.m._compile                                                                                                                                                              
                             (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/node_modules/ts-node/src/index.ts:1056:23)                                      
                                 at node:internal/modules/cjs/loader:1708:10                                                                                                                                       
                                 at Object.require.extensions.<computed> [as .ts]                                                                                                                                  
                             (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/node_modules/ts-node/src/index.ts:1059:12)                                      
                                 at Module.load (node:internal/modules/cjs/loader:1318:32)                                                                                                                         
                                 at Function._load (node:internal/modules/cjs/loader:1128:12)                                                                                                                      
                                 at TracingChannel.traceSync (node:diagnostics_channel:322:14) {                                                                                                                   
                               errno: -2,                                                                                                                                                                          
                               code: 'ENOENT',                                                                                                                                                                     
                               syscall: 'open',                                                                                                                                                                    
                               path: '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/.env'                                                                   
                             }                                                                                                                                                                                     
                             (node:121801) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.                                                           
                             (Use `node --trace-deprecation ...` to show where the warning was created)                                                                                                            
                                                                                                                                                                                                                   
                    INFO     CryticCompile: 'npx hardhat compile --force' running (wd: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main)       subprocess.py:41
[12/08/24 19:17:53] ERROR    CryticCompile: 'npx' returned non-zero exit code 1                                                                                                                    subprocess.py:60
                    ERROR    CryticCompile: An unexpected error occurred:                                                                                                                          subprocess.py:68
                             stderr: Error: ENOENT: no such file or directory, open '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/.env'                    
                             stderr:     at Object.readFileSync (node:fs:441:20)                                                                                                                                   
                             stderr:     at Object.config                                                                                                                                                          
                             (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/node_modules/dotenv/lib/main.js:96:29)                                          
                             stderr:     at Object.<anonymous> (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/hardhat.config.ts:18:23)                      
                             stderr:     at Module._compile (node:internal/modules/cjs/loader:1565:14)                                                                                                             
                             stderr:     at Module.m._compile                                                                                                                                                      
                             (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/node_modules/ts-node/src/index.ts:1056:23)                                      
                             stderr:     at node:internal/modules/cjs/loader:1708:10                                                                                                                               
                             stderr:     at Object.require.extensions.<computed> [as .ts]                                                                                                                          
                             (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/node_modules/ts-node/src/index.ts:1059:12)                                      
                             stderr:     at Module.load (node:internal/modules/cjs/loader:1318:32)                                                                                                                 
                             stderr:     at Function._load (node:internal/modules/cjs/loader:1128:12)                                                                                                              
                             stderr:     at TracingChannel.traceSync (node:diagnostics_channel:322:14) {                                                                                                           
                             stderr:   errno: -2,                                                                                                                                                                  
                             stderr:   code: 'ENOENT',                                                                                                                                                             
                             stderr:   syscall: 'open',                                                                                                                                                            
                             stderr:   path: '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/.env'                                                           
                             stderr: }                                                                                                                                                                             
                             stderr: (node:121861) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.                                                   
                             stderr: (Use `node --trace-deprecation ...` to show where the warning was created)                                                                                                    
[19:17:53] Traceback (most recent call last):                                                                                                                                                          tasks.py:126
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/falcon/falcon.py", line 90, in __init__                                                                     
               crytic_compile = CryticCompile(target, **kwargs)                                                                                                                                                    
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/crytic_compile/crytic_compile.py", line 131, in __init__                                                    
               self._compile(**kwargs)                                                                                                                                                                             
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/crytic_compile/crytic_compile.py", line 553, in _compile                                                    
               self._platform.compile(self, **kwargs)                                                                                                                                                              
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/crytic_compile/platform/hardhat.py", line 183, in compile                                                   
               hardhat_like_parsing(crytic_compile, self._target, build_directory, hardhat_working_dir)                                                                                                            
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/crytic_compile/platform/hardhat.py", line 52, in hardhat_like_parsing                                       
               raise InvalidCompilation(txt)                                                                                                                                                                       
           crytic_compile.platform.exceptions.InvalidCompilation: Compilation failed. Can you run build command?                                                                                                   
           /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/artifacts/build-info is not a directory.                                                           
                                                                                                                                                                                                                   
           During handling of the above exception, another exception occurred:                                                                                                                                     
                                                                                                                                                                                                                   
           Traceback (most recent call last):                                                                                                                                                                      
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 124, in simple_cli                                                                                                         
               falcon_instance = compile_project(source_dir)                                                                                                                                                       
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 103, in compile_project                                                                                                    
               return falcon.Falcon(abs_path)                                                                                                                                                                      
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/falcon/falcon.py", line 94, in __init__                                                                     
               raise FalconError(f"Invalid compilation: \n{str(e)}")                                                                                                                                               
           falcon.exceptions.FalconError: Invalid compilation:                                                                                                                                                     
           Compilation failed. Can you run build command?                                                                                                                                                          
           /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/artifacts/build-info is not a directory.                                                           
                                                                                                                                                                                                                   
           Compile failed.                                                                                                                                                                             tasks.py:127
           Since the compilation is failed, some static analysis tool may not be enabled, which may cause lower precision and recall.                                                                  tasks.py:128
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: involve transfering token from an address different from message sender                                                                                                                              │
│ Code:                                                                                                                                                                                                           │
│   function verifyTransfer(address from, address to, uint256 amount) public view returns (bool, string memory) {                                                                                                 │
│     if (verifiers != address(0)) {                                                                                                                                                                              │
│       (bool valid, string memory reason) = ITransferVerification(verifiers).verifyTransfer(from, to, amount);                                                                                                   │
│       if (!valid) {                                                                                                                                                                                             │
│         return (false, reason);                                                                                                                                                                                 │
│       }                                                                                                                                                                                                         │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (verifiers != address(0)) {                                                                                                                                                                              │
│       (bool valid, string memory reason) = ITransferVerification(verifiers).verifyTransfer(from, to, amount);                                                                                                   │
│       if (!valid) {                                                                                                                                                                                             │
│         return (false, reason);                                                                                                                                                                                 │
│       }                                                                                                                                                                                                         │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return (true, "");                                                                                                                                                                                          │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: involve transfering token from an address different from message sender and there is no check of allowance/approval from the address owner                                                           │
│ Code:                                                                                                                                                                                                           │
│   function verifyTransfer(address from, address to, uint256 amount) public view returns (bool, string memory) {                                                                                                 │
│     if (verifiers != address(0)) {                                                                                                                                                                              │
│       (bool valid, string memory reason) = ITransferVerification(verifiers).verifyTransfer(from, to, amount);                                                                                                   │
│       if (!valid) {                                                                                                                                                                                             │
│         return (false, reason);                                                                                                                                                                                 │
│       }                                                                                                                                                                                                         │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (verifiers != address(0)) {                                                                                                                                                                              │
│       (bool valid, string memory reason) = ITransferVerification(verifiers).verifyTransfer(from, to, amount);                                                                                                   │
│       if (!valid) {                                                                                                                                                                                             │
│         return (false, reason);                                                                                                                                                                                 │
│       }                                                                                                                                                                                                         │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return (true, "");                                                                                                                                                                                          │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ No.                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function collateralDeficit() public view returns (uint256 deficit, uint256 decimals) {                                                                                                                        │
│     // Returns the amount of collateral token required to reach minimum reserves                                                                                                                                │
│     // Returns 0 if liquidity extension contains minimum reserves.                                                                                                                                              │
│     uint256 balance = collateralToken.balanceOf(address(this));                                                                                                                                                 │
│     uint256 collateralDecimals = collateralToken.decimals();                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     // TODO use data lab Mon 11 Oct 2021 16:48:08 BST                                                                                                                                                           │
│     (uint256 maltSupply, uint256 collateralSupply) = UniswapV2Library.getReserves(                                                                                                                              │
│       uniswapV2Factory,                                                                                                                                                                                         │
│       address(malt),                                                                                                                                                                                            │
│       address(collateralToken)                                                                                                                                                                                  │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     uint256 k = maltSupply.mul(collateralSupply);                                                                                                                                                               │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     uint256 fullCollateral = Babylonian.sqrt(k.mul(10**collateralDecimals).div(priceTarget));                                                                                                                   │
│                                                                                                                                                                                                                 │
│     uint256 minReserves = fullCollateral.mul(minReserveRatio).div(100);                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     if (minReserves > balance) {                                                                                                                                                                                │
│       return (minReserves - balance, collateralDecimals);                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return (0, collateralDecimals);                                                                                                                                                                             │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function collateralDeficit() public view returns (uint256 deficit, uint256 decimals) {                                                                                                                        │
│     // Returns the amount of collateral token required to reach minimum reserves                                                                                                                                │
│     // Returns 0 if liquidity extension contains minimum reserves.                                                                                                                                              │
│     uint256 balance = collateralToken.balanceOf(address(this));                                                                                                                                                 │
│     uint256 collateralDecimals = collateralToken.decimals();                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     // TODO use data lab Mon 11 Oct 2021 16:48:08 BST                                                                                                                                                           │
│     (uint256 maltSupply, uint256 collateralSupply) = UniswapV2Library.getReserves(                                                                                                                              │
│       uniswapV2Factory,                                                                                                                                                                                         │
│       address(malt),                                                                                                                                                                                            │
│       address(collateralToken)                                                                                                                                                                                  │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     uint256 k = maltSupply.mul(collateralSupply);                                                                                                                                                               │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     uint256 fullCollateral = Babylonian.sqrt(k.mul(10**collateralDecimals).div(priceTarget));                                                                                                                   │
│                                                                                                                                                                                                                 │
│     uint256 minReserves = fullCollateral.mul(minReserveRatio).div(100);                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     if (minReserves > balance) {                                                                                                                                                                                │
│       return (minReserves - balance, collateralDecimals);                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return (0, collateralDecimals);                                                                                                                                                                             │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function reserveRatio() public view returns (uint256, uint256) {                                                                                                                                              │
│     uint256 balance = collateralToken.balanceOf(address(this));                                                                                                                                                 │
│     uint256 collateralDecimals = collateralToken.decimals();                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     // TODO use data lab Mon 11 Oct 2021 16:48:08 BST                                                                                                                                                           │
│     (uint256 maltSupply, uint256 collateralSupply) = UniswapV2Library.getReserves(                                                                                                                              │
│       uniswapV2Factory,                                                                                                                                                                                         │
│       address(malt),                                                                                                                                                                                            │
│       address(collateralToken)                                                                                                                                                                                  │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     uint256 k = maltSupply.mul(collateralSupply);                                                                                                                                                               │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     uint256 fullCollateral = Babylonian.sqrt(k.mul(10**collateralDecimals).div(priceTarget));                                                                                                                   │
│                                                                                                                                                                                                                 │
│     uint256 rRatio = balance.mul(10**collateralDecimals).div(fullCollateral);                                                                                                                                   │
│     return (rRatio, collateralDecimals);                                                                                                                                                                        │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function reserveRatio() public view returns (uint256, uint256) {                                                                                                                                              │
│     uint256 balance = collateralToken.balanceOf(address(this));                                                                                                                                                 │
│     uint256 collateralDecimals = collateralToken.decimals();                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     // TODO use data lab Mon 11 Oct 2021 16:48:08 BST                                                                                                                                                           │
│     (uint256 maltSupply, uint256 collateralSupply) = UniswapV2Library.getReserves(                                                                                                                              │
│       uniswapV2Factory,                                                                                                                                                                                         │
│       address(malt),                                                                                                                                                                                            │
│       address(collateralToken)                                                                                                                                                                                  │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     uint256 k = maltSupply.mul(collateralSupply);                                                                                                                                                               │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     uint256 fullCollateral = Babylonian.sqrt(k.mul(10**collateralDecimals).div(priceTarget));                                                                                                                   │
│                                                                                                                                                                                                                 │
│     uint256 rRatio = balance.mul(10**collateralDecimals).div(fullCollateral);                                                                                                                                   │
│     return (rRatio, collateralDecimals);                                                                                                                                                                        │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function purchaseAndBurn(uint256 amount)                                                                                                                                                                      │
│     external                                                                                                                                                                                                    │
│     onlyRole(AUCTION_ROLE, "Must have auction privs")                                                                                                                                                           │
│     returns (uint256 purchased)                                                                                                                                                                                 │
│   {                                                                                                                                                                                                             │
│     require(collateralToken.balanceOf(address(this)) >= amount, "Insufficient balance");                                                                                                                        │
│     collateralToken.safeTransfer(address(dexHandler), amount);                                                                                                                                                  │
│     purchased = dexHandler.buyMalt();                                                                                                                                                                           │
│     malt.burn(address(this), purchased);                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     emit BurnMalt(purchased);                                                                                                                                                                                   │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function getCollateralValueInMalt() public view returns (uint256 collateral) {                                                                                                                                │
│     uint256 maltPrice = maltDataLab.smoothedMaltPrice();                                                                                                                                                        │
│     uint256 target = maltDataLab.priceTarget();                                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│     uint256 auctionPoolBalance = collateralToken.balanceOf(address(auctionPool)).mul(target).div(maltPrice);                                                                                                    │
│     uint256 overflowBalance = collateralToken.balanceOf(address(rewardOverflow)).mul(target).div(maltPrice);                                                                                                    │
│     uint256 liquidityExtensionBalance = collateralToken.balanceOf(address(liquidityExtension)).mul(target).div(maltPrice);                                                                                      │
│     uint256 swingTraderBalance = collateralToken.balanceOf(address(swingTrader)).mul(target).div(maltPrice);                                                                                                    │
│     uint256 swingTraderMaltBalance = malt.balanceOf(address(swingTrader));                                                                                                                                      │
│                                                                                                                                                                                                                 │
│     return auctionPoolBalance + overflowBalance + liquidityExtensionBalance + swingTraderBalance + swingTraderMaltBalance;                                                                                      │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function getCollateralValueInMalt() public view returns (uint256 collateral) {                                                                                                                                │
│     uint256 maltPrice = maltDataLab.smoothedMaltPrice();                                                                                                                                                        │
│     uint256 target = maltDataLab.priceTarget();                                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│     uint256 auctionPoolBalance = collateralToken.balanceOf(address(auctionPool)).mul(target).div(maltPrice);                                                                                                    │
│     uint256 overflowBalance = collateralToken.balanceOf(address(rewardOverflow)).mul(target).div(maltPrice);                                                                                                    │
│     uint256 liquidityExtensionBalance = collateralToken.balanceOf(address(liquidityExtension)).mul(target).div(maltPrice);                                                                                      │
│     uint256 swingTraderBalance = collateralToken.balanceOf(address(swingTrader)).mul(target).div(maltPrice);                                                                                                    │
│     uint256 swingTraderMaltBalance = malt.balanceOf(address(swingTrader));                                                                                                                                      │
│                                                                                                                                                                                                                 │
│     return auctionPoolBalance + overflowBalance + liquidityExtensionBalance + swingTraderBalance + swingTraderMaltBalance;                                                                                      │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function totalUsefulCollateral() public view returns (uint256 collateral) {                                                                                                                                   │
│     uint256 auctionPoolBalance = collateralToken.balanceOf(address(auctionPool));                                                                                                                               │
│     uint256 overflowBalance = collateralToken.balanceOf(address(rewardOverflow));                                                                                                                               │
│     uint256 liquidityExtensionBalance = collateralToken.balanceOf(address(liquidityExtension));                                                                                                                 │
│     uint256 swingTraderBalance = collateralToken.balanceOf(address(swingTrader));                                                                                                                               │
│                                                                                                                                                                                                                 │
│     return auctionPoolBalance + overflowBalance + liquidityExtensionBalance + swingTraderBalance;                                                                                                               │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function handleForfeit() public {                                                                                                                                                                             │
│     uint256 balance = rewardToken.balanceOf(address(this));                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     if (balance == 0) {                                                                                                                                                                                         │
│       return;                                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 swingTraderCut = balance.mul(swingTraderRewardCut).div(1000);                                                                                                                                       │
│     uint256 treasuryCut = balance - swingTraderCut;                                                                                                                                                             │
│                                                                                                                                                                                                                 │
│     if (swingTraderCut > 0) {                                                                                                                                                                                   │
│       rewardToken.safeTransfer(swingTrader, swingTraderCut);                                                                                                                                                    │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (treasuryCut > 0) {                                                                                                                                                                                      │
│       rewardToken.safeTransfer(treasuryMultisig, treasuryCut);                                                                                                                                                  │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     emit Forfeit(msg.sender, balance);                                                                                                                                                                          │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function buyMalt(uint256 maxCapital)                                                                                                                                                                          │
│     external                                                                                                                                                                                                    │
│     onlyRole(STABILIZER_NODE_ROLE, "Must have stabilizer node privs")                                                                                                                                           │
│     returns (uint256 capitalUsed)                                                                                                                                                                               │
│   {                                                                                                                                                                                                             │
│     if (maxCapital == 0) {                                                                                                                                                                                      │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 balance = collateralToken.balanceOf(address(this));                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│     if (balance == 0) {                                                                                                                                                                                         │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (maxCapital < balance) {                                                                                                                                                                                 │
│       balance = maxCapital;                                                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     collateralToken.safeTransfer(address(dexHandler), balance);                                                                                                                                                 │
│     dexHandler.buyMalt();                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│     deployedCapital = deployedCapital + balance;                                                                                                                                                                │
│                                                                                                                                                                                                                 │
│     return balance;                                                                                                                                                                                             │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function sellMalt(uint256 maxAmount)                                                                                                                                                                          │
│     external                                                                                                                                                                                                    │
│     onlyRole(STABILIZER_NODE_ROLE, "Must have stabilizer node privs")                                                                                                                                           │
│     returns (uint256 amountSold)                                                                                                                                                                                │
│   {                                                                                                                                                                                                             │
│     if (maxAmount == 0) {                                                                                                                                                                                       │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 totalMaltBalance = malt.balanceOf(address(this));                                                                                                                                                   │
│     uint256 balance = totalMaltBalance;                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     if (balance == 0) {                                                                                                                                                                                         │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     (uint256 basis,) = costBasis();                                                                                                                                                                             │
│                                                                                                                                                                                                                 │
│     if (maxAmount < totalMaltBalance) {                                                                                                                                                                         │
│       balance = maxAmount;                                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     malt.safeTransfer(address(dexHandler), balance);                                                                                                                                                            │
│     uint256 rewards = dexHandler.sellMalt();                                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     if (rewards <= deployedCapital && maxAmount != totalMaltBalance) {                                                                                                                                          │
│       // If all malt is spent we want to reset deployed capital                                                                                                                                                 │
│       deployedCapital = deployedCapital - rewards;                                                                                                                                                              │
│     } else {                                                                                                                                                                                                    │
│       deployedCapital = 0;                                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 maltDecimals = malt.decimals();                                                                                                                                                                     │
│     uint256 decimals = collateralToken.decimals();                                                                                                                                                              │
│                                                                                                                                                                                                                 │
│     uint256 profit = 0;                                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     if (maltDecimals == decimals) {                                                                                                                                                                             │
│       uint256 soldBasis = basis.mul(balance).div(10**decimals);                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│       if (rewards > soldBasis) {                                                                                                                                                                                │
│         profit = rewards.sub(soldBasis);                                                                                                                                                                        │
│       }                                                                                                                                                                                                         │
│     } else if (maltDecimals > decimals) {                                                                                                                                                                       │
│       uint256 diff = maltDecimals - decimals;                                                                                                                                                                   │
│       uint256 soldBasis = basis.mul(balance.div(10**diff)).div(10**decimals);                                                                                                                                   │
│                                                                                                                                                                                                                 │
│       if (rewards > soldBasis) {                                                                                                                                                                                │
│         profit = rewards.sub(soldBasis);                                                                                                                                                                        │
│       }                                                                                                                                                                                                         │
│     } else {                                                                                                                                                                                                    │
│       uint256 diff = decimals - maltDecimals;                                                                                                                                                                   │
│       uint256 soldBasis = basis.mul(balance.mul(10**diff)).div(10**decimals);                                                                                                                                   │
│                                                                                                                                                                                                                 │
│       if (rewards > soldBasis) {                                                                                                                                                                                │
│         profit = rewards.sub(soldBasis);                                                                                                                                                                        │
│       }                                                                                                                                                                                                         │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (profit > 0) {                                                                                                                                                                                           │
│       uint256 lpCut = profit.mul(lpProfitCut).div(1000);                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│       collateralToken.safeTransfer(address(rewardThrottle), lpCut);                                                                                                                                             │
│       rewardThrottle.handleReward();                                                                                                                                                                            │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return balance;                                                                                                                                                                                             │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function costBasis() public view returns (uint256 cost, uint256 decimals) {                                                                                                                                   │
│     // Always returns using the decimals of the collateralToken as that is the                                                                                                                                  │
│     // currency costBasis is calculated in                                                                                                                                                                      │
│     decimals = collateralToken.decimals();                                                                                                                                                                      │
│     uint256 maltBalance = malt.balanceOf(address(this));                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     if (deployedCapital == 0 || maltBalance == 0) {                                                                                                                                                             │
│       return (0, decimals);                                                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 maltDecimals = malt.decimals();                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     if (maltDecimals == decimals) {                                                                                                                                                                             │
│       return (deployedCapital.mul(10**decimals).div(maltBalance), decimals);                                                                                                                                    │
│     } else if (maltDecimals > decimals) {                                                                                                                                                                       │
│       uint256 diff = maltDecimals - decimals;                                                                                                                                                                   │
│       return (deployedCapital.mul(10**decimals).div(maltBalance.div(10**diff)), decimals);                                                                                                                      │
│     } else {                                                                                                                                                                                                    │
│       uint256 diff = decimals - maltDecimals;                                                                                                                                                                   │
│       return (deployedCapital.mul(10**decimals).div(maltBalance.mul(10**diff)), decimals);                                                                                                                      │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function costBasis() public view returns (uint256 cost, uint256 decimals) {                                                                                                                                   │
│     // Always returns using the decimals of the collateralToken as that is the                                                                                                                                  │
│     // currency costBasis is calculated in                                                                                                                                                                      │
│     decimals = collateralToken.decimals();                                                                                                                                                                      │
│     uint256 maltBalance = malt.balanceOf(address(this));                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     if (deployedCapital == 0 || maltBalance == 0) {                                                                                                                                                             │
│       return (0, decimals);                                                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 maltDecimals = malt.decimals();                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     if (maltDecimals == decimals) {                                                                                                                                                                             │
│       return (deployedCapital.mul(10**decimals).div(maltBalance), decimals);                                                                                                                                    │
│     } else if (maltDecimals > decimals) {                                                                                                                                                                       │
│       uint256 diff = maltDecimals - decimals;                                                                                                                                                                   │
│       return (deployedCapital.mul(10**decimals).div(maltBalance.div(10**diff)), decimals);                                                                                                                      │
│     } else {                                                                                                                                                                                                    │
│       uint256 diff = decimals - maltDecimals;                                                                                                                                                                   │
│       return (deployedCapital.mul(10**decimals).div(maltBalance.mul(10**diff)), decimals);                                                                                                                      │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function sellMalt(uint256 maxAmount)                                                                                                                                                                          │
│     external                                                                                                                                                                                                    │
│     onlyRole(STABILIZER_NODE_ROLE, "Must have stabilizer node privs")                                                                                                                                           │
│     returns (uint256 amountSold)                                                                                                                                                                                │
│   {                                                                                                                                                                                                             │
│     if (maxAmount == 0) {                                                                                                                                                                                       │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 totalMaltBalance = malt.balanceOf(address(this));                                                                                                                                                   │
│     uint256 balance = totalMaltBalance;                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     if (balance == 0) {                                                                                                                                                                                         │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     (uint256 basis,) = costBasis();                                                                                                                                                                             │
│                                                                                                                                                                                                                 │
│     if (maxAmount < totalMaltBalance) {                                                                                                                                                                         │
│       balance = maxAmount;                                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     malt.safeTransfer(address(dexHandler), balance);                                                                                                                                                            │
│     uint256 rewards = dexHandler.sellMalt();                                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     if (rewards <= deployedCapital && maxAmount != totalMaltBalance) {                                                                                                                                          │
│       // If all malt is spent we want to reset deployed capital                                                                                                                                                 │
│       deployedCapital = deployedCapital - rewards;                                                                                                                                                              │
│     } else {                                                                                                                                                                                                    │
│       deployedCapital = 0;                                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 maltDecimals = malt.decimals();                                                                                                                                                                     │
│     uint256 decimals = collateralToken.decimals();                                                                                                                                                              │
│                                                                                                                                                                                                                 │
│     uint256 profit = 0;                                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     if (maltDecimals == decimals) {                                                                                                                                                                             │
│       uint256 soldBasis = basis.mul(balance).div(10**decimals);                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│       if (rewards > soldBasis) {                                                                                                                                                                                │
│         profit = rewards.sub(soldBasis);                                                                                                                                                                        │
│       }                                                                                                                                                                                                         │
│     } else if (maltDecimals > decimals) {                                                                                                                                                                       │
│       uint256 diff = maltDecimals - decimals;                                                                                                                                                                   │
│       uint256 soldBasis = basis.mul(balance.div(10**diff)).div(10**decimals);                                                                                                                                   │
│                                                                                                                                                                                                                 │
│       if (rewards > soldBasis) {                                                                                                                                                                                │
│         profit = rewards.sub(soldBasis);                                                                                                                                                                        │
│       }                                                                                                                                                                                                         │
│     } else {                                                                                                                                                                                                    │
│       uint256 diff = decimals - maltDecimals;                                                                                                                                                                   │
│       uint256 soldBasis = basis.mul(balance.mul(10**diff)).div(10**decimals);                                                                                                                                   │
│                                                                                                                                                                                                                 │
│       if (rewards > soldBasis) {                                                                                                                                                                                │
│         profit = rewards.sub(soldBasis);                                                                                                                                                                        │
│       }                                                                                                                                                                                                         │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (profit > 0) {                                                                                                                                                                                           │
│       uint256 lpCut = profit.mul(lpProfitCut).div(1000);                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│       collateralToken.safeTransfer(address(rewardThrottle), lpCut);                                                                                                                                             │
│       rewardThrottle.handleReward();                                                                                                                                                                            │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return balance;                                                                                                                                                                                             │
│   }                                                                                                                                                                                                             │
│   function costBasis() public view returns (uint256 cost, uint256 decimals) {                                                                                                                                   │
│     // Always returns using the decimals of the collateralToken as that is the                                                                                                                                  │
│     // currency costBasis is calculated in                                                                                                                                                                      │
│     decimals = collateralToken.decimals();                                                                                                                                                                      │
│     uint256 maltBalance = malt.balanceOf(address(this));                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     if (deployedCapital == 0 || maltBalance == 0) {                                                                                                                                                             │
│       return (0, decimals);                                                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 maltDecimals = malt.decimals();                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     if (maltDecimals == decimals) {                                                                                                                                                                             │
│       return (deployedCapital.mul(10**decimals).div(maltBalance), decimals);                                                                                                                                    │
│     } else if (maltDecimals > decimals) {                                                                                                                                                                       │
│       uint256 diff = maltDecimals - decimals;                                                                                                                                                                   │
│       return (deployedCapital.mul(10**decimals).div(maltBalance.div(10**diff)), decimals);                                                                                                                      │
│     } else {                                                                                                                                                                                                    │
│       uint256 diff = decimals - maltDecimals;                                                                                                                                                                   │
│       return (deployedCapital.mul(10**decimals).div(maltBalance.mul(10**diff)), decimals);                                                                                                                      │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function sellMalt(uint256 maxAmount)                                                                                                                                                                          │
│     external                                                                                                                                                                                                    │
│     onlyRole(STABILIZER_NODE_ROLE, "Must have stabilizer node privs")                                                                                                                                           │
│     returns (uint256 amountSold)                                                                                                                                                                                │
│   {                                                                                                                                                                                                             │
│     if (maxAmount == 0) {                                                                                                                                                                                       │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 totalMaltBalance = malt.balanceOf(address(this));                                                                                                                                                   │
│     uint256 balance = totalMaltBalance;                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     if (balance == 0) {                                                                                                                                                                                         │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     (uint256 basis,) = costBasis();                                                                                                                                                                             │
│                                                                                                                                                                                                                 │
│     if (maxAmount < totalMaltBalance) {                                                                                                                                                                         │
│       balance = maxAmount;                                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     malt.safeTransfer(address(dexHandler), balance);                                                                                                                                                            │
│     uint256 rewards = dexHandler.sellMalt();                                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     if (rewards <= deployedCapital && maxAmount != totalMaltBalance) {                                                                                                                                          │
│       // If all malt is spent we want to reset deployed capital                                                                                                                                                 │
│       deployedCapital = deployedCapital - rewards;                                                                                                                                                              │
│     } else {                                                                                                                                                                                                    │
│       deployedCapital = 0;                                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 maltDecimals = malt.decimals();                                                                                                                                                                     │
│     uint256 decimals = collateralToken.decimals();                                                                                                                                                              │
│                                                                                                                                                                                                                 │
│     uint256 profit = 0;                                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     if (maltDecimals == decimals) {                                                                                                                                                                             │
│       uint256 soldBasis = basis.mul(balance).div(10**decimals);                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│       if (rewards > soldBasis) {                                                                                                                                                                                │
│         profit = rewards.sub(soldBasis);                                                                                                                                                                        │
│       }                                                                                                                                                                                                         │
│     } else if (maltDecimals > decimals) {                                                                                                                                                                       │
│       uint256 diff = maltDecimals - decimals;                                                                                                                                                                   │
│       uint256 soldBasis = basis.mul(balance.div(10**diff)).div(10**decimals);                                                                                                                                   │
│                                                                                                                                                                                                                 │
│       if (rewards > soldBasis) {                                                                                                                                                                                │
│         profit = rewards.sub(soldBasis);                                                                                                                                                                        │
│       }                                                                                                                                                                                                         │
│     } else {                                                                                                                                                                                                    │
│       uint256 diff = decimals - maltDecimals;                                                                                                                                                                   │
│       uint256 soldBasis = basis.mul(balance.mul(10**diff)).div(10**decimals);                                                                                                                                   │
│                                                                                                                                                                                                                 │
│       if (rewards > soldBasis) {                                                                                                                                                                                │
│         profit = rewards.sub(soldBasis);                                                                                                                                                                        │
│       }                                                                                                                                                                                                         │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (profit > 0) {                                                                                                                                                                                           │
│       uint256 lpCut = profit.mul(lpProfitCut).div(1000);                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│       collateralToken.safeTransfer(address(rewardThrottle), lpCut);                                                                                                                                             │
│       rewardThrottle.handleReward();                                                                                                                                                                            │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return balance;                                                                                                                                                                                             │
│   }                                                                                                                                                                                                             │
│   function costBasis() public view returns (uint256 cost, uint256 decimals) {                                                                                                                                   │
│     // Always returns using the decimals of the collateralToken as that is the                                                                                                                                  │
│     // currency costBasis is calculated in                                                                                                                                                                      │
│     decimals = collateralToken.decimals();                                                                                                                                                                      │
│     uint256 maltBalance = malt.balanceOf(address(this));                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     if (deployedCapital == 0 || maltBalance == 0) {                                                                                                                                                             │
│       return (0, decimals);                                                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 maltDecimals = malt.decimals();                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     if (maltDecimals == decimals) {                                                                                                                                                                             │
│       return (deployedCapital.mul(10**decimals).div(maltBalance), decimals);                                                                                                                                    │
│     } else if (maltDecimals > decimals) {                                                                                                                                                                       │
│       uint256 diff = maltDecimals - decimals;                                                                                                                                                                   │
│       return (deployedCapital.mul(10**decimals).div(maltBalance.div(10**diff)), decimals);                                                                                                                      │
│     } else {                                                                                                                                                                                                    │
│       uint256 diff = decimals - maltDecimals;                                                                                                                                                                   │
│       return (deployedCapital.mul(10**decimals).div(maltBalance.mul(10**diff)), decimals);                                                                                                                      │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: involve transfering token from an address different from message sender                                                                                                                              │
│ Code:                                                                                                                                                                                                           │
│   function verifyTransfer(address from, address to, uint256 amount)                                                                                                                                             │
│     public view override returns (bool, string memory)                                                                                                                                                          │
│   {                                                                                                                                                                                                             │
│     // This contract only cares about transfers out of the pool                                                                                                                                                 │
│     if (from != pool) {                                                                                                                                                                                         │
│       return (true, "");                                                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (isWhitelisted(to)) {                                                                                                                                                                                    │
│       return (true, "");                                                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     return (                                                                                                                                                                                                    │
│       maltDataLab.maltPriceAverage(priceLookback) > priceTarget * (10000 - thresholdBps) / 10000,                                                                                                               │
│       "The price of Malt is below peg. Wait for peg to be regained or purchase arbitrage tokens."                                                                                                               │
│     );                                                                                                                                                                                                          │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: involve transfering token from an address different from message sender and there is no check of allowance/approval from the address owner                                                           │
│ Code:                                                                                                                                                                                                           │
│   function verifyTransfer(address from, address to, uint256 amount)                                                                                                                                             │
│     public view override returns (bool, string memory)                                                                                                                                                          │
│   {                                                                                                                                                                                                             │
│     // This contract only cares about transfers out of the pool                                                                                                                                                 │
│     if (from != pool) {                                                                                                                                                                                         │
│       return (true, "");                                                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (isWhitelisted(to)) {                                                                                                                                                                                    │
│       return (true, "");                                                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     return (                                                                                                                                                                                                    │
│       maltDataLab.maltPriceAverage(priceLookback) > priceTarget * (10000 - thresholdBps) / 10000,                                                                                                               │
│       "The price of Malt is below peg. Wait for peg to be regained or purchase arbitrage tokens."                                                                                                               │
│     );                                                                                                                                                                                                          │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ No                                                                                                                                                                                                              │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ have inside code statements that update/accrue interest/exchange rate,                                                                                                                                          │
│ Code:                                                                                                                                                                                                           │
│   function stabilize() external notSameBlock {                                                                                                                                                                  │
│     auction.checkAuctionFinalization();                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     require(                                                                                                                                                                                                    │
│       block.timestamp >= stabilizeWindowEnd || _stabilityWindowOverride(),                                                                                                                                      │
│       "Can't call stabilize"                                                                                                                                                                                    │
│     );                                                                                                                                                                                                          │
│     stabilizeWindowEnd = block.timestamp + stabilizeBackoffPeriod;                                                                                                                                              │
│                                                                                                                                                                                                                 │
│     rewardThrottle.checkRewardUnderflow();                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│     uint256 exchangeRate = maltDataLab.maltPriceAverage(priceAveragePeriod);                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     if (!_shouldAdjustSupply(exchangeRate)) {                                                                                                                                                                   │
│       maltDataLab.trackReserveRatio();                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│       lastStabilize = block.timestamp;                                                                                                                                                                          │
│       return;                                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     emit Stabilize(block.timestamp, exchangeRate);                                                                                                                                                              │
│                                                                                                                                                                                                                 │
│     if (exchangeRate > maltDataLab.priceTarget()) {                                                                                                                                                             │
│       _distributeSupply();                                                                                                                                                                                      │
│     } else {                                                                                                                                                                                                    │
│       _startAuction();                                                                                                                                                                                          │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     lastStabilize = block.timestamp;                                                                                                                                                                            │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No",                                                                                                                                                                                                    │
│   "2": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ have inside code statements that update/accrue interest/exchange rate,                                                                                                                                          │
│ Code:                                                                                                                                                                                                           │
│   function _stabilityWindowOverride() internal view returns (bool) {                                                                                                                                            │
│     if (hasRole(ADMIN_ROLE, _msgSender())) {                                                                                                                                                                    │
│       // Admin can always stabilize                                                                                                                                                                             │
│       return true;                                                                                                                                                                                              │
│     }                                                                                                                                                                                                           │
│     // Must have elapsed at least one period of the moving average before we stabilize again                                                                                                                    │
│     if (block.timestamp < lastStabilize + fastAveragePeriod) {                                                                                                                                                  │
│       return false;                                                                                                                                                                                             │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│     uint256 exchangeRate = maltDataLab.maltPriceAverage(fastAveragePeriod);                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     uint256 upperThreshold = priceTarget.mul(1000 + overrideDistance).div(1000);                                                                                                                                │
│     uint256 lowerThreshold = priceTarget.mul(1000 - overrideDistance).div(1000);                                                                                                                                │
│                                                                                                                                                                                                                 │
│     return exchangeRate <= lowerThreshold || exchangeRate >= upperThreshold;                                                                                                                                    │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No",                                                                                                                                                                                                    │
│   "2": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have inside code statements that update/accrue interest/exchange rate, and have inside code statements that calculate/assign/distribute the balance/share/stake/fee/loan/reward                      │
│ Code:                                                                                                                                                                                                           │
│   function _stabilityWindowOverride() internal view returns (bool) {                                                                                                                                            │
│     if (hasRole(ADMIN_ROLE, _msgSender())) {                                                                                                                                                                    │
│       // Admin can always stabilize                                                                                                                                                                             │
│       return true;                                                                                                                                                                                              │
│     }                                                                                                                                                                                                           │
│     // Must have elapsed at least one period of the moving average before we stabilize again                                                                                                                    │
│     if (block.timestamp < lastStabilize + fastAveragePeriod) {                                                                                                                                                  │
│       return false;                                                                                                                                                                                             │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│     uint256 exchangeRate = maltDataLab.maltPriceAverage(fastAveragePeriod);                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     uint256 upperThreshold = priceTarget.mul(1000 + overrideDistance).div(1000);                                                                                                                                │
│     uint256 lowerThreshold = priceTarget.mul(1000 - overrideDistance).div(1000);                                                                                                                                │
│                                                                                                                                                                                                                 │
│     return exchangeRate <= lowerThreshold || exchangeRate >= upperThreshold;                                                                                                                                    │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function stabilize() external notSameBlock {                                                                                                                                                                  │
│     auction.checkAuctionFinalization();                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     require(                                                                                                                                                                                                    │
│       block.timestamp >= stabilizeWindowEnd || _stabilityWindowOverride(),                                                                                                                                      │
│       "Can't call stabilize"                                                                                                                                                                                    │
│     );                                                                                                                                                                                                          │
│     stabilizeWindowEnd = block.timestamp + stabilizeBackoffPeriod;                                                                                                                                              │
│                                                                                                                                                                                                                 │
│     rewardThrottle.checkRewardUnderflow();                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│     uint256 exchangeRate = maltDataLab.maltPriceAverage(priceAveragePeriod);                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     if (!_shouldAdjustSupply(exchangeRate)) {                                                                                                                                                                   │
│       maltDataLab.trackReserveRatio();                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│       lastStabilize = block.timestamp;                                                                                                                                                                          │
│       return;                                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     emit Stabilize(block.timestamp, exchangeRate);                                                                                                                                                              │
│                                                                                                                                                                                                                 │
│     if (exchangeRate > maltDataLab.priceTarget()) {                                                                                                                                                             │
│       _distributeSupply();                                                                                                                                                                                      │
│     } else {                                                                                                                                                                                                    │
│       _startAuction();                                                                                                                                                                                          │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     lastStabilize = block.timestamp;                                                                                                                                                                            │
│   }                                                                                                                                                                                                             │
│   function _stabilityWindowOverride() internal view returns (bool) {                                                                                                                                            │
│     if (hasRole(ADMIN_ROLE, _msgSender())) {                                                                                                                                                                    │
│       // Admin can always stabilize                                                                                                                                                                             │
│       return true;                                                                                                                                                                                              │
│     }                                                                                                                                                                                                           │
│     // Must have elapsed at least one period of the moving average before we stabilize again                                                                                                                    │
│     if (block.timestamp < lastStabilize + fastAveragePeriod) {                                                                                                                                                  │
│       return false;                                                                                                                                                                                             │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│     uint256 exchangeRate = maltDataLab.maltPriceAverage(fastAveragePeriod);                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     uint256 upperThreshold = priceTarget.mul(1000 + overrideDistance).div(1000);                                                                                                                                │
│     uint256 lowerThreshold = priceTarget.mul(1000 - overrideDistance).div(1000);                                                                                                                                │
│                                                                                                                                                                                                                 │
│     return exchangeRate <= lowerThreshold || exchangeRate >= upperThreshold;                                                                                                                                    │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function stabilize() external notSameBlock {                                                                                                                                                                  │
│     auction.checkAuctionFinalization();                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     require(                                                                                                                                                                                                    │
│       block.timestamp >= stabilizeWindowEnd || _stabilityWindowOverride(),                                                                                                                                      │
│       "Can't call stabilize"                                                                                                                                                                                    │
│     );                                                                                                                                                                                                          │
│     stabilizeWindowEnd = block.timestamp + stabilizeBackoffPeriod;                                                                                                                                              │
│                                                                                                                                                                                                                 │
│     rewardThrottle.checkRewardUnderflow();                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│     uint256 exchangeRate = maltDataLab.maltPriceAverage(priceAveragePeriod);                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     if (!_shouldAdjustSupply(exchangeRate)) {                                                                                                                                                                   │
│       maltDataLab.trackReserveRatio();                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│       lastStabilize = block.timestamp;                                                                                                                                                                          │
│       return;                                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     emit Stabilize(block.timestamp, exchangeRate);                                                                                                                                                              │
│                                                                                                                                                                                                                 │
│     if (exchangeRate > maltDataLab.priceTarget()) {                                                                                                                                                             │
│       _distributeSupply();                                                                                                                                                                                      │
│     } else {                                                                                                                                                                                                    │
│       _startAuction();                                                                                                                                                                                          │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     lastStabilize = block.timestamp;                                                                                                                                                                            │
│   }                                                                                                                                                                                                             │
│   function _stabilityWindowOverride() internal view returns (bool) {                                                                                                                                            │
│     if (hasRole(ADMIN_ROLE, _msgSender())) {                                                                                                                                                                    │
│       // Admin can always stabilize                                                                                                                                                                             │
│       return true;                                                                                                                                                                                              │
│     }                                                                                                                                                                                                           │
│     // Must have elapsed at least one period of the moving average before we stabilize again                                                                                                                    │
│     if (block.timestamp < lastStabilize + fastAveragePeriod) {                                                                                                                                                  │
│       return false;                                                                                                                                                                                             │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│     uint256 exchangeRate = maltDataLab.maltPriceAverage(fastAveragePeriod);                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     uint256 upperThreshold = priceTarget.mul(1000 + overrideDistance).div(1000);                                                                                                                                │
│     uint256 lowerThreshold = priceTarget.mul(1000 - overrideDistance).div(1000);                                                                                                                                │
│                                                                                                                                                                                                                 │
│     return exchangeRate <= lowerThreshold || exchangeRate >= upperThreshold;                                                                                                                                    │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ have inside code statements that update/accrue interest/exchange rate,                                                                                                                                          │
│ Code:                                                                                                                                                                                                           │
│   function _shouldAdjustSupply(uint256 exchangeRate) internal view returns (bool) {                                                                                                                             │
│     uint256 decimals = rewardToken.decimals();                                                                                                                                                                  │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     uint256 upperThreshold = priceTarget.mul(upperStabilityThreshold).div(10**decimals);                                                                                                                        │
│     uint256 lowerThreshold = priceTarget.mul(lowerStabilityThreshold).div(10**decimals);                                                                                                                        │
│                                                                                                                                                                                                                 │
│     return (exchangeRate <= priceTarget.sub(lowerThreshold) && !auction.auctionActive(auction.currentAuctionId())) || exchangeRate >= priceTarget.add(upperThreshold);                                          │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No",                                                                                                                                                                                                    │
│   "2": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function stabilize() external notSameBlock {                                                                                                                                                                  │
│     auction.checkAuctionFinalization();                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     require(                                                                                                                                                                                                    │
│       block.timestamp >= stabilizeWindowEnd || _stabilityWindowOverride(),                                                                                                                                      │
│       "Can't call stabilize"                                                                                                                                                                                    │
│     );                                                                                                                                                                                                          │
│     stabilizeWindowEnd = block.timestamp + stabilizeBackoffPeriod;                                                                                                                                              │
│                                                                                                                                                                                                                 │
│     rewardThrottle.checkRewardUnderflow();                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│     uint256 exchangeRate = maltDataLab.maltPriceAverage(priceAveragePeriod);                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     if (!_shouldAdjustSupply(exchangeRate)) {                                                                                                                                                                   │
│       maltDataLab.trackReserveRatio();                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│       lastStabilize = block.timestamp;                                                                                                                                                                          │
│       return;                                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     emit Stabilize(block.timestamp, exchangeRate);                                                                                                                                                              │
│                                                                                                                                                                                                                 │
│     if (exchangeRate > maltDataLab.priceTarget()) {                                                                                                                                                             │
│       _distributeSupply();                                                                                                                                                                                      │
│     } else {                                                                                                                                                                                                    │
│       _startAuction();                                                                                                                                                                                          │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     lastStabilize = block.timestamp;                                                                                                                                                                            │
│   }                                                                                                                                                                                                             │
│   function _shouldAdjustSupply(uint256 exchangeRate) internal view returns (bool) {                                                                                                                             │
│     uint256 decimals = rewardToken.decimals();                                                                                                                                                                  │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     uint256 upperThreshold = priceTarget.mul(upperStabilityThreshold).div(10**decimals);                                                                                                                        │
│     uint256 lowerThreshold = priceTarget.mul(lowerStabilityThreshold).div(10**decimals);                                                                                                                        │
│                                                                                                                                                                                                                 │
│     return (exchangeRate <= priceTarget.sub(lowerThreshold) && !auction.auctionActive(auction.currentAuctionId())) || exchangeRate >= priceTarget.add(upperThreshold);                                          │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function stabilize() external notSameBlock {                                                                                                                                                                  │
│     auction.checkAuctionFinalization();                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     require(                                                                                                                                                                                                    │
│       block.timestamp >= stabilizeWindowEnd || _stabilityWindowOverride(),                                                                                                                                      │
│       "Can't call stabilize"                                                                                                                                                                                    │
│     );                                                                                                                                                                                                          │
│     stabilizeWindowEnd = block.timestamp + stabilizeBackoffPeriod;                                                                                                                                              │
│                                                                                                                                                                                                                 │
│     rewardThrottle.checkRewardUnderflow();                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│     uint256 exchangeRate = maltDataLab.maltPriceAverage(priceAveragePeriod);                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     if (!_shouldAdjustSupply(exchangeRate)) {                                                                                                                                                                   │
│       maltDataLab.trackReserveRatio();                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│       lastStabilize = block.timestamp;                                                                                                                                                                          │
│       return;                                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     emit Stabilize(block.timestamp, exchangeRate);                                                                                                                                                              │
│                                                                                                                                                                                                                 │
│     if (exchangeRate > maltDataLab.priceTarget()) {                                                                                                                                                             │
│       _distributeSupply();                                                                                                                                                                                      │
│     } else {                                                                                                                                                                                                    │
│       _startAuction();                                                                                                                                                                                          │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     lastStabilize = block.timestamp;                                                                                                                                                                            │
│   }                                                                                                                                                                                                             │
│   function _shouldAdjustSupply(uint256 exchangeRate) internal view returns (bool) {                                                                                                                             │
│     uint256 decimals = rewardToken.decimals();                                                                                                                                                                  │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     uint256 upperThreshold = priceTarget.mul(upperStabilityThreshold).div(10**decimals);                                                                                                                        │
│     uint256 lowerThreshold = priceTarget.mul(lowerStabilityThreshold).div(10**decimals);                                                                                                                        │
│                                                                                                                                                                                                                 │
│     return (exchangeRate <= priceTarget.sub(lowerThreshold) && !auction.auctionActive(auction.currentAuctionId())) || exchangeRate >= priceTarget.add(upperThreshold);                                          │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function claim() external {                                                                                                                                                                                   │
│     if (auctionIds.length == 0 || replenishingIndex >= auctionIds.length) {                                                                                                                                     │
│       return;                                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 auctionId = auctionIds;                                                                                                                                                                             │
│     uint256 replenishingId = auction.replenishingAuctionId();                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     if (auctionId > replenishingId) {                                                                                                                                                                           │
│       // Not yet replenishing this auction                                                                                                                                                                      │
│       return;                                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│     uint256 claimableTokens = auction.userClaimableArbTokens(address(this), auctionId);                                                                                                                         │
│                                                                                                                                                                                                                 │
│     if (claimableTokens == 0) {                                                                                                                                                                                 │
│       // Nothing to claim yet                                                                                                                                                                                   │
│       return;                                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 balance = auctionRewardToken.balanceOf(address(this));                                                                                                                                              │
│                                                                                                                                                                                                                 │
│     auction.claimArbitrage(auctionId);                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     uint256 finalBalance = auctionRewardToken.balanceOf(address(this));                                                                                                                                         │
│     uint256 rewardedAmount = finalBalance - balance;                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     claimableRewards = claimableRewards.add(rewardedAmount);                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     uint256 claimable = auction.userClaimableArbTokens(address(this), auctionId);                                                                                                                               │
│                                                                                                                                                                                                                 │
│     if (replenishingId > auctionId && claimable == 0) {                                                                                                                                                         │
│       // Don't increment replenishingIndex if replenishingAuctionId == auctionId as                                                                                                                             │
│       // claimable could be 0 due to the debt not being 100% replenished.                                                                                                                                       │
│       replenishingIndex = replenishingIndex + 1;                                                                                                                                                                │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     _handleRewardDistribution(rewardedAmount);                                                                                                                                                                  │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function outstandingArbTokens() public view returns (uint256 outstanding) {                                                                                                                                   │
│     outstanding = 0;                                                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     for (uint256 i = replenishingIndex; i < auctionIds.length; i = i + 1) {                                                                                                                                     │
│       uint256 claimable = auction.balanceOfArbTokens(                                                                                                                                                           │
│         auctionIds,                                                                                                                                                                                             │
│         address(this)                                                                                                                                                                                           │
│       );                                                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│       outstanding = outstanding + claimable;                                                                                                                                                                    │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return outstanding;                                                                                                                                                                                         │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function outstandingArbTokens() public view returns (uint256 outstanding) {                                                                                                                                   │
│     outstanding = 0;                                                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     for (uint256 i = replenishingIndex; i < auctionIds.length; i = i + 1) {                                                                                                                                     │
│       uint256 claimable = auction.balanceOfArbTokens(                                                                                                                                                           │
│         auctionIds,                                                                                                                                                                                             │
│         address(this)                                                                                                                                                                                           │
│       );                                                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│       outstanding = outstanding + claimable;                                                                                                                                                                    │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return outstanding;                                                                                                                                                                                         │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ No                                                                                                                                                                                                              │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function onUnbond(address account, uint256 amount)                                                                                                                                                            │
│     virtual                                                                                                                                                                                                     │
│     public                                                                                                                                                                                                      │
│     onlyRole(MINING_SERVICE_ROLE, "Must having mining service privilege")                                                                                                                                       │
│   {                                                                                                                                                                                                             │
│     _beforeUnbond(account, amount);                                                                                                                                                                             │
│     // Withdraw all current rewards                                                                                                                                                                             │
│     // Done now before we change stake padding below                                                                                                                                                            │
│     uint256 rewardEarned = earned(account);                                                                                                                                                                     │
│     _handleWithdrawForAccount(account, rewardEarned, account);                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│     uint256 bondedBalance = balanceOfBonded(account);                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (bondedBalance == 0) {                                                                                                                                                                                   │
│       return;                                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 lessStakePadding = balanceOfStakePadding(account).mul(amount).div(bondedBalance);                                                                                                                   │
│                                                                                                                                                                                                                 │
│     _reconcileWithdrawn(account, amount, bondedBalance);                                                                                                                                                        │
│     _removeFromStakePadding(account, lessStakePadding, "< stake padding");                                                                                                                                      │
│     _afterUnbond(account, amount);                                                                                                                                                                              │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function balanceOfRewards(address account) public view returns (uint256) {                                                                                                                                    │
│     /*                                                                                                                                                                                                          │
│      * This represents the rewards allocated to a given account but does not                                                                                                                                    │
│      * mean all these rewards are unlocked yet. The earned method will                                                                                                                                          │
│      * fetch the balance that is unlocked for an account                                                                                                                                                        │
│      */                                                                                                                                                                                                         │
│     uint256 balanceOfRewardedWithStakePadding = _getFullyPaddedReward(account);                                                                                                                                 │
│                                                                                                                                                                                                                 │
│     uint256 stakePaddingBalance = balanceOfStakePadding(account);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│     if (balanceOfRewardedWithStakePadding > stakePaddingBalance) {                                                                                                                                              │
│       return balanceOfRewardedWithStakePadding - stakePaddingBalance;                                                                                                                                           │
│     }                                                                                                                                                                                                           │
│     return 0;                                                                                                                                                                                                   │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function _checkForForfeit(address account, uint256 amount, uint256 bondedBalance) internal {                                                                                                                  │
│     // This is the user's share of total rewards                                                                                                                                                                │
│     uint256 userReward = balanceOfRewards(account);                                                                                                                                                             │
│     uint256 globalRewarded = totalDeclaredReward();                                                                                                                                                             │
│                                                                                                                                                                                                                 │
│     uint256 earnedReward = 0;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     // This is done inline instead of using earned() to save gas                                                                                                                                                │
│     if (globalRewarded > 0 && userReward > 0) {                                                                                                                                                                 │
│       earnedReward = totalReleasedReward().mul(userReward).div(globalRewarded);                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 forfeitAmount = userReward.sub(earnedReward).mul(amount) / bondedBalance;                                                                                                                           │
│     uint256 declaredRewardDecrease = earnedReward.mul(amount) / bondedBalance;                                                                                                                                  │
│                                                                                                                                                                                                                 │
│     if (forfeitAmount > 0) {                                                                                                                                                                                    │
│       forfeitedRewards = forfeitedRewards + forfeitAmount;                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (declaredRewardDecrease > 0) {                                                                                                                                                                           │
│       claimableRewards = claimableRewards.sub(                                                                                                                                                                  │
│         declaredRewardDecrease                                                                                                                                                                                  │
│       );                                                                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
│   function balanceOfRewards(address account) public view returns (uint256) {                                                                                                                                    │
│     /*                                                                                                                                                                                                          │
│      * This represents the rewards allocated to a given account but does not                                                                                                                                    │
│      * mean all these rewards are unlocked yet. The earned method will                                                                                                                                          │
│      * fetch the balance that is unlocked for an account                                                                                                                                                        │
│      */                                                                                                                                                                                                         │
│     uint256 balanceOfRewardedWithStakePadding = _getFullyPaddedReward(account);                                                                                                                                 │
│                                                                                                                                                                                                                 │
│     uint256 stakePaddingBalance = balanceOfStakePadding(account);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│     if (balanceOfRewardedWithStakePadding > stakePaddingBalance) {                                                                                                                                              │
│       return balanceOfRewardedWithStakePadding - stakePaddingBalance;                                                                                                                                           │
│     }                                                                                                                                                                                                           │
│     return 0;                                                                                                                                                                                                   │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function balanceOfRewards(address account) public view returns (uint256) {                                                                                                                                    │
│     uint256 total;                                                                                                                                                                                              │
│     for (uint i = 0; i < mines.length; i = i + 1) {                                                                                                                                                             │
│       if (!mineActive[mines]) {                                                                                                                                                                                 │
│         continue;                                                                                                                                                                                               │
│       }                                                                                                                                                                                                         │
│       total += IRewardMine(mines).balanceOfRewards(account);                                                                                                                                                    │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return total;                                                                                                                                                                                               │
│   }                                                                                                                                                                                                             │
│   function balanceOfRewards(address account) public view returns (uint256) {                                                                                                                                    │
│     /*                                                                                                                                                                                                          │
│      * This represents the rewards allocated to a given account but does not                                                                                                                                    │
│      * mean all these rewards are unlocked yet. The earned method will                                                                                                                                          │
│      * fetch the balance that is unlocked for an account                                                                                                                                                        │
│      */                                                                                                                                                                                                         │
│     uint256 balanceOfRewardedWithStakePadding = _getFullyPaddedReward(account);                                                                                                                                 │
│                                                                                                                                                                                                                 │
│     uint256 stakePaddingBalance = balanceOfStakePadding(account);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│     if (balanceOfRewardedWithStakePadding > stakePaddingBalance) {                                                                                                                                              │
│       return balanceOfRewardedWithStakePadding - stakePaddingBalance;                                                                                                                                           │
│     }                                                                                                                                                                                                           │
│     return 0;                                                                                                                                                                                                   │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function _getFullyPaddedReward(address account) internal view returns (uint256) {                                                                                                                             │
│     uint256 globalBondedTotal = totalBonded();                                                                                                                                                                  │
│     if (globalBondedTotal == 0) {                                                                                                                                                                               │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 totalRewardedWithStakePadding = totalDeclaredReward().add(totalStakePadding());                                                                                                                     │
│                                                                                                                                                                                                                 │
│     return totalRewardedWithStakePadding                                                                                                                                                                        │
│       .mul(balanceOfBonded(account))                                                                                                                                                                            │
│       .div(globalBondedTotal);                                                                                                                                                                                  │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function balanceOfRewards(address account) public view returns (uint256) {                                                                                                                                    │
│     /*                                                                                                                                                                                                          │
│      * This represents the rewards allocated to a given account but does not                                                                                                                                    │
│      * mean all these rewards are unlocked yet. The earned method will                                                                                                                                          │
│      * fetch the balance that is unlocked for an account                                                                                                                                                        │
│      */                                                                                                                                                                                                         │
│     uint256 balanceOfRewardedWithStakePadding = _getFullyPaddedReward(account);                                                                                                                                 │
│                                                                                                                                                                                                                 │
│     uint256 stakePaddingBalance = balanceOfStakePadding(account);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│     if (balanceOfRewardedWithStakePadding > stakePaddingBalance) {                                                                                                                                              │
│       return balanceOfRewardedWithStakePadding - stakePaddingBalance;                                                                                                                                           │
│     }                                                                                                                                                                                                           │
│     return 0;                                                                                                                                                                                                   │
│   }                                                                                                                                                                                                             │
│   function _getFullyPaddedReward(address account) internal view returns (uint256) {                                                                                                                             │
│     uint256 globalBondedTotal = totalBonded();                                                                                                                                                                  │
│     if (globalBondedTotal == 0) {                                                                                                                                                                               │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 totalRewardedWithStakePadding = totalDeclaredReward().add(totalStakePadding());                                                                                                                     │
│                                                                                                                                                                                                                 │
│     return totalRewardedWithStakePadding                                                                                                                                                                        │
│       .mul(balanceOfBonded(account))                                                                                                                                                                            │
│       .div(globalBondedTotal);                                                                                                                                                                                  │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function balanceOfRewards(address account) public view returns (uint256) {                                                                                                                                    │
│     /*                                                                                                                                                                                                          │
│      * This represents the rewards allocated to a given account but does not                                                                                                                                    │
│      * mean all these rewards are unlocked yet. The earned method will                                                                                                                                          │
│      * fetch the balance that is unlocked for an account                                                                                                                                                        │
│      */                                                                                                                                                                                                         │
│     uint256 balanceOfRewardedWithStakePadding = _getFullyPaddedReward(account);                                                                                                                                 │
│                                                                                                                                                                                                                 │
│     uint256 stakePaddingBalance = balanceOfStakePadding(account);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│     if (balanceOfRewardedWithStakePadding > stakePaddingBalance) {                                                                                                                                              │
│       return balanceOfRewardedWithStakePadding - stakePaddingBalance;                                                                                                                                           │
│     }                                                                                                                                                                                                           │
│     return 0;                                                                                                                                                                                                   │
│   }                                                                                                                                                                                                             │
│   function _getFullyPaddedReward(address account) internal view returns (uint256) {                                                                                                                             │
│     uint256 globalBondedTotal = totalBonded();                                                                                                                                                                  │
│     if (globalBondedTotal == 0) {                                                                                                                                                                               │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 totalRewardedWithStakePadding = totalDeclaredReward().add(totalStakePadding());                                                                                                                     │
│                                                                                                                                                                                                                 │
│     return totalRewardedWithStakePadding                                                                                                                                                                        │
│       .mul(balanceOfBonded(account))                                                                                                                                                                            │
│       .div(globalBondedTotal);                                                                                                                                                                                  │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ No                                                                                                                                                                                                              │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function provideReinvest(uint256 rewardLiquidity) external {                                                                                                                                                  │
│     _retrieveReward(rewardLiquidity);                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 rewardBalance = rewardToken.balanceOf(address(this));                                                                                                                                               │
│                                                                                                                                                                                                                 │
│     // This is how much malt is required                                                                                                                                                                        │
│     uint256 maltLiquidity = dexHandler.getOptimalLiquidity(address(malt), address(rewardToken), rewardBalance);                                                                                                 │
│                                                                                                                                                                                                                 │
│     // Transfer the remaining Malt required                                                                                                                                                                     │
│     malt.safeTransferFrom(msg.sender, address(this), maltLiquidity);                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     _bondAccount(msg.sender);                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     emit ProvideReinvest(msg.sender, rewardLiquidity);                                                                                                                                                          │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function splitReinvest(uint256 rewardLiquidity) external {                                                                                                                                                    │
│     _retrieveReward(rewardLiquidity);                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 rewardBalance = rewardToken.balanceOf(address(this));                                                                                                                                               │
│                                                                                                                                                                                                                 │
│     rewardToken.safeTransfer(address(dexHandler), rewardBalance.div(2));                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     dexHandler.buyMalt();                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│     _bondAccount(msg.sender);                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     emit SplitReinvest(msg.sender, rewardLiquidity);                                                                                                                                                            │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function _bondAccount(address account) internal {                                                                                                                                                             │
│     malt.safeTransfer(address(dexHandler), malt.balanceOf(address(this)));                                                                                                                                      │
│     rewardToken.safeTransfer(address(dexHandler), rewardToken.balanceOf(address(this)));                                                                                                                        │
│                                                                                                                                                                                                                 │
│     (,,uint256 liquidityCreated) = dexHandler.addLiquidity();                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     stakeToken.approve(address(bonding), liquidityCreated);                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     bonding.bondToAccount(account, liquidityCreated);                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     // If there is any carry / left overs then send to treasury                                                                                                                                                 │
│     uint256 maltBalance = malt.balanceOf(address(this));                                                                                                                                                        │
│     uint256 rewardTokenBalance = rewardToken.balanceOf(address(this));                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     if (maltBalance > 0) {                                                                                                                                                                                      │
│       malt.safeTransfer(treasury, maltBalance);                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (rewardTokenBalance > 0) {                                                                                                                                                                               │
│       rewardToken.safeTransfer(treasury, rewardTokenBalance);                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function provideReinvest(uint256 rewardLiquidity) external {                                                                                                                                                  │
│     _retrieveReward(rewardLiquidity);                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 rewardBalance = rewardToken.balanceOf(address(this));                                                                                                                                               │
│                                                                                                                                                                                                                 │
│     // This is how much malt is required                                                                                                                                                                        │
│     uint256 maltLiquidity = dexHandler.getOptimalLiquidity(address(malt), address(rewardToken), rewardBalance);                                                                                                 │
│                                                                                                                                                                                                                 │
│     // Transfer the remaining Malt required                                                                                                                                                                     │
│     malt.safeTransferFrom(msg.sender, address(this), maltLiquidity);                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     _bondAccount(msg.sender);                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     emit ProvideReinvest(msg.sender, rewardLiquidity);                                                                                                                                                          │
│   }                                                                                                                                                                                                             │
│   function _bondAccount(address account) internal {                                                                                                                                                             │
│     malt.safeTransfer(address(dexHandler), malt.balanceOf(address(this)));                                                                                                                                      │
│     rewardToken.safeTransfer(address(dexHandler), rewardToken.balanceOf(address(this)));                                                                                                                        │
│                                                                                                                                                                                                                 │
│     (,,uint256 liquidityCreated) = dexHandler.addLiquidity();                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     stakeToken.approve(address(bonding), liquidityCreated);                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     bonding.bondToAccount(account, liquidityCreated);                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     // If there is any carry / left overs then send to treasury                                                                                                                                                 │
│     uint256 maltBalance = malt.balanceOf(address(this));                                                                                                                                                        │
│     uint256 rewardTokenBalance = rewardToken.balanceOf(address(this));                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     if (maltBalance > 0) {                                                                                                                                                                                      │
│       malt.safeTransfer(treasury, maltBalance);                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (rewardTokenBalance > 0) {                                                                                                                                                                               │
│       rewardToken.safeTransfer(treasury, rewardTokenBalance);                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function splitReinvest(uint256 rewardLiquidity) external {                                                                                                                                                    │
│     _retrieveReward(rewardLiquidity);                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 rewardBalance = rewardToken.balanceOf(address(this));                                                                                                                                               │
│                                                                                                                                                                                                                 │
│     rewardToken.safeTransfer(address(dexHandler), rewardBalance.div(2));                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     dexHandler.buyMalt();                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│     _bondAccount(msg.sender);                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     emit SplitReinvest(msg.sender, rewardLiquidity);                                                                                                                                                            │
│   }                                                                                                                                                                                                             │
│   function _bondAccount(address account) internal {                                                                                                                                                             │
│     malt.safeTransfer(address(dexHandler), malt.balanceOf(address(this)));                                                                                                                                      │
│     rewardToken.safeTransfer(address(dexHandler), rewardToken.balanceOf(address(this)));                                                                                                                        │
│                                                                                                                                                                                                                 │
│     (,,uint256 liquidityCreated) = dexHandler.addLiquidity();                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     stakeToken.approve(address(bonding), liquidityCreated);                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     bonding.bondToAccount(account, liquidityCreated);                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     // If there is any carry / left overs then send to treasury                                                                                                                                                 │
│     uint256 maltBalance = malt.balanceOf(address(this));                                                                                                                                                        │
│     uint256 rewardTokenBalance = rewardToken.balanceOf(address(this));                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     if (maltBalance > 0) {                                                                                                                                                                                      │
│       malt.safeTransfer(treasury, maltBalance);                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (rewardTokenBalance > 0) {                                                                                                                                                                               │
│       rewardToken.safeTransfer(treasury, rewardTokenBalance);                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: deposit/mint/add the liquidity pool/amount/share                                                                                                                                                     │
│ Code:                                                                                                                                                                                                           │
│   function _finalizeAuction(uint256 auctionId) internal {                                                                                                                                                       │
│     (                                                                                                                                                                                                           │
│       uint256 avgMaltPrice,                                                                                                                                                                                     │
│       uint256 commitments,                                                                                                                                                                                      │
│       uint256 fullRequirement,                                                                                                                                                                                  │
│       uint256 maltPurchased,                                                                                                                                                                                    │
│       uint256 finalPrice,                                                                                                                                                                                       │
│       uint256 preAuctionReserveRatio                                                                                                                                                                            │
│     ) = _setupAuctionFinalization(auctionId);                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     if (commitments >= fullRequirement) {                                                                                                                                                                       │
│       return;                                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     // priceTarget.sub(preAuctionReserveRatio) represents maximum deficit per token                                                                                                                             │
│     // priceTarget divided by the max deficit is equivalent to 1 over the max deficit given we are in uint decimal                                                                                              │
│     // (commitments * 1/maxDeficit) - commitments                                                                                                                                                               │
│     uint256 maxBurnSpend = (commitments.mul(priceTarget).div(priceTarget.sub(preAuctionReserveRatio))).sub(commitments);                                                                                        │
│                                                                                                                                                                                                                 │
│     uint256 totalTokens = commitments.mul(priceTarget).div(finalPrice);                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     uint256 premiumExcess = 0;                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│     // The assumption here is that each token will be worth 1 Malt when redeemed.                                                                                                                               │
│     // Therefore if totalTokens is greater than the malt purchased then there is a net supply growth                                                                                                            │
│     // After the tokens are repaid. We want this process to be neutral to supply at the very worst.                                                                                                             │
│     if (totalTokens >= maltPurchased) {                                                                                                                                                                         │
│       // This also assumes current purchase price of Malt is $1, which is higher than it will be in practice.                                                                                                   │
│       // So the premium excess will actually ensure slight net negative supply growth.                                                                                                                          │
│       premiumExcess = totalTokens - maltPurchased;                                                                                                                                                              │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 realBurnBudget = auctionBurnReserveSkew.getRealBurnBudget(maxBurnSpend, premiumExcess);                                                                                                             │
│                                                                                                                                                                                                                 │
│     if (realBurnBudget > 0) {                                                                                                                                                                                   │
│       AuctionData storage auction = idToAuction;                                                                                                                                                                │
│                                                                                                                                                                                                                 │
│       auction.finalBurnBudget = realBurnBudget;                                                                                                                                                                 │
│       auction.finalPurchased = liquidityExtension.purchaseAndBurn(realBurnBudget);                                                                                                                              │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: deposit/mint/add the liquidity pool/amount/share                                                                                                                                                     │
│ Code:                                                                                                                                                                                                           │
│   function _checkAuctionFinalization(bool isInternal) internal {                                                                                                                                                │
│     if (isInternal && !isAuctionFinished(currentAuctionId)) {                                                                                                                                                   │
│       // Auction is still in progress after internal auction purchasing.                                                                                                                                        │
│       _resetAuctionMaxCommitments();                                                                                                                                                                            │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (isAuctionFinished(currentAuctionId)) {                                                                                                                                                                  │
│       if (auctionActive(currentAuctionId)) {                                                                                                                                                                    │
│         _endAuction(currentAuctionId);                                                                                                                                                                          │
│       }                                                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│       if (!isAuctionFinalized(currentAuctionId)) {                                                                                                                                                              │
│         _finalizeAuction(currentAuctionId);                                                                                                                                                                     │
│       }                                                                                                                                                                                                         │
│       currentAuctionId = currentAuctionId + 1;                                                                                                                                                                  │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
│   function _finalizeAuction(uint256 auctionId) internal {                                                                                                                                                       │
│     (                                                                                                                                                                                                           │
│       uint256 avgMaltPrice,                                                                                                                                                                                     │
│       uint256 commitments,                                                                                                                                                                                      │
│       uint256 fullRequirement,                                                                                                                                                                                  │
│       uint256 maltPurchased,                                                                                                                                                                                    │
│       uint256 finalPrice,                                                                                                                                                                                       │
│       uint256 preAuctionReserveRatio                                                                                                                                                                            │
│     ) = _setupAuctionFinalization(auctionId);                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     if (commitments >= fullRequirement) {                                                                                                                                                                       │
│       return;                                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     // priceTarget.sub(preAuctionReserveRatio) represents maximum deficit per token                                                                                                                             │
│     // priceTarget divided by the max deficit is equivalent to 1 over the max deficit given we are in uint decimal                                                                                              │
│     // (commitments * 1/maxDeficit) - commitments                                                                                                                                                               │
│     uint256 maxBurnSpend = (commitments.mul(priceTarget).div(priceTarget.sub(preAuctionReserveRatio))).sub(commitments);                                                                                        │
│                                                                                                                                                                                                                 │
│     uint256 totalTokens = commitments.mul(priceTarget).div(finalPrice);                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     uint256 premiumExcess = 0;                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│     // The assumption here is that each token will be worth 1 Malt when redeemed.                                                                                                                               │
│     // Therefore if totalTokens is greater than the malt purchased then there is a net supply growth                                                                                                            │
│     // After the tokens are repaid. We want this process to be neutral to supply at the very worst.                                                                                                             │
│     if (totalTokens >= maltPurchased) {                                                                                                                                                                         │
│       // This also assumes current purchase price of Malt is $1, which is higher than it will be in practice.                                                                                                   │
│       // So the premium excess will actually ensure slight net negative supply growth.                                                                                                                          │
│       premiumExcess = totalTokens - maltPurchased;                                                                                                                                                              │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 realBurnBudget = auctionBurnReserveSkew.getRealBurnBudget(maxBurnSpend, premiumExcess);                                                                                                             │
│                                                                                                                                                                                                                 │
│     if (realBurnBudget > 0) {                                                                                                                                                                                   │
│       AuctionData storage auction = idToAuction;                                                                                                                                                                │
│                                                                                                                                                                                                                 │
│       auction.finalBurnBudget = realBurnBudget;                                                                                                                                                                 │
│       auction.finalPurchased = liquidityExtension.purchaseAndBurn(realBurnBudget);                                                                                                                              │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│   function realValueOfLPToken(uint256 amount) external view returns (uint256) {                                                                                                                                 │
│     uint256 maltPrice = smoothedMaltPrice();                                                                                                                                                                    │
│     (uint256 maltReserves, uint256 rewardReserves) = smoothedReserves();                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     if (maltReserves == 0) {                                                                                                                                                                                    │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 totalLPSupply = stakeToken.totalSupply();                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 maltValue = amount.mul(maltReserves).div(totalLPSupply);                                                                                                                                            │
│     uint256 rewardValue = amount.mul(rewardReserves).div(totalLPSupply);                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     return rewardValue.add(maltValue.mul(maltPrice).div(priceTarget));                                                                                                                                          │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes",                                                                                                                                                                                                   │
│   "2": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function realValueOfLPToken(uint256 amount) external view returns (uint256) {                                                                                                                                 │
│     uint256 maltPrice = smoothedMaltPrice();                                                                                                                                                                    │
│     (uint256 maltReserves, uint256 rewardReserves) = smoothedReserves();                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     if (maltReserves == 0) {                                                                                                                                                                                    │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 totalLPSupply = stakeToken.totalSupply();                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 maltValue = amount.mul(maltReserves).div(totalLPSupply);                                                                                                                                            │
│     uint256 rewardValue = amount.mul(rewardReserves).div(totalLPSupply);                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     return rewardValue.add(maltValue.mul(maltPrice).div(priceTarget));                                                                                                                                          │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function trackMaltPrice()                                                                                                                                                                                     │
│     external                                                                                                                                                                                                    │
│     onlyRole(UPDATER_ROLE, "Must have updater role")                                                                                                                                                            │
│   {                                                                                                                                                                                                             │
│     (uint256 reserve0, uint256 reserve1,) = stakeToken.getReserves();                                                                                                                                           │
│     (address token0,) = UniswapV2Library.sortTokens(address(malt), address(rewardToken));                                                                                                                       │
│     uint256 rewardDecimals = rewardToken.decimals();                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     if (token0 == address(rewardToken)) {                                                                                                                                                                       │
│       uint256 price = _normalizedPrice(reserve0, reserve1, rewardDecimals);                                                                                                                                     │
│       maltPriceMA.update(price);                                                                                                                                                                                │
│       emit TrackMaltPrice(price);                                                                                                                                                                               │
│     } else {                                                                                                                                                                                                    │
│       uint256 price = _normalizedPrice(reserve1, reserve0, rewardDecimals);                                                                                                                                     │
│       maltPriceMA.update(price);                                                                                                                                                                                │
│                                                                                                                                                                                                                 │
│       emit TrackMaltPrice(price);                                                                                                                                                                               │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function trackMaltPrice()                                                                                                                                                                                     │
│     external                                                                                                                                                                                                    │
│     onlyRole(UPDATER_ROLE, "Must have updater role")                                                                                                                                                            │
│   {                                                                                                                                                                                                             │
│     (uint256 reserve0, uint256 reserve1,) = stakeToken.getReserves();                                                                                                                                           │
│     (address token0,) = UniswapV2Library.sortTokens(address(malt), address(rewardToken));                                                                                                                       │
│     uint256 rewardDecimals = rewardToken.decimals();                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     if (token0 == address(rewardToken)) {                                                                                                                                                                       │
│       uint256 price = _normalizedPrice(reserve0, reserve1, rewardDecimals);                                                                                                                                     │
│       maltPriceMA.update(price);                                                                                                                                                                                │
│       emit TrackMaltPrice(price);                                                                                                                                                                               │
│     } else {                                                                                                                                                                                                    │
│       uint256 price = _normalizedPrice(reserve1, reserve0, rewardDecimals);                                                                                                                                     │
│       maltPriceMA.update(price);                                                                                                                                                                                │
│                                                                                                                                                                                                                 │
│       emit TrackMaltPrice(price);                                                                                                                                                                               │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function trackPoolReserves()                                                                                                                                                                                  │
│     external                                                                                                                                                                                                    │
│     onlyRole(UPDATER_ROLE, "Must have updater role")                                                                                                                                                            │
│   {                                                                                                                                                                                                             │
│     (uint256 reserve0, uint256 reserve1,) = stakeToken.getReserves();                                                                                                                                           │
│     (address token0,) = UniswapV2Library.sortTokens(address(malt), address(rewardToken));                                                                                                                       │
│     uint256 rewardDecimals = rewardToken.decimals();                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     if (token0 == address(rewardToken)) {                                                                                                                                                                       │
│       // Args are (maltReserve)                                                                                                                                                                                 │
│       poolMaltReserveMA.update(reserve1);                                                                                                                                                                       │
│       emit TrackPoolReserves(reserve1, reserve0);                                                                                                                                                               │
│     } else {                                                                                                                                                                                                    │
│       // Args are (maltReserve)                                                                                                                                                                                 │
│       poolMaltReserveMA.update(reserve0);                                                                                                                                                                       │
│       emit TrackPoolReserves(reserve0, reserve1);                                                                                                                                                               │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function trackPool()                                                                                                                                                                                          │
│     external                                                                                                                                                                                                    │
│     onlyRole(UPDATER_ROLE, "Must have updater role")                                                                                                                                                            │
│   {                                                                                                                                                                                                             │
│     (uint256 reserve0, uint256 reserve1,) = stakeToken.getReserves();                                                                                                                                           │
│     (address token0,) = UniswapV2Library.sortTokens(address(malt), address(rewardToken));                                                                                                                       │
│     uint256 rewardDecimals = rewardToken.decimals();                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     if (token0 == address(rewardToken)) {                                                                                                                                                                       │
│       uint256 price = _normalizedPrice(reserve0, reserve1, rewardDecimals);                                                                                                                                     │
│       maltPriceMA.update(price);                                                                                                                                                                                │
│                                                                                                                                                                                                                 │
│       // Args are (maltReserve)                                                                                                                                                                                 │
│       poolMaltReserveMA.update(reserve1);                                                                                                                                                                       │
│       emit TrackMaltPrice(price);                                                                                                                                                                               │
│       emit TrackPoolReserves(reserve1, reserve0);                                                                                                                                                               │
│     } else {                                                                                                                                                                                                    │
│       uint256 price = _normalizedPrice(reserve1, reserve0, rewardDecimals);                                                                                                                                     │
│       maltPriceMA.update(price);                                                                                                                                                                                │
│                                                                                                                                                                                                                 │
│       // Args are (maltReserve)                                                                                                                                                                                 │
│       poolMaltReserveMA.update(reserve0);                                                                                                                                                                       │
│       emit TrackMaltPrice(price);                                                                                                                                                                               │
│       emit TrackPoolReserves(reserve0, reserve1);                                                                                                                                                               │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function trackPool()                                                                                                                                                                                          │
│     external                                                                                                                                                                                                    │
│     onlyRole(UPDATER_ROLE, "Must have updater role")                                                                                                                                                            │
│   {                                                                                                                                                                                                             │
│     (uint256 reserve0, uint256 reserve1,) = stakeToken.getReserves();                                                                                                                                           │
│     (address token0,) = UniswapV2Library.sortTokens(address(malt), address(rewardToken));                                                                                                                       │
│     uint256 rewardDecimals = rewardToken.decimals();                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     if (token0 == address(rewardToken)) {                                                                                                                                                                       │
│       uint256 price = _normalizedPrice(reserve0, reserve1, rewardDecimals);                                                                                                                                     │
│       maltPriceMA.update(price);                                                                                                                                                                                │
│                                                                                                                                                                                                                 │
│       // Args are (maltReserve)                                                                                                                                                                                 │
│       poolMaltReserveMA.update(reserve1);                                                                                                                                                                       │
│       emit TrackMaltPrice(price);                                                                                                                                                                               │
│       emit TrackPoolReserves(reserve1, reserve0);                                                                                                                                                               │
│     } else {                                                                                                                                                                                                    │
│       uint256 price = _normalizedPrice(reserve1, reserve0, rewardDecimals);                                                                                                                                     │
│       maltPriceMA.update(price);                                                                                                                                                                                │
│                                                                                                                                                                                                                 │
│       // Args are (maltReserve)                                                                                                                                                                                 │
│       poolMaltReserveMA.update(reserve0);                                                                                                                                                                       │
│       emit TrackMaltPrice(price);                                                                                                                                                                               │
│       emit TrackPoolReserves(reserve0, reserve1);                                                                                                                                                               │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function faucet(uint256 _amount) external {                                                                                                                                                                   │
│     uint256 balance = 0;                                                                                                                                                                                        │
│     while (true) {                                                                                                                                                                                              │
│       faucetContract.faucet();                                                                                                                                                                                  │
│       balance = token.balanceOf(address(this));                                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│       if (balance > _amount) {                                                                                                                                                                                  │
│         break;                                                                                                                                                                                                  │
│       }                                                                                                                                                                                                         │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     token.transfer(msg.sender, balance);                                                                                                                                                                        │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function unbond(uint256 amount)                                                                                                                                                                               │
│     external                                                                                                                                                                                                    │
│   {                                                                                                                                                                                                             │
│     require(amount > 0, "Cannot unbond 0");                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     uint256 bondedBalance = balanceOfBonded(msg.sender);                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     require(bondedBalance > 0, "< bonded balance");                                                                                                                                                             │
│     require(amount <= bondedBalance, "< bonded balance");                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│     // Avoid leaving dust behind                                                                                                                                                                                │
│     if (amount.add(1e16) > bondedBalance) {                                                                                                                                                                     │
│       amount = bondedBalance;                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     miningService.onUnbond(msg.sender, amount);                                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│     _unbond(amount);                                                                                                                                                                                            │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function unbondAndBreak(uint256 amount)                                                                                                                                                                       │
│     external                                                                                                                                                                                                    │
│   {                                                                                                                                                                                                             │
│     require(amount > 0, "Cannot unbond 0");                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     uint256 bondedBalance = balanceOfBonded(msg.sender);                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     require(bondedBalance > 0, "< bonded balance");                                                                                                                                                             │
│     require(amount <= bondedBalance, "< bonded balance");                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│     // Avoid leaving dust behind                                                                                                                                                                                │
│     if (amount.add(1e16) > bondedBalance) {                                                                                                                                                                     │
│       amount = bondedBalance;                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     miningService.onUnbond(msg.sender, amount);                                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│     _unbondAndBreak(amount);                                                                                                                                                                                    │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function balanceOfRewards(address account) public view returns (uint256) {                                                                                                                                    │
│     uint256 total;                                                                                                                                                                                              │
│     for (uint i = 0; i < mines.length; i = i + 1) {                                                                                                                                                             │
│       if (!mineActive[mines]) {                                                                                                                                                                                 │
│         continue;                                                                                                                                                                                               │
│       }                                                                                                                                                                                                         │
│       total += IRewardMine(mines).balanceOfRewards(account);                                                                                                                                                    │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return total;                                                                                                                                                                                               │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function _checkForForfeit(address account, uint256 amount, uint256 bondedBalance) internal {                                                                                                                  │
│     // This is the user's share of total rewards                                                                                                                                                                │
│     uint256 userReward = balanceOfRewards(account);                                                                                                                                                             │
│     uint256 globalRewarded = totalDeclaredReward();                                                                                                                                                             │
│                                                                                                                                                                                                                 │
│     uint256 earnedReward = 0;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     // This is done inline instead of using earned() to save gas                                                                                                                                                │
│     if (globalRewarded > 0 && userReward > 0) {                                                                                                                                                                 │
│       earnedReward = totalReleasedReward().mul(userReward).div(globalRewarded);                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 forfeitAmount = userReward.sub(earnedReward).mul(amount) / bondedBalance;                                                                                                                           │
│     uint256 declaredRewardDecrease = earnedReward.mul(amount) / bondedBalance;                                                                                                                                  │
│                                                                                                                                                                                                                 │
│     if (forfeitAmount > 0) {                                                                                                                                                                                    │
│       forfeitedRewards = forfeitedRewards + forfeitAmount;                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (declaredRewardDecrease > 0) {                                                                                                                                                                           │
│       claimableRewards = claimableRewards.sub(                                                                                                                                                                  │
│         declaredRewardDecrease                                                                                                                                                                                  │
│       );                                                                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
│   function balanceOfRewards(address account) public view returns (uint256) {                                                                                                                                    │
│     uint256 total;                                                                                                                                                                                              │
│     for (uint i = 0; i < mines.length; i = i + 1) {                                                                                                                                                             │
│       if (!mineActive[mines]) {                                                                                                                                                                                 │
│         continue;                                                                                                                                                                                               │
│       }                                                                                                                                                                                                         │
│       total += IRewardMine(mines).balanceOfRewards(account);                                                                                                                                                    │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return total;                                                                                                                                                                                               │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function _checkForForfeit(address account, uint256 amount, uint256 bondedBalance) internal {                                                                                                                  │
│     // This is the user's share of total rewards                                                                                                                                                                │
│     uint256 userReward = balanceOfRewards(account);                                                                                                                                                             │
│     uint256 globalRewarded = totalDeclaredReward();                                                                                                                                                             │
│                                                                                                                                                                                                                 │
│     uint256 earnedReward = 0;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     // This is done inline instead of using earned() to save gas                                                                                                                                                │
│     if (globalRewarded > 0 && userReward > 0) {                                                                                                                                                                 │
│       earnedReward = totalReleasedReward().mul(userReward).div(globalRewarded);                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 forfeitAmount = userReward.sub(earnedReward).mul(amount) / bondedBalance;                                                                                                                           │
│     uint256 declaredRewardDecrease = earnedReward.mul(amount) / bondedBalance;                                                                                                                                  │
│                                                                                                                                                                                                                 │
│     if (forfeitAmount > 0) {                                                                                                                                                                                    │
│       forfeitedRewards = forfeitedRewards + forfeitAmount;                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (declaredRewardDecrease > 0) {                                                                                                                                                                           │
│       claimableRewards = claimableRewards.sub(                                                                                                                                                                  │
│         declaredRewardDecrease                                                                                                                                                                                  │
│       );                                                                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
│   function balanceOfRewards(address account) public view returns (uint256) {                                                                                                                                    │
│     uint256 total;                                                                                                                                                                                              │
│     for (uint i = 0; i < mines.length; i = i + 1) {                                                                                                                                                             │
│       if (!mineActive[mines]) {                                                                                                                                                                                 │
│         continue;                                                                                                                                                                                               │
│       }                                                                                                                                                                                                         │
│       total += IRewardMine(mines).balanceOfRewards(account);                                                                                                                                                    │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return total;                                                                                                                                                                                               │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ No                                                                                                                                                                                                              │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function balanceOfRewards(address account) public view returns (uint256) {                                                                                                                                    │
│     uint256 total;                                                                                                                                                                                              │
│     for (uint i = 0; i < mines.length; i = i + 1) {                                                                                                                                                             │
│       if (!mineActive[mines]) {                                                                                                                                                                                 │
│         continue;                                                                                                                                                                                               │
│       }                                                                                                                                                                                                         │
│       total += IRewardMine(mines).balanceOfRewards(account);                                                                                                                                                    │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return total;                                                                                                                                                                                               │
│   }                                                                                                                                                                                                             │
│   function balanceOfRewards(address account) public view returns (uint256) {                                                                                                                                    │
│     uint256 total;                                                                                                                                                                                              │
│     for (uint i = 0; i < mines.length; i = i + 1) {                                                                                                                                                             │
│       if (!mineActive[mines]) {                                                                                                                                                                                 │
│         continue;                                                                                                                                                                                               │
│       }                                                                                                                                                                                                         │
│       total += IRewardMine(mines).balanceOfRewards(account);                                                                                                                                                    │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return total;                                                                                                                                                                                               │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function onUnbond(address account, uint256 amount)                                                                                                                                                            │
│     override                                                                                                                                                                                                    │
│     public                                                                                                                                                                                                      │
│     onlyRole(MINING_SERVICE_ROLE, "Must having mining service privilege")                                                                                                                                       │
│   {                                                                                                                                                                                                             │
│     // Withdraw all current rewards                                                                                                                                                                             │
│     // Done now before we change stake padding below                                                                                                                                                            │
│     uint256 rewardEarned = earned(account);                                                                                                                                                                     │
│     _handleWithdrawForAccount(account, rewardEarned, account);                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│     uint256 bondedBalance = balanceOfBonded(account);                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (bondedBalance == 0) {                                                                                                                                                                                   │
│       return;                                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     _checkForForfeit(account, amount, bondedBalance);                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 lessStakePadding = balanceOfStakePadding(account).mul(amount).div(bondedBalance);                                                                                                                   │
│                                                                                                                                                                                                                 │
│     _reconcileWithdrawn(account, amount, bondedBalance);                                                                                                                                                        │
│     _removeFromStakePadding(account, lessStakePadding, "< stake padding");                                                                                                                                      │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function usableBalance() override public view returns(uint256) {                                                                                                                                              │
│     uint256 totalBalance = auctionRewardToken.balanceOf(address(this));                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     if (totalBalance > claimableRewards) {                                                                                                                                                                      │
│       return totalBalance - claimableRewards;                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return 0;                                                                                                                                                                                                   │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function purchaseArbitrageTokens(uint256 maxAmount)                                                                                                                                                           │
│     external                                                                                                                                                                                                    │
│     onlyRole(IMPLIED_COLLATERAL_SERVICE_ROLE, "Must have implied collateral service privs")                                                                                                                     │
│     returns (uint256 remaining)                                                                                                                                                                                 │
│   {                                                                                                                                                                                                             │
│     uint256 balance = usableBalance();                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     if (maxAmount < balance) {                                                                                                                                                                                  │
│       balance = maxAmount;                                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 currentAuction = auction.currentAuctionId();                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     if (!auction.auctionActive(currentAuction)) {                                                                                                                                                               │
│       return maxAmount;                                                                                                                                                                                         │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     auctionIds.push(currentAuction);                                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     auctionRewardToken.approve(address(auction), balance);                                                                                                                                                      │
│     auction.purchaseArbitrageTokens(balance);                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     return maxAmount - balance;                                                                                                                                                                                 │
│   }                                                                                                                                                                                                             │
│   function usableBalance() override public view returns(uint256) {                                                                                                                                              │
│     uint256 totalBalance = auctionRewardToken.balanceOf(address(this));                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     if (totalBalance > claimableRewards) {                                                                                                                                                                      │
│       return totalBalance - claimableRewards;                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     return 0;                                                                                                                                                                                                   │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function _checkForForfeit(address account, uint256 amount, uint256 bondedBalance) internal {                                                                                                                  │
│     // This is the user's share of total rewards                                                                                                                                                                │
│     uint256 userReward = balanceOfRewards(account);                                                                                                                                                             │
│     uint256 globalRewarded = totalDeclaredReward();                                                                                                                                                             │
│                                                                                                                                                                                                                 │
│     uint256 earnedReward = 0;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     // This is done inline instead of using earned() to save gas                                                                                                                                                │
│     if (globalRewarded > 0 && userReward > 0) {                                                                                                                                                                 │
│       earnedReward = totalReleasedReward().mul(userReward).div(globalRewarded);                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 forfeitAmount = userReward.sub(earnedReward).mul(amount) / bondedBalance;                                                                                                                           │
│     uint256 declaredRewardDecrease = earnedReward.mul(amount) / bondedBalance;                                                                                                                                  │
│                                                                                                                                                                                                                 │
│     if (forfeitAmount > 0) {                                                                                                                                                                                    │
│       forfeitedRewards = forfeitedRewards + forfeitAmount;                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (declaredRewardDecrease > 0) {                                                                                                                                                                           │
│       claimableRewards = claimableRewards.sub(                                                                                                                                                                  │
│         declaredRewardDecrease                                                                                                                                                                                  │
│       );                                                                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function onUnbond(address account, uint256 amount)                                                                                                                                                            │
│     override                                                                                                                                                                                                    │
│     public                                                                                                                                                                                                      │
│     onlyRole(MINING_SERVICE_ROLE, "Must having mining service privilege")                                                                                                                                       │
│   {                                                                                                                                                                                                             │
│     // Withdraw all current rewards                                                                                                                                                                             │
│     // Done now before we change stake padding below                                                                                                                                                            │
│     uint256 rewardEarned = earned(account);                                                                                                                                                                     │
│     _handleWithdrawForAccount(account, rewardEarned, account);                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│     uint256 bondedBalance = balanceOfBonded(account);                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (bondedBalance == 0) {                                                                                                                                                                                   │
│       return;                                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     _checkForForfeit(account, amount, bondedBalance);                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 lessStakePadding = balanceOfStakePadding(account).mul(amount).div(bondedBalance);                                                                                                                   │
│                                                                                                                                                                                                                 │
│     _reconcileWithdrawn(account, amount, bondedBalance);                                                                                                                                                        │
│     _removeFromStakePadding(account, lessStakePadding, "< stake padding");                                                                                                                                      │
│   }                                                                                                                                                                                                             │
│   function _checkForForfeit(address account, uint256 amount, uint256 bondedBalance) internal {                                                                                                                  │
│     // This is the user's share of total rewards                                                                                                                                                                │
│     uint256 userReward = balanceOfRewards(account);                                                                                                                                                             │
│     uint256 globalRewarded = totalDeclaredReward();                                                                                                                                                             │
│                                                                                                                                                                                                                 │
│     uint256 earnedReward = 0;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     // This is done inline instead of using earned() to save gas                                                                                                                                                │
│     if (globalRewarded > 0 && userReward > 0) {                                                                                                                                                                 │
│       earnedReward = totalReleasedReward().mul(userReward).div(globalRewarded);                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 forfeitAmount = userReward.sub(earnedReward).mul(amount) / bondedBalance;                                                                                                                           │
│     uint256 declaredRewardDecrease = earnedReward.mul(amount) / bondedBalance;                                                                                                                                  │
│                                                                                                                                                                                                                 │
│     if (forfeitAmount > 0) {                                                                                                                                                                                    │
│       forfeitedRewards = forfeitedRewards + forfeitAmount;                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (declaredRewardDecrease > 0) {                                                                                                                                                                           │
│       claimableRewards = claimableRewards.sub(                                                                                                                                                                  │
│         declaredRewardDecrease                                                                                                                                                                                  │
│       );                                                                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: involve transfering token from an address different from message sender                                                                                                                              │
│ Code:                                                                                                                                                                                                           │
│   function setTransferService(address _service)                                                                                                                                                                 │
│     external                                                                                                                                                                                                    │
│     onlyRole(ADMIN_ROLE, "Must have admin role")                                                                                                                                                                │
│   {                                                                                                                                                                                                             │
│     require(_service != address(0), "Cannot use address 0 as transfer service");                                                                                                                                │
│     transferService = ITransferService(_service);                                                                                                                                                               │
│     emit SetTransferService(_service);                                                                                                                                                                          │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function requestCapital(uint256 amount)                                                                                                                                                                       │
│     external                                                                                                                                                                                                    │
│     onlyRole(REWARD_THROTTLE_ROLE, "Must have Reward throttle privs")                                                                                                                                           │
│     returns (uint256 fulfilledAmount)                                                                                                                                                                           │
│   {                                                                                                                                                                                                             │
│     uint256 balance = auctionRewardToken.balanceOf(address(this));                                                                                                                                              │
│                                                                                                                                                                                                                 │
│     if (balance == 0) {                                                                                                                                                                                         │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     // This is the max amount allowable                                                                                                                                                                         │
│     fulfilledAmount = balance.mul(maxFulfillment).div(1000);                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     if (amount <= fulfilledAmount) {                                                                                                                                                                            │
│       fulfilledAmount = amount;                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     auctionRewardToken.safeTransfer(throttler, fulfilledAmount);                                                                                                                                                │
│                                                                                                                                                                                                                 │
│     emit FulfilledRequest(fulfilledAmount);                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     return fulfilledAmount;                                                                                                                                                                                     │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function handleReward() public {                                                                                                                                                                              │
│     uint256 balance = rewardToken.balanceOf(address(this));                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     uint256 epoch = dao.epoch();                                                                                                                                                                                │
│                                                                                                                                                                                                                 │
│     checkRewardUnderflow();                                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     if (epoch > _activeEpoch) {                                                                                                                                                                                 │
│       _activeEpoch = epoch;                                                                                                                                                                                     │
│       _state[_activeEpoch].bondedValue = bonding.averageBondedValue(_activeEpoch);                                                                                                                              │
│       _state[_activeEpoch].profit = balance;                                                                                                                                                                    │
│       _state[_activeEpoch].rewarded = 0;                                                                                                                                                                        │
│       _state[_activeEpoch].throttle = throttle;                                                                                                                                                                 │
│     } else {                                                                                                                                                                                                    │
│       _state[_activeEpoch].profit = _state[_activeEpoch].profit.add(balance);                                                                                                                                   │
│       _state[_activeEpoch].throttle = throttle;                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     // Fetch targetAPR before we update current epoch state                                                                                                                                                     │
│     uint256 aprTarget = targetAPR();                                                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     // Distribute balance to the correct places                                                                                                                                                                 │
│     if (aprTarget > 0 && _epochAprGivenReward(epoch, balance) > aprTarget) {                                                                                                                                    │
│       uint256 remainder = _getRewardOverflow(balance, aprTarget);                                                                                                                                               │
│       emit RewardOverflow(_activeEpoch, remainder);                                                                                                                                                             │
│                                                                                                                                                                                                                 │
│       if (remainder > 0) {                                                                                                                                                                                      │
│         rewardToken.safeTransfer(address(overflowPool), remainder);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         if (balance > remainder) {                                                                                                                                                                              │
│           _sendToDistributor(balance - remainder, _activeEpoch);                                                                                                                                                │
│         }                                                                                                                                                                                                       │
│       }                                                                                                                                                                                                         │
│     } else {                                                                                                                                                                                                    │
│       _sendToDistributor(balance, _activeEpoch);                                                                                                                                                                │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     emit HandleReward(epoch, balance);                                                                                                                                                                          │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function _rewardCheck(uint256 reward) internal {                                                                                                                                                              │
│     require(reward > 0, "Cannot declare 0 reward");                                                                                                                                                             │
│                                                                                                                                                                                                                 │
│     _globals.declaredBalance = _globals.declaredBalance.add(reward);                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     uint256 totalReward = rewardToken.balanceOf(address(this)) + rewardMine.totalReleasedReward();                                                                                                              │
│                                                                                                                                                                                                                 │
│     require(_globals.declaredBalance <= totalReward, "Insufficient balance");                                                                                                                                   │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function declareReward(uint256 amount)                                                                                                                                                                        │
│     external                                                                                                                                                                                                    │
│     onlyRole(THROTTLER_ROLE, "Only throttler role")                                                                                                                                                             │
│   {                                                                                                                                                                                                             │
│     _rewardCheck(amount);                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│     if (bonding.totalBonded() == 0) {                                                                                                                                                                           │
│       // There is no accounts to distribute the rewards to so forfeit it                                                                                                                                        │
│       _forfeit(amount);                                                                                                                                                                                         │
│       return;                                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     // Vest current reward before adding new reward to ensure                                                                                                                                                   │
│     // Everything is up to date before we add new reward                                                                                                                                                        │
│     vest();                                                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     FocalPoint storage activeFocal = _getActiveFocal();                                                                                                                                                         │
│     activeFocal.rewarded = activeFocal.rewarded.add(amount);                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     emit DeclareReward(amount, address(rewardToken));                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
│   function _rewardCheck(uint256 reward) internal {                                                                                                                                                              │
│     require(reward > 0, "Cannot declare 0 reward");                                                                                                                                                             │
│                                                                                                                                                                                                                 │
│     _globals.declaredBalance = _globals.declaredBalance.add(reward);                                                                                                                                            │
│                                                                                                                                                                                                                 │
│     uint256 totalReward = rewardToken.balanceOf(address(this)) + rewardMine.totalReleasedReward();                                                                                                              │
│                                                                                                                                                                                                                 │
│     require(_globals.declaredBalance <= totalReward, "Insufficient balance");                                                                                                                                   │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function _forfeit(uint256 forfeited) internal {                                                                                                                                                               │
│     require(forfeited <= _globals.declaredBalance, "Cannot forfeit more than declared");                                                                                                                        │
│                                                                                                                                                                                                                 │
│     _globals.declaredBalance = _globals.declaredBalance.sub(forfeited);                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     rewardToken.safeTransfer(address(forfeitor), forfeited);                                                                                                                                                    │
│     forfeitor.handleForfeit();                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│     uint256 totalReward = rewardToken.balanceOf(address(this)) + rewardMine.totalReleasedReward();                                                                                                              │
│                                                                                                                                                                                                                 │
│     require(_globals.declaredBalance <= totalReward, "Insufficient balance");                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     emit Forfeit(msg.sender, address(rewardToken), forfeited);                                                                                                                                                  │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function declareReward(uint256 amount)                                                                                                                                                                        │
│     external                                                                                                                                                                                                    │
│     onlyRole(THROTTLER_ROLE, "Only throttler role")                                                                                                                                                             │
│   {                                                                                                                                                                                                             │
│     _rewardCheck(amount);                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│     if (bonding.totalBonded() == 0) {                                                                                                                                                                           │
│       // There is no accounts to distribute the rewards to so forfeit it                                                                                                                                        │
│       _forfeit(amount);                                                                                                                                                                                         │
│       return;                                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     // Vest current reward before adding new reward to ensure                                                                                                                                                   │
│     // Everything is up to date before we add new reward                                                                                                                                                        │
│     vest();                                                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     FocalPoint storage activeFocal = _getActiveFocal();                                                                                                                                                         │
│     activeFocal.rewarded = activeFocal.rewarded.add(amount);                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     emit DeclareReward(amount, address(rewardToken));                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
│   function _forfeit(uint256 forfeited) internal {                                                                                                                                                               │
│     require(forfeited <= _globals.declaredBalance, "Cannot forfeit more than declared");                                                                                                                        │
│                                                                                                                                                                                                                 │
│     _globals.declaredBalance = _globals.declaredBalance.sub(forfeited);                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     rewardToken.safeTransfer(address(forfeitor), forfeited);                                                                                                                                                    │
│     forfeitor.handleForfeit();                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│     uint256 totalReward = rewardToken.balanceOf(address(this)) + rewardMine.totalReleasedReward();                                                                                                              │
│                                                                                                                                                                                                                 │
│     require(_globals.declaredBalance <= totalReward, "Insufficient balance");                                                                                                                                   │
│                                                                                                                                                                                                                 │
│     emit Forfeit(msg.sender, address(rewardToken), forfeited);                                                                                                                                                  │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function maltMarketPrice() public view returns (uint256 price, uint256 decimals) {                                                                                                                            │
│     // TODO use datalab anywhere that calls this Tue 05 Oct 2021 20:56:41 BST                                                                                                                                   │
│     (uint256 maltReserves, uint256 rewardReserves) = UniswapV2Library.getReserves(                                                                                                                              │
│       uniswapV2Factory,                                                                                                                                                                                         │
│       address(malt),                                                                                                                                                                                            │
│       address(rewardToken)                                                                                                                                                                                      │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     if (maltReserves == 0 || rewardReserves == 0) {                                                                                                                                                             │
│       price = 0;                                                                                                                                                                                                │
│       decimals = 18;                                                                                                                                                                                            │
│       return (price, decimals);                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 rewardDecimals = rewardToken.decimals();                                                                                                                                                            │
│     uint256 maltDecimals = malt.decimals();                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     if (rewardDecimals > maltDecimals) {                                                                                                                                                                        │
│       uint256 diff = rewardDecimals - maltDecimals;                                                                                                                                                             │
│       price = rewardReserves.mul(10**rewardDecimals).div(maltReserves.mul(10**diff));                                                                                                                           │
│       decimals = rewardDecimals;                                                                                                                                                                                │
│     } else if (rewardDecimals < maltDecimals) {                                                                                                                                                                 │
│       uint256 diff = maltDecimals - rewardDecimals;                                                                                                                                                             │
│       price = (rewardReserves.mul(10**diff)).mul(10**rewardDecimals).div(maltReserves);                                                                                                                         │
│       decimals = maltDecimals;                                                                                                                                                                                  │
│     } else {                                                                                                                                                                                                    │
│       price = rewardReserves.mul(10**rewardDecimals).div(maltReserves);                                                                                                                                         │
│       decimals = rewardDecimals;                                                                                                                                                                                │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function maltMarketPrice() public view returns (uint256 price, uint256 decimals) {                                                                                                                            │
│     // TODO use datalab anywhere that calls this Tue 05 Oct 2021 20:56:41 BST                                                                                                                                   │
│     (uint256 maltReserves, uint256 rewardReserves) = UniswapV2Library.getReserves(                                                                                                                              │
│       uniswapV2Factory,                                                                                                                                                                                         │
│       address(malt),                                                                                                                                                                                            │
│       address(rewardToken)                                                                                                                                                                                      │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     if (maltReserves == 0 || rewardReserves == 0) {                                                                                                                                                             │
│       price = 0;                                                                                                                                                                                                │
│       decimals = 18;                                                                                                                                                                                            │
│       return (price, decimals);                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 rewardDecimals = rewardToken.decimals();                                                                                                                                                            │
│     uint256 maltDecimals = malt.decimals();                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     if (rewardDecimals > maltDecimals) {                                                                                                                                                                        │
│       uint256 diff = rewardDecimals - maltDecimals;                                                                                                                                                             │
│       price = rewardReserves.mul(10**rewardDecimals).div(maltReserves.mul(10**diff));                                                                                                                           │
│       decimals = rewardDecimals;                                                                                                                                                                                │
│     } else if (rewardDecimals < maltDecimals) {                                                                                                                                                                 │
│       uint256 diff = maltDecimals - rewardDecimals;                                                                                                                                                             │
│       price = (rewardReserves.mul(10**diff)).mul(10**rewardDecimals).div(maltReserves);                                                                                                                         │
│       decimals = maltDecimals;                                                                                                                                                                                  │
│     } else {                                                                                                                                                                                                    │
│       price = rewardReserves.mul(10**rewardDecimals).div(maltReserves);                                                                                                                                         │
│       decimals = rewardDecimals;                                                                                                                                                                                │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function getOptimalLiquidity(address tokenA, address tokenB, uint256 liquidityB)                                                                                                                              │
│     external view returns (uint256 liquidityA)                                                                                                                                                                  │
│   {                                                                                                                                                                                                             │
│     // TODO use datalab anywhere that calls this Tue 05 Oct 2021 20:56:41 BST                                                                                                                                   │
│     (uint256 reservesA, uint256 reservesB) = UniswapV2Library.getReserves(                                                                                                                                      │
│       uniswapV2Factory,                                                                                                                                                                                         │
│       tokenA,                                                                                                                                                                                                   │
│       tokenB                                                                                                                                                                                                    │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     liquidityA = UniswapV2Library.quote(                                                                                                                                                                        │
│       liquidityB,                                                                                                                                                                                               │
│       reservesB,                                                                                                                                                                                                │
│       reservesA                                                                                                                                                                                                 │
│     );                                                                                                                                                                                                          │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function getOptimalLiquidity(address tokenA, address tokenB, uint256 liquidityB)                                                                                                                              │
│     external view returns (uint256 liquidityA)                                                                                                                                                                  │
│   {                                                                                                                                                                                                             │
│     // TODO use datalab anywhere that calls this Tue 05 Oct 2021 20:56:41 BST                                                                                                                                   │
│     (uint256 reservesA, uint256 reservesB) = UniswapV2Library.getReserves(                                                                                                                                      │
│       uniswapV2Factory,                                                                                                                                                                                         │
│       tokenA,                                                                                                                                                                                                   │
│       tokenB                                                                                                                                                                                                    │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     liquidityA = UniswapV2Library.quote(                                                                                                                                                                        │
│       liquidityB,                                                                                                                                                                                               │
│       reservesB,                                                                                                                                                                                                │
│       reservesA                                                                                                                                                                                                 │
│     );                                                                                                                                                                                                          │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ buy some tokens                                                                                                                                                                                                 │
│ Code:                                                                                                                                                                                                           │
│   function buyMalt()                                                                                                                                                                                            │
│     external                                                                                                                                                                                                    │
│     onlyRole(BUYER_ROLE, "Must have buyer privs")                                                                                                                                                               │
│     returns (uint256 purchased)                                                                                                                                                                                 │
│   {                                                                                                                                                                                                             │
│     uint256 rewardBalance = rewardToken.balanceOf(address(this));                                                                                                                                               │
│                                                                                                                                                                                                                 │
│     if (rewardBalance == 0) {                                                                                                                                                                                   │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     rewardToken.approve(address(router), rewardBalance);                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     address[] memory path = new address[](2);                                                                                                                                                                   │
│     path[0] = address(rewardToken);                                                                                                                                                                             │
│     path[1] = address(malt);                                                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     router.swapExactTokensForTokens(                                                                                                                                                                            │
│       rewardBalance,                                                                                                                                                                                            │
│       0, // amountOutMin                                                                                                                                                                                        │
│       path,                                                                                                                                                                                                     │
│       address(this),                                                                                                                                                                                            │
│       now                                                                                                                                                                                                       │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     purchased = malt.balanceOf(address(this));                                                                                                                                                                  │
│     malt.safeTransfer(msg.sender, purchased);                                                                                                                                                                   │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No",                                                                                                                                                                                                    │
│   "2": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: buy some tokens using Uniswap/PancakeSwap APIs                                                                                                                                                       │
│ Code:                                                                                                                                                                                                           │
│   function buyMalt()                                                                                                                                                                                            │
│     external                                                                                                                                                                                                    │
│     onlyRole(BUYER_ROLE, "Must have buyer privs")                                                                                                                                                               │
│     returns (uint256 purchased)                                                                                                                                                                                 │
│   {                                                                                                                                                                                                             │
│     uint256 rewardBalance = rewardToken.balanceOf(address(this));                                                                                                                                               │
│                                                                                                                                                                                                                 │
│     if (rewardBalance == 0) {                                                                                                                                                                                   │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     rewardToken.approve(address(router), rewardBalance);                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     address[] memory path = new address[](2);                                                                                                                                                                   │
│     path[0] = address(rewardToken);                                                                                                                                                                             │
│     path[1] = address(malt);                                                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│     router.swapExactTokensForTokens(                                                                                                                                                                            │
│       rewardBalance,                                                                                                                                                                                            │
│       0, // amountOutMin                                                                                                                                                                                        │
│       path,                                                                                                                                                                                                     │
│       address(this),                                                                                                                                                                                            │
│       now                                                                                                                                                                                                       │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     purchased = malt.balanceOf(address(this));                                                                                                                                                                  │
│     malt.safeTransfer(msg.sender, purchased);                                                                                                                                                                   │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ No.                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function sellMalt() external returns (uint256 rewards) {                                                                                                                                                      │
│     uint256 maltBalance = malt.balanceOf(address(this));                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     if (maltBalance == 0) {                                                                                                                                                                                     │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     malt.approve(address(router), maltBalance);                                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│     address[] memory path = new address[](2);                                                                                                                                                                   │
│     path[0] = address(malt);                                                                                                                                                                                    │
│     path[1] = address(rewardToken);                                                                                                                                                                             │
│                                                                                                                                                                                                                 │
│     router.swapExactTokensForTokens(                                                                                                                                                                            │
│       maltBalance,                                                                                                                                                                                              │
│       0,                                                                                                                                                                                                        │
│       path,                                                                                                                                                                                                     │
│       address(this),                                                                                                                                                                                            │
│       now                                                                                                                                                                                                       │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     rewards = rewardToken.balanceOf(address(this));                                                                                                                                                             │
│     rewardToken.safeTransfer(msg.sender, rewards);                                                                                                                                                              │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function sellMalt() external returns (uint256 rewards) {                                                                                                                                                      │
│     uint256 maltBalance = malt.balanceOf(address(this));                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     if (maltBalance == 0) {                                                                                                                                                                                     │
│       return 0;                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     malt.approve(address(router), maltBalance);                                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│     address[] memory path = new address[](2);                                                                                                                                                                   │
│     path[0] = address(malt);                                                                                                                                                                                    │
│     path[1] = address(rewardToken);                                                                                                                                                                             │
│                                                                                                                                                                                                                 │
│     router.swapExactTokensForTokens(                                                                                                                                                                            │
│       maltBalance,                                                                                                                                                                                              │
│       0,                                                                                                                                                                                                        │
│       path,                                                                                                                                                                                                     │
│       address(this),                                                                                                                                                                                            │
│       now                                                                                                                                                                                                       │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     rewards = rewardToken.balanceOf(address(this));                                                                                                                                                             │
│     rewardToken.safeTransfer(msg.sender, rewards);                                                                                                                                                              │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ No.                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function addLiquidity() external returns (                                                                                                                                                                    │
│     uint256 maltUsed,                                                                                                                                                                                           │
│     uint256 rewardUsed,                                                                                                                                                                                         │
│     uint256 liquidityCreated                                                                                                                                                                                    │
│   ) {                                                                                                                                                                                                           │
│     uint256 maltBalance = malt.balanceOf(address(this));                                                                                                                                                        │
│     uint256 rewardBalance = rewardToken.balanceOf(address(this));                                                                                                                                               │
│                                                                                                                                                                                                                 │
│     if (maltBalance == 0 || rewardBalance == 0) {                                                                                                                                                               │
│       return (0, 0, 0);                                                                                                                                                                                         │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     rewardToken.approve(address(router), rewardBalance);                                                                                                                                                        │
│     malt.approve(address(router), maltBalance);                                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│     // TODO maybe make slippage tolerance here adjustable Fri 19 Nov 2021 16:45:57 GMT                                                                                                                          │
│     (maltUsed, rewardUsed, liquidityCreated) = router.addLiquidity(                                                                                                                                             │
│       address(malt),                                                                                                                                                                                            │
│       address(rewardToken),                                                                                                                                                                                     │
│       maltBalance,                                                                                                                                                                                              │
│       rewardBalance,                                                                                                                                                                                            │
│       maltBalance.mul(95).div(100),                                                                                                                                                                             │
│       rewardBalance.mul(95).div(100),                                                                                                                                                                           │
│       msg.sender, // transfer LP tokens to sender                                                                                                                                                               │
│       now                                                                                                                                                                                                       │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     if (maltUsed < maltBalance) {                                                                                                                                                                               │
│       malt.safeTransfer(msg.sender, maltBalance.sub(maltUsed));                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (rewardUsed < rewardBalance) {                                                                                                                                                                           │
│       rewardToken.safeTransfer(msg.sender, rewardBalance.sub(rewardUsed));                                                                                                                                      │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "Yes"                                                                                                                                                                                                    │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function addLiquidity() external returns (                                                                                                                                                                    │
│     uint256 maltUsed,                                                                                                                                                                                           │
│     uint256 rewardUsed,                                                                                                                                                                                         │
│     uint256 liquidityCreated                                                                                                                                                                                    │
│   ) {                                                                                                                                                                                                           │
│     uint256 maltBalance = malt.balanceOf(address(this));                                                                                                                                                        │
│     uint256 rewardBalance = rewardToken.balanceOf(address(this));                                                                                                                                               │
│                                                                                                                                                                                                                 │
│     if (maltBalance == 0 || rewardBalance == 0) {                                                                                                                                                               │
│       return (0, 0, 0);                                                                                                                                                                                         │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     rewardToken.approve(address(router), rewardBalance);                                                                                                                                                        │
│     malt.approve(address(router), maltBalance);                                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│     // TODO maybe make slippage tolerance here adjustable Fri 19 Nov 2021 16:45:57 GMT                                                                                                                          │
│     (maltUsed, rewardUsed, liquidityCreated) = router.addLiquidity(                                                                                                                                             │
│       address(malt),                                                                                                                                                                                            │
│       address(rewardToken),                                                                                                                                                                                     │
│       maltBalance,                                                                                                                                                                                              │
│       rewardBalance,                                                                                                                                                                                            │
│       maltBalance.mul(95).div(100),                                                                                                                                                                             │
│       rewardBalance.mul(95).div(100),                                                                                                                                                                           │
│       msg.sender, // transfer LP tokens to sender                                                                                                                                                               │
│       now                                                                                                                                                                                                       │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     if (maltUsed < maltBalance) {                                                                                                                                                                               │
│       malt.safeTransfer(msg.sender, maltBalance.sub(maltUsed));                                                                                                                                                 │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     if (rewardUsed < rewardBalance) {                                                                                                                                                                           │
│       rewardToken.safeTransfer(msg.sender, rewardBalance.sub(rewardUsed));                                                                                                                                      │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function removeLiquidity() external returns (uint256 amountMalt, uint256 amountReward) {                                                                                                                      │
│     uint256 liquidityBalance = lpToken.balanceOf(address(this));                                                                                                                                                │
│                                                                                                                                                                                                                 │
│     if (liquidityBalance == 0) {                                                                                                                                                                                │
│       return (0, 0);                                                                                                                                                                                            │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     lpToken.approve(address(router), liquidityBalance);                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     (amountMalt, amountReward) = router.removeLiquidity(                                                                                                                                                        │
│       address(malt),                                                                                                                                                                                            │
│       address(rewardToken),                                                                                                                                                                                     │
│       liquidityBalance,                                                                                                                                                                                         │
│       0,                                                                                                                                                                                                        │
│       0,                                                                                                                                                                                                        │
│       msg.sender, // transfer broken LP tokens to sender                                                                                                                                                        │
│       now                                                                                                                                                                                                       │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     if (amountMalt == 0 || amountReward == 0) {                                                                                                                                                                 │
│       liquidityBalance = lpToken.balanceOf(address(this));                                                                                                                                                      │
│       lpToken.safeTransfer(msg.sender, liquidityBalance);                                                                                                                                                       │
│       return (amountMalt, amountReward);                                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "1": "No"                                                                                                                                                                                                     │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│   function _calculateTradeSize(address sellToken, address buyToken, uint256 priceTarget) private view returns (uint256) {                                                                                       │
│     // TODO use data lab average Tue 05 Oct 2021 20:40:23 BST                                                                                                                                                   │
│     (uint256 sellReserves, uint256 buyReserves) = UniswapV2Library.getReserves(                                                                                                                                 │
│       uniswapV2Factory,                                                                                                                                                                                         │
│       sellToken,                                                                                                                                                                                                │
│       buyToken                                                                                                                                                                                                  │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     uint256 invariant = sellReserves.mul(buyReserves);                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     uint256 buyBase = 10**uint256(ERC20(buyToken).decimals());                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│     uint256 leftSide = Babylonian.sqrt(                                                                                                                                                                         │
│       FullMath.mulDiv(                                                                                                                                                                                          │
│         invariant.mul(1000),                                                                                                                                                                                    │
│         priceTarget,                                                                                                                                                                                            │
│         buyBase.div(priceTarget).mul(buyBase).mul(997)                                                                                                                                                          │
│       )                                                                                                                                                                                                         │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     uint256 rightSide = sellReserves.mul(1000).div(997);                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     if (leftSide < rightSide) return 0;                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     return leftSide.sub(rightSide);                                                                                                                                                                             │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│   function _calculateTradeSize(address sellToken, address buyToken, uint256 priceTarget) private view returns (uint256) {                                                                                       │
│     // TODO use data lab average Tue 05 Oct 2021 20:40:23 BST                                                                                                                                                   │
│     (uint256 sellReserves, uint256 buyReserves) = UniswapV2Library.getReserves(                                                                                                                                 │
│       uniswapV2Factory,                                                                                                                                                                                         │
│       sellToken,                                                                                                                                                                                                │
│       buyToken                                                                                                                                                                                                  │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     uint256 invariant = sellReserves.mul(buyReserves);                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     uint256 buyBase = 10**uint256(ERC20(buyToken).decimals());                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│     uint256 leftSide = Babylonian.sqrt(                                                                                                                                                                         │
│       FullMath.mulDiv(                                                                                                                                                                                          │
│         invariant.mul(1000),                                                                                                                                                                                    │
│         priceTarget,                                                                                                                                                                                            │
│         buyBase.div(priceTarget).mul(buyBase).mul(997)                                                                                                                                                          │
│       )                                                                                                                                                                                                         │
│     );                                                                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│     uint256 rightSide = sellReserves.mul(1000).div(997);                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│     if (leftSide < rightSide) return 0;                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│     return leftSide.sub(rightSide);                                                                                                                                                                             │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes.                                                                                                                                                                                                            │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function getReserves(address factory, address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB) {                                                                                │
│         (address token0,) = sortTokens(tokenA, tokenB);                                                                                                                                                         │
│         (uint reserve0, uint reserve1,) = IUniswapV2Pair(pairFor(factory, tokenA, tokenB)).getReserves();                                                                                                       │
│         (reserveA, reserveB) = tokenA == token0 ? (reserve0, reserve1) : (reserve1, reserve0);                                                                                                                  │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function getAmountsOut(address factory, uint amountIn, address[] memory path) internal view returns (uint[] memory amounts) {                                                                               │
│         require(path.length >= 2, 'UniswapV2Library: INVALID_PATH');                                                                                                                                            │
│         amounts = new uint[](path.length);                                                                                                                                                                      │
│         amounts[0] = amountIn;                                                                                                                                                                                  │
│         for (uint i; i < path.length - 1; i++) {                                                                                                                                                                │
│             (uint reserveIn, uint reserveOut) = getReserves(factory, path, path);                                                                                                                               │
│             amounts = getAmountOut(amounts, reserveIn, reserveOut);                                                                                                                                             │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│     function getReserves(address factory, address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB) {                                                                                │
│         (address token0,) = sortTokens(tokenA, tokenB);                                                                                                                                                         │
│         (uint reserve0, uint reserve1,) = IUniswapV2Pair(pairFor(factory, tokenA, tokenB)).getReserves();                                                                                                       │
│         (reserveA, reserveB) = tokenA == token0 ? (reserve0, reserve1) : (reserve1, reserve0);                                                                                                                  │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│     function getAmountsOut(address factory, uint amountIn, address[] memory path) internal view returns (uint[] memory amounts) {                                                                               │
│         require(path.length >= 2, 'UniswapV2Library: INVALID_PATH');                                                                                                                                            │
│         amounts = new uint[](path.length);                                                                                                                                                                      │
│         amounts[0] = amountIn;                                                                                                                                                                                  │
│         for (uint i; i < path.length - 1; i++) {                                                                                                                                                                │
│             (uint reserveIn, uint reserveOut) = getReserves(factory, path, path);                                                                                                                               │
│             amounts = getAmountOut(amounts, reserveIn, reserveOut);                                                                                                                                             │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│     function getReserves(address factory, address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB) {                                                                                │
│         (address token0,) = sortTokens(tokenA, tokenB);                                                                                                                                                         │
│         (uint reserve0, uint reserve1,) = IUniswapV2Pair(pairFor(factory, tokenA, tokenB)).getReserves();                                                                                                       │
│         (reserveA, reserveB) = tokenA == token0 ? (reserve0, reserve1) : (reserve1, reserve0);                                                                                                                  │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function getReserves(address factory, address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB) {                                                                                │
│         (address token0,) = sortTokens(tokenA, tokenB);                                                                                                                                                         │
│         (uint reserve0, uint reserve1,) = IUniswapV2Pair(pairFor(factory, tokenA, tokenB)).getReserves();                                                                                                       │
│         (reserveA, reserveB) = tokenA == token0 ? (reserve0, reserve1) : (reserve1, reserve0);                                                                                                                  │
│     }                                                                                                                                                                                                           │
│     function getReserves(address factory, address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB) {                                                                                │
│         (address token0,) = sortTokens(tokenA, tokenB);                                                                                                                                                         │
│         (uint reserve0, uint reserve1,) = IUniswapV2Pair(pairFor(factory, tokenA, tokenB)).getReserves();                                                                                                       │
│         (reserveA, reserveB) = tokenA == token0 ? (reserve0, reserve1) : (reserve1, reserve0);                                                                                                                  │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│     function getReserves(address factory, address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB) {                                                                                │
│         (address token0,) = sortTokens(tokenA, tokenB);                                                                                                                                                         │
│         (uint reserve0, uint reserve1,) = IUniswapV2Pair(pairFor(factory, tokenA, tokenB)).getReserves();                                                                                                       │
│         (reserveA, reserveB) = tokenA == token0 ? (reserve0, reserve1) : (reserve1, reserve0);                                                                                                                  │
│     }                                                                                                                                                                                                           │
│     function getReserves(address factory, address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB) {                                                                                │
│         (address token0,) = sortTokens(tokenA, tokenB);                                                                                                                                                         │
│         (uint reserve0, uint reserve1,) = IUniswapV2Pair(pairFor(factory, tokenA, tokenB)).getReserves();                                                                                                       │
│         (reserveA, reserveB) = tokenA == token0 ? (reserve0, reserve1) : (reserve1, reserve0);                                                                                                                  │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ No                                                                                                                                                                                                              │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function getAmountsIn(address factory, uint amountOut, address[] memory path) internal view returns (uint[] memory amounts) {                                                                               │
│         require(path.length >= 2, 'UniswapV2Library: INVALID_PATH');                                                                                                                                            │
│         amounts = new uint[](path.length);                                                                                                                                                                      │
│         amounts = amountOut;                                                                                                                                                                                    │
│         for (uint i = path.length - 1; i > 0; i--) {                                                                                                                                                            │
│             (uint reserveIn, uint reserveOut) = getReserves(factory, path, path);                                                                                                                               │
│             amounts = getAmountIn(amounts, reserveIn, reserveOut);                                                                                                                                              │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│     function getReserves(address factory, address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB) {                                                                                │
│         (address token0,) = sortTokens(tokenA, tokenB);                                                                                                                                                         │
│         (uint reserve0, uint reserve1,) = IUniswapV2Pair(pairFor(factory, tokenA, tokenB)).getReserves();                                                                                                       │
│         (reserveA, reserveB) = tokenA == token0 ? (reserve0, reserve1) : (reserve1, reserve0);                                                                                                                  │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│     function getAmountsIn(address factory, uint amountOut, address[] memory path) internal view returns (uint[] memory amounts) {                                                                               │
│         require(path.length >= 2, 'UniswapV2Library: INVALID_PATH');                                                                                                                                            │
│         amounts = new uint[](path.length);                                                                                                                                                                      │
│         amounts = amountOut;                                                                                                                                                                                    │
│         for (uint i = path.length - 1; i > 0; i--) {                                                                                                                                                            │
│             (uint reserveIn, uint reserveOut) = getReserves(factory, path, path);                                                                                                                               │
│             amounts = getAmountIn(amounts, reserveIn, reserveOut);                                                                                                                                              │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│     function getReserves(address factory, address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB) {                                                                                │
│         (address token0,) = sortTokens(tokenA, tokenB);                                                                                                                                                         │
│         (uint reserve0, uint reserve1,) = IUniswapV2Pair(pairFor(factory, tokenA, tokenB)).getReserves();                                                                                                       │
│         (reserveA, reserveB) = tokenA == token0 ? (reserve0, reserve1) : (reserve1, reserve0);                                                                                                                  │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function getAmountsOut(address factory, uint amountIn, address[] memory path) internal view returns (uint[] memory amounts) {                                                                               │
│         require(path.length >= 2, 'UniswapV2Library: INVALID_PATH');                                                                                                                                            │
│         amounts = new uint[](path.length);                                                                                                                                                                      │
│         amounts[0] = amountIn;                                                                                                                                                                                  │
│         for (uint i; i < path.length - 1; i++) {                                                                                                                                                                │
│             (uint reserveIn, uint reserveOut) = getReserves(factory, path, path);                                                                                                                               │
│             amounts = getAmountOut(amounts, reserveIn, reserveOut);                                                                                                                                             │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│     function getAmountsOut(address factory, uint amountIn, address[] memory path) internal view returns (uint[] memory amounts) {                                                                               │
│         require(path.length >= 2, 'UniswapV2Library: INVALID_PATH');                                                                                                                                            │
│         amounts = new uint[](path.length);                                                                                                                                                                      │
│         amounts[0] = amountIn;                                                                                                                                                                                  │
│         for (uint i; i < path.length - 1; i++) {                                                                                                                                                                │
│             (uint reserveIn, uint reserveOut) = getReserves(factory, path, path);                                                                                                                               │
│             amounts = getAmountOut(amounts, reserveIn, reserveOut);                                                                                                                                             │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function getAmountsIn(address factory, uint amountOut, address[] memory path) internal view returns (uint[] memory amounts) {                                                                               │
│         require(path.length >= 2, 'UniswapV2Library: INVALID_PATH');                                                                                                                                            │
│         amounts = new uint[](path.length);                                                                                                                                                                      │
│         amounts = amountOut;                                                                                                                                                                                    │
│         for (uint i = path.length - 1; i > 0; i--) {                                                                                                                                                            │
│             (uint reserveIn, uint reserveOut) = getReserves(factory, path, path);                                                                                                                               │
│             amounts = getAmountIn(amounts, reserveIn, reserveOut);                                                                                                                                              │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│     function getAmountsIn(address factory, uint amountOut, address[] memory path) internal view returns (uint[] memory amounts) {                                                                               │
│         require(path.length >= 2, 'UniswapV2Library: INVALID_PATH');                                                                                                                                            │
│         amounts = new uint[](path.length);                                                                                                                                                                      │
│         amounts = amountOut;                                                                                                                                                                                    │
│         for (uint i = path.length - 1; i > 0; i--) {                                                                                                                                                            │
│             (uint reserveIn, uint reserveOut) = getReserves(factory, path, path);                                                                                                                               │
│             amounts = getAmountIn(amounts, reserveIn, reserveOut);                                                                                                                                              │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "VariableA": {                                                                                                                                                                                                │
│     "balance": "Holds the balance of the collateral token in the contract",                                                                                                                                     │
│     "collateralDecimals": "Holds the number of decimals of the collateral token",                                                                                                                               │
│     "maltSupply": "Holds the supply of the MALT token in the Uniswap pair",                                                                                                                                     │
│     "collateralSupply": "Holds the supply of the collateral token in the Uniswap pair",                                                                                                                         │
│     "k": "Holds the product of MALT supply and collateral supply",                                                                                                                                              │
│     "priceTarget": "Holds the price target from maltDataLab",                                                                                                                                                   │
│     "fullCollateral": "Holds the calculated full collateral amount",                                                                                                                                            │
│     "minReserves": "Holds the calculated minimum reserves required"                                                                                                                                             │
│   },                                                                                                                                                                                                            │
│   "VariableB": {                                                                                                                                                                                                │
│     "minReserves": "Holds the calculated minimum reserves required to reach the target"                                                                                                                         │
│   }                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:41] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/LiquidityExtension.sol, current       tasks.py:260
                             function: collateralDeficit, current vul: price-manipulation                                                                                                                          
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 209, in simple_cli                                                                                       
                                 raise Exception(                                                                                                                                                                  
                             Exception: The description of variable did not pass the `validate_description` validation                                                                                             
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "VariableA": {                                                                                                                                                                                                │
│     "balance": "Holds the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation"                                                                         │
│   },                                                                                                                                                                                                            │
│   "VariableB": {                                                                                                                                                                                                │
│     "rRatio": "Holds the calculated value/price of LP token"                                                                                                                                                    │
│   }                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:42] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/LiquidityExtension.sol, current       tasks.py:260
                             function: reserveRatio, current vul: price-manipulation                                                                                                                               
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "VariableA": {                                                                                                                                                                                                │
│     "maltPrice": "Holds the market price of MALT token",                                                                                                                                                        │
│     "target": "Holds the price target value"                                                                                                                                                                    │
│   },                                                                                                                                                                                                            │
│   "VariableB": {                                                                                                                                                                                                │
│     "collateral": "Holds the calculated value/price of LP token"                                                                                                                                                │
│   }                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
                    ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/ImpliedCollateralService.sol, current tasks.py:260
                             function: getCollateralValueInMalt, current vul: price-manipulation                                                                                                                   
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "VariableA": {                                                                                                                                                                                                │
│     "maltBalance": "Variable holding the custom token balanceOf calculation"                                                                                                                                    │
│   },                                                                                                                                                                                                            │
│   "VariableB": {                                                                                                                                                                                                │
│     "cost": "Variable holding the calculated value/price of LP token"                                                                                                                                           │
│   }                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:43] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/SwingTrader.sol, current function:    tasks.py:260
                             costBasis, current vul: price-manipulation                                                                                                                                            
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "VariableA": {                                                                                                                                                                                                │
│     "totalMaltBalance": "Variable holding the total MALT token balance of the contract",                                                                                                                        │
│     "balance": "Variable used for balance calculations"                                                                                                                                                         │
│   },                                                                                                                                                                                                            │
│   "VariableB": {                                                                                                                                                                                                │
│     "profit": "Variable holding the calculated profit value"                                                                                                                                                    │
│   }                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:44] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:357
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/SwingTrader.sol, current function:    tasks.py:359
                             costBasis, current vul: price-manipulation                                                                                                                                            
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:361
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 355, in simple_cli                                                                                       
                                 falcon_instance, function2_text)                                                                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭───────────────────────────────────────────────────────────────────────────────────────────────── Current Step ──────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: In the given code, which inside code statement is the first statement to update/accrue interest/exchange rate? Answer only ZERO or ONE statement, cover the code with backquotes.                    │
│ Code:                                                                                                                                                                                                           │
│   function _stabilityWindowOverride() internal view returns (bool) {                                                                                                                                            │
│     if (hasRole(ADMIN_ROLE, _msgSender())) {                                                                                                                                                                    │
│       // Admin can always stabilize                                                                                                                                                                             │
│       return true;                                                                                                                                                                                              │
│     }                                                                                                                                                                                                           │
│     // Must have elapsed at least one period of the moving average before we stabilize again                                                                                                                    │
│     if (block.timestamp < lastStabilize + fastAveragePeriod) {                                                                                                                                                  │
│       return false;                                                                                                                                                                                             │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│     uint256 exchangeRate = maltDataLab.maltPriceAverage(fastAveragePeriod);                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     uint256 upperThreshold = priceTarget.mul(1000 + overrideDistance).div(1000);                                                                                                                                │
│     uint256 lowerThreshold = priceTarget.mul(1000 - overrideDistance).div(1000);                                                                                                                                │
│                                                                                                                                                                                                                 │
│     return exchangeRate <= lowerThreshold || exchangeRate >= upperThreshold;                                                                                                                                    │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ The first statement to update/accrue interest/exchange rate is `uint256 exchangeRate = maltDataLab.maltPriceAverage(fastAveragePeriod);`.                                                                       │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭───────────────────────────────────────────────────────────────────────────────────────────────── Current Step ──────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: In the given code, which inside code statement is the first statement to calculate/assign/distribute the balance/share/stake/fee/loan/reward? Answer only ZERO or ONE statement, cover the code with │
│ backquotes.                                                                                                                                                                                                     │
│ Code:                                                                                                                                                                                                           │
│   function _stabilityWindowOverride() internal view returns (bool) {                                                                                                                                            │
│     if (hasRole(ADMIN_ROLE, _msgSender())) {                                                                                                                                                                    │
│       // Admin can always stabilize                                                                                                                                                                             │
│       return true;                                                                                                                                                                                              │
│     }                                                                                                                                                                                                           │
│     // Must have elapsed at least one period of the moving average before we stabilize again                                                                                                                    │
│     if (block.timestamp < lastStabilize + fastAveragePeriod) {                                                                                                                                                  │
│       return false;                                                                                                                                                                                             │
│     }                                                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│     uint256 priceTarget = maltDataLab.priceTarget();                                                                                                                                                            │
│     uint256 exchangeRate = maltDataLab.maltPriceAverage(fastAveragePeriod);                                                                                                                                     │
│                                                                                                                                                                                                                 │
│     uint256 upperThreshold = priceTarget.mul(1000 + overrideDistance).div(1000);                                                                                                                                │
│     uint256 lowerThreshold = priceTarget.mul(1000 - overrideDistance).div(1000);                                                                                                                                │
│                                                                                                                                                                                                                 │
│     return exchangeRate <= lowerThreshold || exchangeRate >= upperThreshold;                                                                                                                                    │
│   }                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ `uint256 priceTarget = maltDataLab.priceTarget();`                                                                                                                                                              │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:45] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/StabilizerNode.sol, current function: tasks.py:260
                             _stabilityWindowOverride, current vul: wrong-order-interest                                                                                                                           
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "VariableA": {                                                                                                                                                                                                │
│     "exchangeRate": "Holds the exchange rate calculated using maltDataLab.maltPriceAverage(fastAveragePeriod)"                                                                                                  │
│   },                                                                                                                                                                                                            │
│   "VariableB": {                                                                                                                                                                                                │
│     "priceTarget": "Holds the price target calculated using maltDataLab.priceTarget()"                                                                                                                          │
│   }                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:46] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/StabilizerNode.sol, current function: tasks.py:260
                             _stabilityWindowOverride, current vul: price-manipulation                                                                                                                             
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "VariableA": {                                                                                                                                                                                                │
│     "exchangeRate": "Holds the market reserves/AMM price/exchange rate calculation"                                                                                                                             │
│   },                                                                                                                                                                                                            │
│   "VariableB": {                                                                                                                                                                                                │
│     "N/A": "No variable holds the calculated value/price of LP token in this function"                                                                                                                          │
│   }                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:47] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:357
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/StabilizerNode.sol, current function: tasks.py:359
                             _stabilityWindowOverride, current vul: price-manipulation                                                                                                                             
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:361
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 355, in simple_cli                                                                                       
                                 falcon_instance, function2_text)                                                                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "VariableA": {                                                                                                                                                                                                │
│     "priceTarget": "Holds the market reserves/AMM price/exchange rate calculation"                                                                                                                              │
│   },                                                                                                                                                                                                            │
│   "VariableB": {                                                                                                                                                                                                │
│     "upperThreshold": "Holds the calculated value/price of LP token"                                                                                                                                            │
│   }                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
                    ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/StabilizerNode.sol, current function: tasks.py:260
                             _shouldAdjustSupply, current vul: price-manipulation                                                                                                                                  
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "VariableA": {                                                                                                                                                                                                │
│     "exchangeRate": "Holds the market reserves/AMM price/exchange rate calculation"                                                                                                                             │
│   },                                                                                                                                                                                                            │
│   "VariableB": {                                                                                                                                                                                                │
│     "N/A": "No variable holds the calculated value/price of LP token in this function"                                                                                                                          │
│   }                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:48] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:357
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/StabilizerNode.sol, current function: tasks.py:359
                             _shouldAdjustSupply, current vul: price-manipulation                                                                                                                                  
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:361
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 355, in simple_cli                                                                                       
                                 falcon_instance, function2_text)                                                                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "VariableA": {                                                                                                                                                                                                │
│     "maltReserves": "Holds the market reserves of MALT token",                                                                                                                                                  │
│     "rewardReserves": "Holds the market reserves of reward token",                                                                                                                                              │
│     "totalLPSupply": "Holds the total supply of LP tokens"                                                                                                                                                      │
│   },                                                                                                                                                                                                            │
│   "VariableB": {                                                                                                                                                                                                │
│     "maltValue": "Holds the calculated value of MALT token for the given amount"                                                                                                                                │
│   }                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:49] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/MaltDataLab.sol, current function:    tasks.py:260
                             realValueOfLPToken, current vul: price-manipulation                                                                                                                                   
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "VariableA": {                                                                                                                                                                                                │
│     "reserve0": "Variable that holds the first reserve value",                                                                                                                                                  │
│     "reserve1": "Variable that holds the second reserve value",                                                                                                                                                 │
│     "rewardDecimals": "Variable that holds the decimals of the reward token"                                                                                                                                    │
│   },                                                                                                                                                                                                            │
│   "VariableB": {                                                                                                                                                                                                │
│     "price": "Variable that holds the calculated price of LP token"                                                                                                                                             │
│   }                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:50] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/MaltDataLab.sol, current function:    tasks.py:260
                             trackMaltPrice, current vul: price-manipulation                                                                                                                                       
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "VariableA": {                                                                                                                                                                                                │
│     "reserve0": "Variable holding the first token reserve in the pool",                                                                                                                                         │
│     "reserve1": "Variable holding the second token reserve in the pool",                                                                                                                                        │
│     "rewardDecimals": "Variable holding the decimals of the reward token"                                                                                                                                       │
│   },                                                                                                                                                                                                            │
│   "VariableB": {                                                                                                                                                                                                │
│     "price": "Variable holding the calculated price of the LP token"                                                                                                                                            │
│   }                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:51] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/MaltDataLab.sol, current function:    tasks.py:260
                             trackPool, current vul: price-manipulation                                                                                                                                            
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "VariableA": {                                                                                                                                                                                                │
│     "maltReserves": "Variable holding the MALT reserves from UniswapV2",                                                                                                                                        │
│     "rewardReserves": "Variable holding the reward token reserves from UniswapV2",                                                                                                                              │
│     "rewardDecimals": "Variable holding the decimals of the reward token",                                                                                                                                      │
│     "maltDecimals": "Variable holding the decimals of the MALT token"                                                                                                                                           │
│   },                                                                                                                                                                                                            │
│   "VariableB": {                                                                                                                                                                                                │
│     "price": "Variable holding the calculated price of LP token"                                                                                                                                                │
│   }                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:52] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/DexHandlers/UniswapHandler.sol,       tasks.py:260
                             current function: maltMarketPrice, current vul: price-manipulation                                                                                                                    
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "VariableA": {                                                                                                                                                                                                │
│     "reservesA": "Holds the market reserves of tokenA",                                                                                                                                                         │
│     "reservesB": "Holds the market reserves of tokenB"                                                                                                                                                          │
│   },                                                                                                                                                                                                            │
│   "VariableB": {                                                                                                                                                                                                │
│     "liquidityA": "Holds the calculated value of LP token"                                                                                                                                                      │
│   }                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:53] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/DexHandlers/UniswapHandler.sol,       tasks.py:260
                             current function: getOptimalLiquidity, current vul: price-manipulation                                                                                                                
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "VariableA": {                                                                                                                                                                                                │
│     "maltBalance": "Variable holding the balance of the 'malt' token in the contract",                                                                                                                          │
│     "rewardBalance": "Variable holding the balance of the 'rewardToken' token in the contract",                                                                                                                 │
│     "maltUsed": "Variable holding the amount of 'malt' token used in adding liquidity",                                                                                                                         │
│     "rewardUsed": "Variable holding the amount of 'rewardToken' token used in adding liquidity",                                                                                                                │
│     "liquidityCreated": "Variable holding the amount of liquidity tokens created"                                                                                                                               │
│   },                                                                                                                                                                                                            │
│   "VariableB": {                                                                                                                                                                                                │
│     "liquidityCreated": "Variable holding the calculated value/price of LP tokens created"                                                                                                                      │
│   }                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:55] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/DexHandlers/UniswapHandler.sol,       tasks.py:260
                             current function: addLiquidity, current vul: price-manipulation                                                                                                                       
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│   "VariableA": {                                                                                                                                                                                                │
│     "sellReserves": "Holds the reserves of the sell token in the AMM",                                                                                                                                          │
│     "buyReserves": "Holds the reserves of the buy token in the AMM",                                                                                                                                            │
│     "invariant": "Holds the calculated invariant value",                                                                                                                                                        │
│     "buyBase": "Holds the base value for buy token calculations",                                                                                                                                               │
│     "leftSide": "Holds the calculated left side value for trade size",                                                                                                                                          │
│     "rightSide": "Holds the calculated right side value for trade size"                                                                                                                                         │
│   },                                                                                                                                                                                                            │
│   "VariableB": {                                                                                                                                                                                                │
│     "leftSide": "Holds the calculated value of LP token"                                                                                                                                                        │
│   }                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:56] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/DexHandlers/UniswapHandler.sol,       tasks.py:260
                             current function: _calculateTradeSize, current vul: price-manipulation                                                                                                                
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "VariableA": {                                                                                                                                                                                              │
│         "reserveA": "Holds the reserve of tokenA"                                                                                                                                                               │
│     },                                                                                                                                                                                                          │
│     "VariableB": {                                                                                                                                                                                              │
│         "N/A": "No variable holds the calculated value/price of LP token in this function"                                                                                                                      │
│     }                                                                                                                                                                                                           │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:57] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/libraries/UniswapV2Library.sol,       tasks.py:260
                             current function: getReserves, current vul: price-manipulation                                                                                                                        
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "VariableA": {                                                                                                                                                                                              │
│         "reserveIn": "Holds the market reserves of the input token",                                                                                                                                            │
│         "reserveOut": "Holds the market reserves of the output token"                                                                                                                                           │
│     },                                                                                                                                                                                                          │
│     "VariableB": {                                                                                                                                                                                              │
│         "amounts": "Holds the calculated values of the output token amounts"                                                                                                                                    │
│     }                                                                                                                                                                                                           │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:58] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:357
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/libraries/UniswapV2Library.sol,       tasks.py:359
                             current function: getReserves, current vul: price-manipulation                                                                                                                        
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:361
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 355, in simple_cli                                                                                       
                                 falcon_instance, function2_text)                                                                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "VariableA": {                                                                                                                                                                                              │
│         "reserveIn": "Holds the market reserves/AMM price/exchange rate for the input token",                                                                                                                   │
│         "reserveOut": "Holds the market reserves/AMM price/exchange rate for the output token"                                                                                                                  │
│     },                                                                                                                                                                                                          │
│     "VariableB": {                                                                                                                                                                                              │
│         "amounts": "Holds the calculated value/price of LP token"                                                                                                                                               │
│     }                                                                                                                                                                                                           │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:18:59] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:357
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/libraries/UniswapV2Library.sol,       tasks.py:359
                             current function: getReserves, current vul: price-manipulation                                                                                                                        
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:361
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 355, in simple_cli                                                                                       
                                 falcon_instance, function2_text)                                                                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "VariableA": {                                                                                                                                                                                              │
│         "reserveIn": "Holds the market reserves of the input token",                                                                                                                                            │
│         "reserveOut": "Holds the market reserves of the output token"                                                                                                                                           │
│     },                                                                                                                                                                                                          │
│     "VariableB": {                                                                                                                                                                                              │
│         "amounts": "Holds the calculated values of LP tokens"                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
                    ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/libraries/UniswapV2Library.sol,       tasks.py:260
                             current function: getAmountsOut, current vul: price-manipulation                                                                                                                      
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "VariableA": {                                                                                                                                                                                              │
│         "reserveIn": "Holds the market reserves/AMMprice/exchangeRate"                                                                                                                                          │
│     },                                                                                                                                                                                                          │
│     "VariableB": {                                                                                                                                                                                              │
│         "amounts": "Holds the calculated value/price of LP token"                                                                                                                                               │
│     }                                                                                                                                                                                                           │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:19:00] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-11-malt-main/contracts/libraries/UniswapV2Library.sol,       tasks.py:260
                             current function: getAmountsIn, current vul: price-manipulation                                                                                                                       
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
                      Scan Results                       
┏━━━━━━┳━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┓
┃ Type ┃ Description ┃ Affected Files ┃ Analysis Report ┃
┡━━━━━━╇━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━┩
└──────┴─────────────┴────────────────┴─────────────────┘
                  Summary                   
┏━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━┓
┃ Key                  ┃ Value             ┃
┡━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━┩
│ Files                │ 54                │
│ Contracts            │ 55                │
│ Functions            │ 239               │
│ Lines of Code        │ 6940              │
│ Used Time            │ 76.41201615333557 │
│ Estimated Cost (USD) │ 0.062598          │
└──────────────────────┴───────────────────┘
