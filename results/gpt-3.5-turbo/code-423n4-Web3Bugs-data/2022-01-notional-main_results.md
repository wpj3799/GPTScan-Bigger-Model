

  .oooooo.    ooooooooo.   ooooooooooooo  .oooooo..o                                 
 d8P'  `Y8b   `888   `Y88. 8'   888   `8 d8P'    `Y8                                 
888            888   .d88'      888      Y88bo.       .ooooo.   .oooo.   ooo. .oo.   
888            888ooo88P'       888       `"Y8888o.  d88' `"Y8 `P  )88b  `888P"Y88b  
888     ooooo  888              888           `"Y88b 888        .oP"888   888   888  
`88.    .88'   888              888      oo     .d8P 888   .o8 d8(  888   888   888  
 `Y8bood8P'   o888o            o888o     8""88888P'  `Y8bod8P' `Y888""8o o888o o888o                                                        


                                                                   

[19:38:10] Loaded 10 rules                                                                                                                                                                             tasks.py:119
[12/08/24 19:38:10] INFO     CryticCompile: 'npx hardhat clean' running (wd: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main)             subprocess.py:41
[12/08/24 19:38:11] ERROR    CryticCompile: 'npx' returned non-zero exit code 1                                                                                                                    subprocess.py:60
                    ERROR    CryticCompile: An unexpected error occurred:                                                                                                                          subprocess.py:68
                             stderr: Error: Cannot find module '@nomicfoundation/hardhat-toolbox'                                                                                                                  
                             stderr: Require stack:                                                                                                                                                                
                             stderr: - /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/hardhat.config.js                                                  
                             stderr: -                                                                                                                                                                             
                             /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/core/config/config-loading.js                  
                             stderr: - /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/cli/cli.js                           
                             stderr: - /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/cli/bootstrap.js                     
                             stderr:     at Function._resolveFilename (node:internal/modules/cjs/loader:1249:15)                                                                                                   
                             stderr:     at Function._load (node:internal/modules/cjs/loader:1075:27)                                                                                                              
                             stderr:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)                                                                                                             
                             stderr:     at wrapModuleLoad (node:internal/modules/cjs/loader:219:24)                                                                                                               
                             stderr:     at Module.require (node:internal/modules/cjs/loader:1340:12)                                                                                                              
                             stderr:     at require (node:internal/modules/helpers:138:16)                                                                                                                         
                             stderr:     at Object.<anonymous> (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/hardhat.config.js:1:1)                    
                             stderr:     at Module._compile (node:internal/modules/cjs/loader:1565:14)                                                                                                             
                             stderr:     at Object..js (node:internal/modules/cjs/loader:1708:10)                                                                                                                  
                             stderr:     at Module.load (node:internal/modules/cjs/loader:1318:32) {                                                                                                               
                             stderr:   code: 'MODULE_NOT_FOUND',                                                                                                                                                   
                             stderr:   requireStack: [                                                                                                                                                             
                             stderr:     '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/hardhat.config.js',                                             
                             stderr:                                                                                                                                                                               
                             '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/core/config/config-loading.js                 
                             ',                                                                                                                                                                                    
                             stderr:     '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/cli/cli.js',                      
                             stderr:     '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/cli/bootstrap.js'                 
                             stderr:   ]                                                                                                                                                                           
                             stderr: }                                                                                                                                                                             
                    INFO     CryticCompile: 'npx hardhat clean --global' running (wd: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main)    subprocess.py:41
                    ERROR    CryticCompile: 'npx' returned non-zero exit code 1                                                                                                                    subprocess.py:60
                    ERROR    CryticCompile: An unexpected error occurred:                                                                                                                          subprocess.py:68
                             stderr: Error: Cannot find module '@nomicfoundation/hardhat-toolbox'                                                                                                                  
                             stderr: Require stack:                                                                                                                                                                
                             stderr: - /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/hardhat.config.js                                                  
                             stderr: -                                                                                                                                                                             
                             /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/core/config/config-loading.js                  
                             stderr: - /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/cli/cli.js                           
                             stderr: - /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/cli/bootstrap.js                     
                             stderr:     at Function._resolveFilename (node:internal/modules/cjs/loader:1249:15)                                                                                                   
                             stderr:     at Function._load (node:internal/modules/cjs/loader:1075:27)                                                                                                              
                             stderr:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)                                                                                                             
                             stderr:     at wrapModuleLoad (node:internal/modules/cjs/loader:219:24)                                                                                                               
                             stderr:     at Module.require (node:internal/modules/cjs/loader:1340:12)                                                                                                              
                             stderr:     at require (node:internal/modules/helpers:138:16)                                                                                                                         
                             stderr:     at Object.<anonymous> (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/hardhat.config.js:1:1)                    
                             stderr:     at Module._compile (node:internal/modules/cjs/loader:1565:14)                                                                                                             
                             stderr:     at Object..js (node:internal/modules/cjs/loader:1708:10)                                                                                                                  
                             stderr:     at Module.load (node:internal/modules/cjs/loader:1318:32) {                                                                                                               
                             stderr:   code: 'MODULE_NOT_FOUND',                                                                                                                                                   
                             stderr:   requireStack: [                                                                                                                                                             
                             stderr:     '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/hardhat.config.js',                                             
                             stderr:                                                                                                                                                                               
                             '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/core/config/config-loading.js                 
                             ',                                                                                                                                                                                    
                             stderr:     '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/cli/cli.js',                      
                             stderr:     '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/cli/bootstrap.js'                 
                             stderr:   ]                                                                                                                                                                           
                             stderr: }                                                                                                                                                                             
[12/08/24 19:38:12] INFO     CryticCompile: Problem executing hardhat: An unexpected error occurred:                                                                                                 hardhat.py:327
                             Error: Cannot find module '@nomicfoundation/hardhat-toolbox'                                                                                                                          
                             Require stack:                                                                                                                                                                        
                             - /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/hardhat.config.js                                                          
                             - /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/core/config/config-loading.js                
                             - /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/cli/cli.js                                   
                             - /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/cli/bootstrap.js                             
                                 at Function._resolveFilename (node:internal/modules/cjs/loader:1249:15)                                                                                                           
                                 at Function._load (node:internal/modules/cjs/loader:1075:27)                                                                                                                      
                                 at TracingChannel.traceSync (node:diagnostics_channel:322:14)                                                                                                                     
                                 at wrapModuleLoad (node:internal/modules/cjs/loader:219:24)                                                                                                                       
                                 at Module.require (node:internal/modules/cjs/loader:1340:12)                                                                                                                      
                                 at require (node:internal/modules/helpers:138:16)                                                                                                                                 
                                 at Object.<anonymous> (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/hardhat.config.js:1:1)                            
                                 at Module._compile (node:internal/modules/cjs/loader:1565:14)                                                                                                                     
                                 at Object..js (node:internal/modules/cjs/loader:1708:10)                                                                                                                          
                                 at Module.load (node:internal/modules/cjs/loader:1318:32) {                                                                                                                       
                               code: 'MODULE_NOT_FOUND',                                                                                                                                                           
                               requireStack: [                                                                                                                                                                     
                                 '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/hardhat.config.js',                                                     
                                 '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/core/config/config-loading.               
                             js',                                                                                                                                                                                  
                                 '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/cli/cli.js',                              
                                 '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/cli/bootstrap.js'                         
                               ]                                                                                                                                                                                   
                             }                                                                                                                                                                                     
                                                                                                                                                                                                                   
                    INFO     CryticCompile: 'npx hardhat compile --force' running (wd: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main)   subprocess.py:41
                    ERROR    CryticCompile: 'npx' returned non-zero exit code 1                                                                                                                    subprocess.py:60
                    ERROR    CryticCompile: An unexpected error occurred:                                                                                                                          subprocess.py:68
                             stderr: Error: Cannot find module '@nomicfoundation/hardhat-toolbox'                                                                                                                  
                             stderr: Require stack:                                                                                                                                                                
                             stderr: - /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/hardhat.config.js                                                  
                             stderr: -                                                                                                                                                                             
                             /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/core/config/config-loading.js                  
                             stderr: - /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/cli/cli.js                           
                             stderr: - /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/cli/bootstrap.js                     
                             stderr:     at Function._resolveFilename (node:internal/modules/cjs/loader:1249:15)                                                                                                   
                             stderr:     at Function._load (node:internal/modules/cjs/loader:1075:27)                                                                                                              
                             stderr:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)                                                                                                             
                             stderr:     at wrapModuleLoad (node:internal/modules/cjs/loader:219:24)                                                                                                               
                             stderr:     at Module.require (node:internal/modules/cjs/loader:1340:12)                                                                                                              
                             stderr:     at require (node:internal/modules/helpers:138:16)                                                                                                                         
                             stderr:     at Object.<anonymous> (/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/hardhat.config.js:1:1)                    
                             stderr:     at Module._compile (node:internal/modules/cjs/loader:1565:14)                                                                                                             
                             stderr:     at Object..js (node:internal/modules/cjs/loader:1708:10)                                                                                                                  
                             stderr:     at Module.load (node:internal/modules/cjs/loader:1318:32) {                                                                                                               
                             stderr:   code: 'MODULE_NOT_FOUND',                                                                                                                                                   
                             stderr:   requireStack: [                                                                                                                                                             
                             stderr:     '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/hardhat.config.js',                                             
                             stderr:                                                                                                                                                                               
                             '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/core/config/config-loading.js                 
                             ',                                                                                                                                                                                    
                             stderr:     '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/cli/cli.js',                      
                             stderr:     '/home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/node_modules/hardhat/internal/cli/bootstrap.js'                 
                             stderr:   ]                                                                                                                                                                           
                             stderr: }                                                                                                                                                                             
[19:38:12] Traceback (most recent call last):                                                                                                                                                          tasks.py:126
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/falcon/falcon.py", line 90, in __init__                                                                     
               crytic_compile = CryticCompile(target, **kwargs)                                                                                                                                                    
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/crytic_compile/crytic_compile.py", line 131, in __init__                                                    
               self._compile(**kwargs)                                                                                                                                                                             
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/crytic_compile/crytic_compile.py", line 553, in _compile                                                    
               self._platform.compile(self, **kwargs)                                                                                                                                                              
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/crytic_compile/platform/hardhat.py", line 183, in compile                                                   
               hardhat_like_parsing(crytic_compile, self._target, build_directory, hardhat_working_dir)                                                                                                            
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/crytic_compile/platform/hardhat.py", line 52, in hardhat_like_parsing                                       
               raise InvalidCompilation(txt)                                                                                                                                                                       
           crytic_compile.platform.exceptions.InvalidCompilation: Compilation failed. Can you run build command?                                                                                                   
           /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/artifacts/build-info is not a directory.                                                       
                                                                                                                                                                                                                   
           During handling of the above exception, another exception occurred:                                                                                                                                     
                                                                                                                                                                                                                   
           Traceback (most recent call last):                                                                                                                                                                      
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 124, in simple_cli                                                                                                         
               falcon_instance = compile_project(source_dir)                                                                                                                                                       
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 103, in compile_project                                                                                                    
               return falcon.Falcon(abs_path)                                                                                                                                                                      
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/falcon/falcon.py", line 94, in __init__                                                                     
               raise FalconError(f"Invalid compilation: \n{str(e)}")                                                                                                                                               
           falcon.exceptions.FalconError: Invalid compilation:                                                                                                                                                     
           Compilation failed. Can you run build command?                                                                                                                                                          
           /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/artifacts/build-info is not a directory.                                                       
                                                                                                                                                                                                                   
           Compile failed.                                                                                                                                                                             tasks.py:127
           Since the compilation is failed, some static analysis tool may not be enabled, which may cause lower precision and recall.                                                                  tasks.py:128
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function _mintFromAssets(IAsset[] memory assets, uint256[] memory maxAmountsIn) internal {                                                                                                                  │
│         uint256 bptBefore = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                       │
│         // Set msgValue when joining via ETH                                                                                                                                                                    │
│         uint256 msgValue = assets[0] == IAsset(address(0)) ? maxAmountsIn[0] : 0;                                                                                                                               │
│                                                                                                                                                                                                                 │
│         BALANCER_VAULT.joinPool{value: msgValue}(                                                                                                                                                               │
│             NOTE_ETH_POOL_ID,                                                                                                                                                                                   │
│             address(this),                                                                                                                                                                                      │
│             address(this), // sNOTE will receive the BPT                                                                                                                                                        │
│             IVault.JoinPoolRequest(                                                                                                                                                                             │
│                 assets,                                                                                                                                                                                         │
│                 maxAmountsIn,                                                                                                                                                                                   │
│                 abi.encode(                                                                                                                                                                                     │
│                     IVault.JoinKind.EXACT_TOKENS_IN_FOR_BPT_OUT,                                                                                                                                                │
│                     maxAmountsIn,                                                                                                                                                                               │
│                     0 // Accept however much BPT the pool will give us                                                                                                                                          │
│                 ),                                                                                                                                                                                              │
│                 false // Don't use internal balances                                                                                                                                                            │
│             )                                                                                                                                                                                                   │
│         );                                                                                                                                                                                                      │
│         uint256 bptAfter = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         // Balancer pool token amounts must increase                                                                                                                                                            │
│         _mint(msg.sender, bptAfter - bptBefore);                                                                                                                                                                │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function mintFromNOTE(uint256 noteAmount) external nonReentrant {                                                                                                                                           │
│         // Transfer the NOTE balance into sNOTE first                                                                                                                                                           │
│         NOTE.safeTransferFrom(msg.sender, address(this), noteAmount);                                                                                                                                           │
│                                                                                                                                                                                                                 │
│         IAsset[] memory assets = new IAsset[](2);                                                                                                                                                               │
│         assets[0] = IAsset(address(0));                                                                                                                                                                         │
│         assets[1] = IAsset(address(NOTE));                                                                                                                                                                      │
│         uint256[] memory maxAmountsIn = new uint256[](2);                                                                                                                                                       │
│         maxAmountsIn[0] = 0;                                                                                                                                                                                    │
│         maxAmountsIn[1] = noteAmount;                                                                                                                                                                           │
│                                                                                                                                                                                                                 │
│         _mintFromAssets(assets, maxAmountsIn);                                                                                                                                                                  │
│     }                                                                                                                                                                                                           │
│     function _mintFromAssets(IAsset[] memory assets, uint256[] memory maxAmountsIn) internal {                                                                                                                  │
│         uint256 bptBefore = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                       │
│         // Set msgValue when joining via ETH                                                                                                                                                                    │
│         uint256 msgValue = assets[0] == IAsset(address(0)) ? maxAmountsIn[0] : 0;                                                                                                                               │
│                                                                                                                                                                                                                 │
│         BALANCER_VAULT.joinPool{value: msgValue}(                                                                                                                                                               │
│             NOTE_ETH_POOL_ID,                                                                                                                                                                                   │
│             address(this),                                                                                                                                                                                      │
│             address(this), // sNOTE will receive the BPT                                                                                                                                                        │
│             IVault.JoinPoolRequest(                                                                                                                                                                             │
│                 assets,                                                                                                                                                                                         │
│                 maxAmountsIn,                                                                                                                                                                                   │
│                 abi.encode(                                                                                                                                                                                     │
│                     IVault.JoinKind.EXACT_TOKENS_IN_FOR_BPT_OUT,                                                                                                                                                │
│                     maxAmountsIn,                                                                                                                                                                               │
│                     0 // Accept however much BPT the pool will give us                                                                                                                                          │
│                 ),                                                                                                                                                                                              │
│                 false // Don't use internal balances                                                                                                                                                            │
│             )                                                                                                                                                                                                   │
│         );                                                                                                                                                                                                      │
│         uint256 bptAfter = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         // Balancer pool token amounts must increase                                                                                                                                                            │
│         _mint(msg.sender, bptAfter - bptBefore);                                                                                                                                                                │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function mintFromWETH(uint256 wethAmount) external nonReentrant {                                                                                                                                           │
│         // Transfer the NOTE balance into sNOTE first                                                                                                                                                           │
│         WETH.safeTransferFrom(msg.sender, address(this), wethAmount);                                                                                                                                           │
│                                                                                                                                                                                                                 │
│         IAsset[] memory assets = new IAsset[](2);                                                                                                                                                               │
│         assets[0] = IAsset(address(WETH));                                                                                                                                                                      │
│         assets[1] = IAsset(address(NOTE));                                                                                                                                                                      │
│         uint256[] memory maxAmountsIn = new uint256[](2);                                                                                                                                                       │
│         maxAmountsIn[0] = wethAmount;                                                                                                                                                                           │
│         maxAmountsIn[1] = 0;                                                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│         _mintFromAssets(assets, maxAmountsIn);                                                                                                                                                                  │
│     }                                                                                                                                                                                                           │
│     function _mintFromAssets(IAsset[] memory assets, uint256[] memory maxAmountsIn) internal {                                                                                                                  │
│         uint256 bptBefore = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                       │
│         // Set msgValue when joining via ETH                                                                                                                                                                    │
│         uint256 msgValue = assets[0] == IAsset(address(0)) ? maxAmountsIn[0] : 0;                                                                                                                               │
│                                                                                                                                                                                                                 │
│         BALANCER_VAULT.joinPool{value: msgValue}(                                                                                                                                                               │
│             NOTE_ETH_POOL_ID,                                                                                                                                                                                   │
│             address(this),                                                                                                                                                                                      │
│             address(this), // sNOTE will receive the BPT                                                                                                                                                        │
│             IVault.JoinPoolRequest(                                                                                                                                                                             │
│                 assets,                                                                                                                                                                                         │
│                 maxAmountsIn,                                                                                                                                                                                   │
│                 abi.encode(                                                                                                                                                                                     │
│                     IVault.JoinKind.EXACT_TOKENS_IN_FOR_BPT_OUT,                                                                                                                                                │
│                     maxAmountsIn,                                                                                                                                                                               │
│                     0 // Accept however much BPT the pool will give us                                                                                                                                          │
│                 ),                                                                                                                                                                                              │
│                 false // Don't use internal balances                                                                                                                                                            │
│             )                                                                                                                                                                                                   │
│         );                                                                                                                                                                                                      │
│         uint256 bptAfter = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         // Balancer pool token amounts must increase                                                                                                                                                            │
│         _mint(msg.sender, bptAfter - bptBefore);                                                                                                                                                                │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function mintFromETH() payable external nonReentrant {                                                                                                                                                      │
│         IAsset[] memory assets = new IAsset[](2);                                                                                                                                                               │
│         assets[0] = IAsset(address(0));                                                                                                                                                                         │
│         assets[1] = IAsset(address(NOTE));                                                                                                                                                                      │
│         uint256[] memory maxAmountsIn = new uint256[](2);                                                                                                                                                       │
│         maxAmountsIn[0] = msg.value;                                                                                                                                                                            │
│         maxAmountsIn[1] = 0;                                                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│         _mintFromAssets(assets, maxAmountsIn);                                                                                                                                                                  │
│     }                                                                                                                                                                                                           │
│     function _mintFromAssets(IAsset[] memory assets, uint256[] memory maxAmountsIn) internal {                                                                                                                  │
│         uint256 bptBefore = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                       │
│         // Set msgValue when joining via ETH                                                                                                                                                                    │
│         uint256 msgValue = assets[0] == IAsset(address(0)) ? maxAmountsIn[0] : 0;                                                                                                                               │
│                                                                                                                                                                                                                 │
│         BALANCER_VAULT.joinPool{value: msgValue}(                                                                                                                                                               │
│             NOTE_ETH_POOL_ID,                                                                                                                                                                                   │
│             address(this),                                                                                                                                                                                      │
│             address(this), // sNOTE will receive the BPT                                                                                                                                                        │
│             IVault.JoinPoolRequest(                                                                                                                                                                             │
│                 assets,                                                                                                                                                                                         │
│                 maxAmountsIn,                                                                                                                                                                                   │
│                 abi.encode(                                                                                                                                                                                     │
│                     IVault.JoinKind.EXACT_TOKENS_IN_FOR_BPT_OUT,                                                                                                                                                │
│                     maxAmountsIn,                                                                                                                                                                               │
│                     0 // Accept however much BPT the pool will give us                                                                                                                                          │
│                 ),                                                                                                                                                                                              │
│                 false // Don't use internal balances                                                                                                                                                            │
│             )                                                                                                                                                                                                   │
│         );                                                                                                                                                                                                      │
│         uint256 bptAfter = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         // Balancer pool token amounts must increase                                                                                                                                                            │
│         _mint(msg.sender, bptAfter - bptBefore);                                                                                                                                                                │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function redeem(uint256 sNOTEAmount) external nonReentrant {                                                                                                                                                │
│         AccountCoolDown memory coolDown = accountCoolDown;                                                                                                                                                      │
│         require(sNOTEAmount <= balanceOf(msg.sender), "Insufficient balance");                                                                                                                                  │
│         require(                                                                                                                                                                                                │
│             coolDown.redeemWindowBegin != 0 &&                                                                                                                                                                  │
│             coolDown.redeemWindowBegin < block.timestamp &&                                                                                                                                                     │
│             block.timestamp < coolDown.redeemWindowEnd,                                                                                                                                                         │
│             "Not in Redemption Window"                                                                                                                                                                          │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         uint256 bptToRedeem = getPoolTokenShare(sNOTEAmount);                                                                                                                                                   │
│         _burn(msg.sender, bptToRedeem);                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│         BALANCER_POOL_TOKEN.safeTransfer(msg.sender, bptToRedeem);                                                                                                                                              │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function redeem(                                                                                                                                                                                            │
│         Token memory assetToken,                                                                                                                                                                                │
│         Token memory underlyingToken,                                                                                                                                                                           │
│         uint256 assetAmountExternal                                                                                                                                                                             │
│     ) internal returns (int256) {                                                                                                                                                                               │
│         uint256 startingBalance;                                                                                                                                                                                │
│         if (assetToken.tokenType == TokenType.cETH) {                                                                                                                                                           │
│             startingBalance = address(this).balance;                                                                                                                                                            │
│         } else if (assetToken.tokenType == TokenType.cToken) {                                                                                                                                                  │
│             startingBalance = IERC20(underlyingToken.tokenAddress).balanceOf(address(this));                                                                                                                    │
│         } else {                                                                                                                                                                                                │
│             revert(); // dev: non redeemable failure                                                                                                                                                            │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 success = CErc20Interface(assetToken.tokenAddress).redeem(assetAmountExternal);                                                                                                                 │
│         require(success == Constants.COMPOUND_RETURN_CODE_NO_ERROR, "Redeem");                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         uint256 endingBalance;                                                                                                                                                                                  │
│         if (assetToken.tokenType == TokenType.cETH) {                                                                                                                                                           │
│             endingBalance = address(this).balance;                                                                                                                                                              │
│         } else {                                                                                                                                                                                                │
│             endingBalance = IERC20(underlyingToken.tokenAddress).balanceOf(address(this));                                                                                                                      │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // Underlying token external precision                                                                                                                                                                  │
│         return SafeInt256.toInt(endingBalance.sub(startingBalance));                                                                                                                                            │
│     }                                                                                                                                                                                                           │
│     function redeem(uint256 sNOTEAmount) external nonReentrant {                                                                                                                                                │
│         AccountCoolDown memory coolDown = accountCoolDown;                                                                                                                                                      │
│         require(sNOTEAmount <= balanceOf(msg.sender), "Insufficient balance");                                                                                                                                  │
│         require(                                                                                                                                                                                                │
│             coolDown.redeemWindowBegin != 0 &&                                                                                                                                                                  │
│             coolDown.redeemWindowBegin < block.timestamp &&                                                                                                                                                     │
│             block.timestamp < coolDown.redeemWindowEnd,                                                                                                                                                         │
│             "Not in Redemption Window"                                                                                                                                                                          │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         uint256 bptToRedeem = getPoolTokenShare(sNOTEAmount);                                                                                                                                                   │
│         _burn(msg.sender, bptToRedeem);                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│         BALANCER_POOL_TOKEN.safeTransfer(msg.sender, bptToRedeem);                                                                                                                                              │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function getVotingPower(uint256 sNOTEAmount) public view returns (uint256) {                                                                                                                                │
│         // Gets the BPT token price (in ETH)                                                                                                                                                                    │
│         uint256 bptPrice = IPriceOracle(address(BALANCER_POOL_TOKEN)).getLatest(IPriceOracle.Variable.BPT_PRICE);                                                                                               │
│         // Gets the NOTE token price (in ETH)                                                                                                                                                                   │
│         uint256 notePrice = IPriceOracle(address(BALANCER_POOL_TOKEN)).getLatest(IPriceOracle.Variable.PAIR_PRICE);                                                                                             │
│                                                                                                                                                                                                                 │
│         // Since both bptPrice and notePrice are denominated in ETH, we can use                                                                                                                                 │
│         // this formula to calculate noteAmount                                                                                                                                                                 │
│         // bptBalance * bptPrice = notePrice * noteAmount                                                                                                                                                       │
│         // noteAmount = bptPrice/notePrice * bptBalance                                                                                                                                                         │
│         uint256 priceRatio = bptPrice * 1e18 / notePrice;                                                                                                                                                       │
│         uint256 bptBalance = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // Amount_note = Price_NOTE_per_BPT * BPT_supply * 80% (80/20 pool)                                                                                                                                     │
│         uint256 noteAmount = priceRatio * bptBalance * 80 / 100;                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         // Reduce precision down to 1e8 (NOTE token)                                                                                                                                                            │
│         // priceRatio and bptBalance are both 1e18 (1e36 total)                                                                                                                                                 │
│         // we divide by 1e28 to get to 1e8                                                                                                                                                                      │
│         noteAmount /= 1e28;                                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│         return (noteAmount * sNOTEAmount) / totalSupply();                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "Yes",                                                                                                                                                                                                 │
│     "2": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│     function getVotingPower(uint256 sNOTEAmount) public view returns (uint256) {                                                                                                                                │
│         // Gets the BPT token price (in ETH)                                                                                                                                                                    │
│         uint256 bptPrice = IPriceOracle(address(BALANCER_POOL_TOKEN)).getLatest(IPriceOracle.Variable.BPT_PRICE);                                                                                               │
│         // Gets the NOTE token price (in ETH)                                                                                                                                                                   │
│         uint256 notePrice = IPriceOracle(address(BALANCER_POOL_TOKEN)).getLatest(IPriceOracle.Variable.PAIR_PRICE);                                                                                             │
│                                                                                                                                                                                                                 │
│         // Since both bptPrice and notePrice are denominated in ETH, we can use                                                                                                                                 │
│         // this formula to calculate noteAmount                                                                                                                                                                 │
│         // bptBalance * bptPrice = notePrice * noteAmount                                                                                                                                                       │
│         // noteAmount = bptPrice/notePrice * bptBalance                                                                                                                                                         │
│         uint256 priceRatio = bptPrice * 1e18 / notePrice;                                                                                                                                                       │
│         uint256 bptBalance = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // Amount_note = Price_NOTE_per_BPT * BPT_supply * 80% (80/20 pool)                                                                                                                                     │
│         uint256 noteAmount = priceRatio * bptBalance * 80 / 100;                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         // Reduce precision down to 1e8 (NOTE token)                                                                                                                                                            │
│         // priceRatio and bptBalance are both 1e18 (1e36 total)                                                                                                                                                 │
│         // we divide by 1e28 to get to 1e8                                                                                                                                                                      │
│         noteAmount /= 1e28;                                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│         return (noteAmount * sNOTEAmount) / totalSupply();                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function _burn(address account, uint256 bptToRedeem) internal override(ERC20Upgradeable, ERC20VotesUpgradeable) {                                                                                           │
│         uint256 poolTokenShare = poolTokenShareOf(account);                                                                                                                                                     │
│         require(bptToRedeem <= poolTokenShare, "Invalid Redeem Amount");                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         // Burns the portion of the sNOTE corresponding to the bptToRedeem                                                                                                                                      │
│         uint256 sNOTEToBurn = balanceOf(account) * bptToRedeem / poolTokenShare;                                                                                                                                │
│         // Handles event emission, balance update and total supply update                                                                                                                                       │
│         super._burn(account, sNOTEToBurn);                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function redeem(uint256 sNOTEAmount) external nonReentrant {                                                                                                                                                │
│         AccountCoolDown memory coolDown = accountCoolDown;                                                                                                                                                      │
│         require(sNOTEAmount <= balanceOf(msg.sender), "Insufficient balance");                                                                                                                                  │
│         require(                                                                                                                                                                                                │
│             coolDown.redeemWindowBegin != 0 &&                                                                                                                                                                  │
│             coolDown.redeemWindowBegin < block.timestamp &&                                                                                                                                                     │
│             block.timestamp < coolDown.redeemWindowEnd,                                                                                                                                                         │
│             "Not in Redemption Window"                                                                                                                                                                          │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         uint256 bptToRedeem = getPoolTokenShare(sNOTEAmount);                                                                                                                                                   │
│         _burn(msg.sender, bptToRedeem);                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│         BALANCER_POOL_TOKEN.safeTransfer(msg.sender, bptToRedeem);                                                                                                                                              │
│     }                                                                                                                                                                                                           │
│     function _burn(address account, uint256 bptToRedeem) internal override(ERC20Upgradeable, ERC20VotesUpgradeable) {                                                                                           │
│         uint256 poolTokenShare = poolTokenShareOf(account);                                                                                                                                                     │
│         require(bptToRedeem <= poolTokenShare, "Invalid Redeem Amount");                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         // Burns the portion of the sNOTE corresponding to the bptToRedeem                                                                                                                                      │
│         uint256 sNOTEToBurn = balanceOf(account) * bptToRedeem / poolTokenShare;                                                                                                                                │
│         // Handles event emission, balance update and total supply update                                                                                                                                       │
│         super._burn(account, sNOTEToBurn);                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: deposit/mint/add the liquidity pool/amount/share and set the total share to the number of first deposit when the supply/liquidity is 0                                                               │
│ Code:                                                                                                                                                                                                           │
│     function redeem(uint256 sNOTEAmount) external nonReentrant {                                                                                                                                                │
│         AccountCoolDown memory coolDown = accountCoolDown;                                                                                                                                                      │
│         require(sNOTEAmount <= balanceOf(msg.sender), "Insufficient balance");                                                                                                                                  │
│         require(                                                                                                                                                                                                │
│             coolDown.redeemWindowBegin != 0 &&                                                                                                                                                                  │
│             coolDown.redeemWindowBegin < block.timestamp &&                                                                                                                                                     │
│             block.timestamp < coolDown.redeemWindowEnd,                                                                                                                                                         │
│             "Not in Redemption Window"                                                                                                                                                                          │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         uint256 bptToRedeem = getPoolTokenShare(sNOTEAmount);                                                                                                                                                   │
│         _burn(msg.sender, bptToRedeem);                                                                                                                                                                         │
│                                                                                                                                                                                                                 │
│         BALANCER_POOL_TOKEN.safeTransfer(msg.sender, bptToRedeem);                                                                                                                                              │
│     }                                                                                                                                                                                                           │
│     function _burn(address account, uint256 bptToRedeem) internal override(ERC20Upgradeable, ERC20VotesUpgradeable) {                                                                                           │
│         uint256 poolTokenShare = poolTokenShareOf(account);                                                                                                                                                     │
│         require(bptToRedeem <= poolTokenShare, "Invalid Redeem Amount");                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         // Burns the portion of the sNOTE corresponding to the bptToRedeem                                                                                                                                      │
│         uint256 sNOTEToBurn = balanceOf(account) * bptToRedeem / poolTokenShare;                                                                                                                                │
│         // Handles event emission, balance update and total supply update                                                                                                                                       │
│         super._burn(account, sNOTEToBurn);                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ No                                                                                                                                                                                                              │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function _mint(address account, uint256 bptAmount) internal override(ERC20Upgradeable, ERC20VotesUpgradeable) {                                                                                             │
│         // Cannot mint if a cooldown is already in effect. If an account mints during a cool down period then they will                                                                                         │
│         // be able to redeem the tokens immediately, bypassing the cool down.                                                                                                                                   │
│         _requireAccountNotInCoolDown(account);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         // Immediately after minting, we need to satisfy the equality:                                                                                                                                          │
│         // (sNOTEToMint * bptBalance) / (totalSupply + sNOTEToMint) == bptAmount                                                                                                                                │
│                                                                                                                                                                                                                 │
│         // Rearranging to get sNOTEToMint on one side:                                                                                                                                                          │
│         // (sNOTEToMint * bptBalance) = (totalSupply + sNOTEToMint) * bptAmount                                                                                                                                 │
│         // (sNOTEToMint * bptBalance) = totalSupply * bptAmount + sNOTEToMint * bptAmount                                                                                                                       │
│         // (sNOTEToMint * bptBalance) - (sNOTEToMint * bptAmount) = totalSupply * bptAmount                                                                                                                     │
│         // sNOTEToMint * (bptBalance - bptAmount) = totalSupply * bptAmount                                                                                                                                     │
│         // sNOTEToMint = (totalSupply * bptAmount) / (bptBalance - bptAmount)                                                                                                                                   │
│                                                                                                                                                                                                                 │
│         // NOTE: at this point the BPT has already been transferred into the sNOTE contract, so this                                                                                                            │
│         // bptBalance amount includes bptAmount.                                                                                                                                                                │
│         uint256 bptBalance = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                      │
│         uint256 _totalSupply = totalSupply();                                                                                                                                                                   │
│         uint256 sNOTEToMint;                                                                                                                                                                                    │
│         if (_totalSupply == 0) {                                                                                                                                                                                │
│             sNOTEToMint = bptAmount;                                                                                                                                                                            │
│         } else {                                                                                                                                                                                                │
│             sNOTEToMint = (_totalSupply * bptAmount) / (bptBalance - bptAmount);                                                                                                                                │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // Handles event emission, balance update and total supply update                                                                                                                                       │
│         super._mint(account, sNOTEToMint);                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: deposit/mint/add the liquidity pool/amount/share and set the total share to the number of first deposit when the supply/liquidity is 0                                                               │
│ Code:                                                                                                                                                                                                           │
│     function _mint(address account, uint256 bptAmount) internal override(ERC20Upgradeable, ERC20VotesUpgradeable) {                                                                                             │
│         // Cannot mint if a cooldown is already in effect. If an account mints during a cool down period then they will                                                                                         │
│         // be able to redeem the tokens immediately, bypassing the cool down.                                                                                                                                   │
│         _requireAccountNotInCoolDown(account);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         // Immediately after minting, we need to satisfy the equality:                                                                                                                                          │
│         // (sNOTEToMint * bptBalance) / (totalSupply + sNOTEToMint) == bptAmount                                                                                                                                │
│                                                                                                                                                                                                                 │
│         // Rearranging to get sNOTEToMint on one side:                                                                                                                                                          │
│         // (sNOTEToMint * bptBalance) = (totalSupply + sNOTEToMint) * bptAmount                                                                                                                                 │
│         // (sNOTEToMint * bptBalance) = totalSupply * bptAmount + sNOTEToMint * bptAmount                                                                                                                       │
│         // (sNOTEToMint * bptBalance) - (sNOTEToMint * bptAmount) = totalSupply * bptAmount                                                                                                                     │
│         // sNOTEToMint * (bptBalance - bptAmount) = totalSupply * bptAmount                                                                                                                                     │
│         // sNOTEToMint = (totalSupply * bptAmount) / (bptBalance - bptAmount)                                                                                                                                   │
│                                                                                                                                                                                                                 │
│         // NOTE: at this point the BPT has already been transferred into the sNOTE contract, so this                                                                                                            │
│         // bptBalance amount includes bptAmount.                                                                                                                                                                │
│         uint256 bptBalance = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                      │
│         uint256 _totalSupply = totalSupply();                                                                                                                                                                   │
│         uint256 sNOTEToMint;                                                                                                                                                                                    │
│         if (_totalSupply == 0) {                                                                                                                                                                                │
│             sNOTEToMint = bptAmount;                                                                                                                                                                            │
│         } else {                                                                                                                                                                                                │
│             sNOTEToMint = (_totalSupply * bptAmount) / (bptBalance - bptAmount);                                                                                                                                │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // Handles event emission, balance update and total supply update                                                                                                                                       │
│         super._mint(account, sNOTEToMint);                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ No                                                                                                                                                                                                              │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function _mintFromAssets(IAsset[] memory assets, uint256[] memory maxAmountsIn) internal {                                                                                                                  │
│         uint256 bptBefore = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                       │
│         // Set msgValue when joining via ETH                                                                                                                                                                    │
│         uint256 msgValue = assets[0] == IAsset(address(0)) ? maxAmountsIn[0] : 0;                                                                                                                               │
│                                                                                                                                                                                                                 │
│         BALANCER_VAULT.joinPool{value: msgValue}(                                                                                                                                                               │
│             NOTE_ETH_POOL_ID,                                                                                                                                                                                   │
│             address(this),                                                                                                                                                                                      │
│             address(this), // sNOTE will receive the BPT                                                                                                                                                        │
│             IVault.JoinPoolRequest(                                                                                                                                                                             │
│                 assets,                                                                                                                                                                                         │
│                 maxAmountsIn,                                                                                                                                                                                   │
│                 abi.encode(                                                                                                                                                                                     │
│                     IVault.JoinKind.EXACT_TOKENS_IN_FOR_BPT_OUT,                                                                                                                                                │
│                     maxAmountsIn,                                                                                                                                                                               │
│                     0 // Accept however much BPT the pool will give us                                                                                                                                          │
│                 ),                                                                                                                                                                                              │
│                 false // Don't use internal balances                                                                                                                                                            │
│             )                                                                                                                                                                                                   │
│         );                                                                                                                                                                                                      │
│         uint256 bptAfter = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         // Balancer pool token amounts must increase                                                                                                                                                            │
│         _mint(msg.sender, bptAfter - bptBefore);                                                                                                                                                                │
│     }                                                                                                                                                                                                           │
│     function _mint(address account, uint256 bptAmount) internal override(ERC20Upgradeable, ERC20VotesUpgradeable) {                                                                                             │
│         // Cannot mint if a cooldown is already in effect. If an account mints during a cool down period then they will                                                                                         │
│         // be able to redeem the tokens immediately, bypassing the cool down.                                                                                                                                   │
│         _requireAccountNotInCoolDown(account);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         // Immediately after minting, we need to satisfy the equality:                                                                                                                                          │
│         // (sNOTEToMint * bptBalance) / (totalSupply + sNOTEToMint) == bptAmount                                                                                                                                │
│                                                                                                                                                                                                                 │
│         // Rearranging to get sNOTEToMint on one side:                                                                                                                                                          │
│         // (sNOTEToMint * bptBalance) = (totalSupply + sNOTEToMint) * bptAmount                                                                                                                                 │
│         // (sNOTEToMint * bptBalance) = totalSupply * bptAmount + sNOTEToMint * bptAmount                                                                                                                       │
│         // (sNOTEToMint * bptBalance) - (sNOTEToMint * bptAmount) = totalSupply * bptAmount                                                                                                                     │
│         // sNOTEToMint * (bptBalance - bptAmount) = totalSupply * bptAmount                                                                                                                                     │
│         // sNOTEToMint = (totalSupply * bptAmount) / (bptBalance - bptAmount)                                                                                                                                   │
│                                                                                                                                                                                                                 │
│         // NOTE: at this point the BPT has already been transferred into the sNOTE contract, so this                                                                                                            │
│         // bptBalance amount includes bptAmount.                                                                                                                                                                │
│         uint256 bptBalance = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                      │
│         uint256 _totalSupply = totalSupply();                                                                                                                                                                   │
│         uint256 sNOTEToMint;                                                                                                                                                                                    │
│         if (_totalSupply == 0) {                                                                                                                                                                                │
│             sNOTEToMint = bptAmount;                                                                                                                                                                            │
│         } else {                                                                                                                                                                                                │
│             sNOTEToMint = (_totalSupply * bptAmount) / (bptBalance - bptAmount);                                                                                                                                │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // Handles event emission, balance update and total supply update                                                                                                                                       │
│         super._mint(account, sNOTEToMint);                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: deposit/mint/add the liquidity pool/amount/share and set the total share to the number of first deposit when the supply/liquidity is 0                                                               │
│ Code:                                                                                                                                                                                                           │
│     function _mintFromAssets(IAsset[] memory assets, uint256[] memory maxAmountsIn) internal {                                                                                                                  │
│         uint256 bptBefore = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                       │
│         // Set msgValue when joining via ETH                                                                                                                                                                    │
│         uint256 msgValue = assets[0] == IAsset(address(0)) ? maxAmountsIn[0] : 0;                                                                                                                               │
│                                                                                                                                                                                                                 │
│         BALANCER_VAULT.joinPool{value: msgValue}(                                                                                                                                                               │
│             NOTE_ETH_POOL_ID,                                                                                                                                                                                   │
│             address(this),                                                                                                                                                                                      │
│             address(this), // sNOTE will receive the BPT                                                                                                                                                        │
│             IVault.JoinPoolRequest(                                                                                                                                                                             │
│                 assets,                                                                                                                                                                                         │
│                 maxAmountsIn,                                                                                                                                                                                   │
│                 abi.encode(                                                                                                                                                                                     │
│                     IVault.JoinKind.EXACT_TOKENS_IN_FOR_BPT_OUT,                                                                                                                                                │
│                     maxAmountsIn,                                                                                                                                                                               │
│                     0 // Accept however much BPT the pool will give us                                                                                                                                          │
│                 ),                                                                                                                                                                                              │
│                 false // Don't use internal balances                                                                                                                                                            │
│             )                                                                                                                                                                                                   │
│         );                                                                                                                                                                                                      │
│         uint256 bptAfter = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         // Balancer pool token amounts must increase                                                                                                                                                            │
│         _mint(msg.sender, bptAfter - bptBefore);                                                                                                                                                                │
│     }                                                                                                                                                                                                           │
│     function _mint(address account, uint256 bptAmount) internal override(ERC20Upgradeable, ERC20VotesUpgradeable) {                                                                                             │
│         // Cannot mint if a cooldown is already in effect. If an account mints during a cool down period then they will                                                                                         │
│         // be able to redeem the tokens immediately, bypassing the cool down.                                                                                                                                   │
│         _requireAccountNotInCoolDown(account);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         // Immediately after minting, we need to satisfy the equality:                                                                                                                                          │
│         // (sNOTEToMint * bptBalance) / (totalSupply + sNOTEToMint) == bptAmount                                                                                                                                │
│                                                                                                                                                                                                                 │
│         // Rearranging to get sNOTEToMint on one side:                                                                                                                                                          │
│         // (sNOTEToMint * bptBalance) = (totalSupply + sNOTEToMint) * bptAmount                                                                                                                                 │
│         // (sNOTEToMint * bptBalance) = totalSupply * bptAmount + sNOTEToMint * bptAmount                                                                                                                       │
│         // (sNOTEToMint * bptBalance) - (sNOTEToMint * bptAmount) = totalSupply * bptAmount                                                                                                                     │
│         // sNOTEToMint * (bptBalance - bptAmount) = totalSupply * bptAmount                                                                                                                                     │
│         // sNOTEToMint = (totalSupply * bptAmount) / (bptBalance - bptAmount)                                                                                                                                   │
│                                                                                                                                                                                                                 │
│         // NOTE: at this point the BPT has already been transferred into the sNOTE contract, so this                                                                                                            │
│         // bptBalance amount includes bptAmount.                                                                                                                                                                │
│         uint256 bptBalance = BALANCER_POOL_TOKEN.balanceOf(address(this));                                                                                                                                      │
│         uint256 _totalSupply = totalSupply();                                                                                                                                                                   │
│         uint256 sNOTEToMint;                                                                                                                                                                                    │
│         if (_totalSupply == 0) {                                                                                                                                                                                │
│             sNOTEToMint = bptAmount;                                                                                                                                                                            │
│         } else {                                                                                                                                                                                                │
│             sNOTEToMint = (_totalSupply * bptAmount) / (bptBalance - bptAmount);                                                                                                                                │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // Handles event emission, balance update and total supply update                                                                                                                                       │
│         super._mint(account, sNOTEToMint);                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function claimCOMPAndTransfer(address[] calldata cTokens)                                                                                                                                                   │
│         external                                                                                                                                                                                                │
│         override                                                                                                                                                                                                │
│         onlyManagerContract                                                                                                                                                                                     │
│         nonReentrant                                                                                                                                                                                            │
│         returns (uint256)                                                                                                                                                                                       │
│     {                                                                                                                                                                                                           │
│         // Take a snasphot of the COMP balance before we claim COMP so that we don't inadvertently transfer                                                                                                     │
│         // something we shouldn't.                                                                                                                                                                              │
│         uint256 balanceBefore = COMP.balanceOf(address(this));                                                                                                                                                  │
│         COMPTROLLER.claimComp(address(this), cTokens);                                                                                                                                                          │
│         // NOTE: If Notional ever lists COMP as a collateral asset it will be cCOMP instead and it                                                                                                              │
│         // will never hold COMP balances directly. In this case we can always transfer all the COMP                                                                                                             │
│         // off of the contract.                                                                                                                                                                                 │
│         uint256 balanceAfter = COMP.balanceOf(address(this));                                                                                                                                                   │
│         uint256 amountClaimed = balanceAfter.sub(balanceBefore);                                                                                                                                                │
│         // NOTE: the onlyManagerContract modifier prevents a transfer to address(0) here                                                                                                                        │
│         COMP.safeTransfer(treasuryManagerContract, amountClaimed);                                                                                                                                              │
│         // NOTE: TreasuryManager contract will emit a COMPHarvested event                                                                                                                                       │
│         return amountClaimed;                                                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: involve transfering token from an address different from message sender                                                                                                                              │
│ Code:                                                                                                                                                                                                           │
│     function transferReserveToTreasury(uint16[] calldata currencies)                                                                                                                                            │
│         external                                                                                                                                                                                                │
│         override                                                                                                                                                                                                │
│         onlyManagerContract                                                                                                                                                                                     │
│         nonReentrant                                                                                                                                                                                            │
│         returns (uint256[] memory)                                                                                                                                                                              │
│     {                                                                                                                                                                                                           │
│         uint256[] memory amountsTransferred = new uint256[](currencies.length);                                                                                                                                 │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < currencies.length; i++) {                                                                                                                                                           │
│             // Prevents duplicate currency IDs                                                                                                                                                                  │
│             if (i > 0) require(currencies > currencies, "IDs must be sorted");                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uint16 currencyId = currencies;                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│             _checkValidCurrency(currencyId);                                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│             // Reserve buffer amount in INTERNAL_TOKEN_PRECISION                                                                                                                                                │
│             int256 bufferInternal = SafeInt256.toInt(reserveBuffer);                                                                                                                                            │
│                                                                                                                                                                                                                 │
│             // Reserve requirement not defined                                                                                                                                                                  │
│             if (bufferInternal == 0) continue;                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             // prettier-ignore                                                                                                                                                                                  │
│             (int256 reserveInternal, /* */, /* */, /* */) = BalanceHandler.getBalanceStorage(Constants.RESERVE, currencyId);                                                                                    │
│                                                                                                                                                                                                                 │
│             // Do not withdraw anything if reserve is below or equal to reserve requirement                                                                                                                     │
│             if (reserveInternal <= bufferInternal) continue;                                                                                                                                                    │
│                                                                                                                                                                                                                 │
│             Token memory asset = TokenHandler.getAssetToken(currencyId);                                                                                                                                        │
│                                                                                                                                                                                                                 │
│             // Actual reserve amount allowed to be redeemed and transferred                                                                                                                                     │
│             int256 assetInternalRedeemAmount = reserveInternal.subNoNeg(bufferInternal);                                                                                                                        │
│                                                                                                                                                                                                                 │
│             // Redeems cTokens and transfer underlying to treasury manager contract                                                                                                                             │
│             amountsTransferred = _redeemAndTransfer(                                                                                                                                                            │
│                 currencyId,                                                                                                                                                                                     │
│                 asset,                                                                                                                                                                                          │
│                 assetInternalRedeemAmount                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             // Updates the reserve balance                                                                                                                                                                      │
│             BalanceHandler.harvestExcessReserveBalance(                                                                                                                                                         │
│                 currencyId,                                                                                                                                                                                     │
│                 reserveInternal,                                                                                                                                                                                │
│                 assetInternalRedeemAmount                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // NOTE: TreasuryManager contract will emit an AssetsHarvested event                                                                                                                                    │
│         return amountsTransferred;                                                                                                                                                                              │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function redeem(                                                                                                                                                                                            │
│         Token memory assetToken,                                                                                                                                                                                │
│         Token memory underlyingToken,                                                                                                                                                                           │
│         uint256 assetAmountExternal                                                                                                                                                                             │
│     ) internal returns (int256) {                                                                                                                                                                               │
│         uint256 startingBalance;                                                                                                                                                                                │
│         if (assetToken.tokenType == TokenType.cETH) {                                                                                                                                                           │
│             startingBalance = address(this).balance;                                                                                                                                                            │
│         } else if (assetToken.tokenType == TokenType.cToken) {                                                                                                                                                  │
│             startingBalance = IERC20(underlyingToken.tokenAddress).balanceOf(address(this));                                                                                                                    │
│         } else {                                                                                                                                                                                                │
│             revert(); // dev: non redeemable failure                                                                                                                                                            │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 success = CErc20Interface(assetToken.tokenAddress).redeem(assetAmountExternal);                                                                                                                 │
│         require(success == Constants.COMPOUND_RETURN_CODE_NO_ERROR, "Redeem");                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         uint256 endingBalance;                                                                                                                                                                                  │
│         if (assetToken.tokenType == TokenType.cETH) {                                                                                                                                                           │
│             endingBalance = address(this).balance;                                                                                                                                                              │
│         } else {                                                                                                                                                                                                │
│             endingBalance = IERC20(underlyingToken.tokenAddress).balanceOf(address(this));                                                                                                                      │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // Underlying token external precision                                                                                                                                                                  │
│         return SafeInt256.toInt(endingBalance.sub(startingBalance));                                                                                                                                            │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function redeem(                                                                                                                                                                                            │
│         Token memory assetToken,                                                                                                                                                                                │
│         Token memory underlyingToken,                                                                                                                                                                           │
│         uint256 assetAmountExternal                                                                                                                                                                             │
│     ) internal returns (int256) {                                                                                                                                                                               │
│         uint256 startingBalance;                                                                                                                                                                                │
│         if (assetToken.tokenType == TokenType.cETH) {                                                                                                                                                           │
│             startingBalance = address(this).balance;                                                                                                                                                            │
│         } else if (assetToken.tokenType == TokenType.cToken) {                                                                                                                                                  │
│             startingBalance = IERC20(underlyingToken.tokenAddress).balanceOf(address(this));                                                                                                                    │
│         } else {                                                                                                                                                                                                │
│             revert(); // dev: non redeemable failure                                                                                                                                                            │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 success = CErc20Interface(assetToken.tokenAddress).redeem(assetAmountExternal);                                                                                                                 │
│         require(success == Constants.COMPOUND_RETURN_CODE_NO_ERROR, "Redeem");                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         uint256 endingBalance;                                                                                                                                                                                  │
│         if (assetToken.tokenType == TokenType.cETH) {                                                                                                                                                           │
│             endingBalance = address(this).balance;                                                                                                                                                              │
│         } else {                                                                                                                                                                                                │
│             endingBalance = IERC20(underlyingToken.tokenAddress).balanceOf(address(this));                                                                                                                      │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // Underlying token external precision                                                                                                                                                                  │
│         return SafeInt256.toInt(endingBalance.sub(startingBalance));                                                                                                                                            │
│     }                                                                                                                                                                                                           │
│     function redeem(                                                                                                                                                                                            │
│         Token memory assetToken,                                                                                                                                                                                │
│         Token memory underlyingToken,                                                                                                                                                                           │
│         uint256 assetAmountExternal                                                                                                                                                                             │
│     ) internal returns (int256) {                                                                                                                                                                               │
│         uint256 startingBalance;                                                                                                                                                                                │
│         if (assetToken.tokenType == TokenType.cETH) {                                                                                                                                                           │
│             startingBalance = address(this).balance;                                                                                                                                                            │
│         } else if (assetToken.tokenType == TokenType.cToken) {                                                                                                                                                  │
│             startingBalance = IERC20(underlyingToken.tokenAddress).balanceOf(address(this));                                                                                                                    │
│         } else {                                                                                                                                                                                                │
│             revert(); // dev: non redeemable failure                                                                                                                                                            │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 success = CErc20Interface(assetToken.tokenAddress).redeem(assetAmountExternal);                                                                                                                 │
│         require(success == Constants.COMPOUND_RETURN_CODE_NO_ERROR, "Redeem");                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         uint256 endingBalance;                                                                                                                                                                                  │
│         if (assetToken.tokenType == TokenType.cETH) {                                                                                                                                                           │
│             endingBalance = address(this).balance;                                                                                                                                                              │
│         } else {                                                                                                                                                                                                │
│             endingBalance = IERC20(underlyingToken.tokenAddress).balanceOf(address(this));                                                                                                                      │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // Underlying token external precision                                                                                                                                                                  │
│         return SafeInt256.toInt(endingBalance.sub(startingBalance));                                                                                                                                            │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "VariableA": {                                                                                                                                                                                              │
│         "bptPrice": "Holds the BPT token price (in ETH)",                                                                                                                                                       │
│         "notePrice": "Holds the NOTE token price (in ETH)",                                                                                                                                                     │
│         "priceRatio": "Holds the calculated price ratio between BPT and NOTE tokens",                                                                                                                           │
│         "bptBalance": "Holds the balance of BPT tokens in the Balancer pool"                                                                                                                                    │
│     },                                                                                                                                                                                                          │
│     "VariableB": {                                                                                                                                                                                              │
│         "noteAmount": "Holds the calculated amount of NOTE tokens based on the formula provided"                                                                                                                │
│     }                                                                                                                                                                                                           │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:38:24] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/contracts/sNOTE.sol, current function:      tasks.py:260
                             getVotingPower, current vul: price-manipulation                                                                                                                                       
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "VariableA": {                                                                                                                                                                                              │
│         "sNOTEToMint": "Holds the value of total minted share or amount"                                                                                                                                        │
│     },                                                                                                                                                                                                          │
│     "VariableB": {                                                                                                                                                                                              │
│         "_totalSupply": "Holds the total supply/liquidity AND is used by the conditional branch to determine the supply/liquidity is 0"                                                                         │
│     },                                                                                                                                                                                                          │
│     "VariableC": {                                                                                                                                                                                              │
│         "bptAmount": "Holds the value of the deposit/mint/add amount"                                                                                                                                           │
│     }                                                                                                                                                                                                           │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:38:25] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/contracts/sNOTE.sol, current function:      tasks.py:260
                             _mint, current vul: first-deposit                                                                                                                                                     
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "VariableA": {                                                                                                                                                                                              │
│         "bptAfter": "Holds the value of total minted share or amount"                                                                                                                                           │
│     },                                                                                                                                                                                                          │
│     "VariableB": {                                                                                                                                                                                              │
│         "BALANCER_POOL_TOKEN": "Holds the total supply/liquidity AND is used by the conditional branch to determine the supply/liquidity is 0"                                                                  │
│     },                                                                                                                                                                                                          │
│     "VariableC": {                                                                                                                                                                                              │
│         "msgValue": "Holds the value of the deposit/mint/add amount"                                                                                                                                            │
│     }                                                                                                                                                                                                           │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:38:26] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:357
                    ERROR    tasks: Current File: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2022-01-notional-main/contracts/sNOTE.sol, current function:      tasks.py:359
                             _mint, current vul: first-deposit                                                                                                                                                     
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:361
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 355, in simple_cli                                                                                       
                                 falcon_instance, function2_text)                                                                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
                      Scan Results                       
┏━━━━━━┳━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┓
┃ Type ┃ Description ┃ Affected Files ┃ Analysis Report ┃
┡━━━━━━╇━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━┩
└──────┴─────────────┴────────────────┴─────────────────┘
                   Summary                   
┏━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━┓
┃ Key                  ┃ Value              ┃
┡━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━┩
│ Files                │ 32                 │
│ Contracts            │ 33                 │
│ Functions            │ 40                 │
│ Lines of Code        │ 2104               │
│ Used Time            │ 15.996421813964844 │
│ Estimated Cost (USD) │ 0.01657            │
└──────────────────────┴────────────────────┘
