

  .oooooo.    ooooooooo.   ooooooooooooo  .oooooo..o                                 
 d8P'  `Y8b   `888   `Y88. 8'   888   `8 d8P'    `Y8                                 
888            888   .d88'      888      Y88bo.       .ooooo.   .oooo.   ooo. .oo.   
888            888ooo88P'       888       `"Y8888o.  d88' `"Y8 `P  )88b  `888P"Y88b  
888     ooooo  888              888           `"Y88b 888        .oP"888   888   888  
`88.    .88'   888              888      oo     .d8P 888   .o8 d8(  888   888   888  
 `Y8bood8P'   o888o            o888o     8""88888P'  `Y8bod8P' `Y888""8o o888o o888o                                                        


                                                                   

[19:23:09] Loaded 10 rules                                                                                                                                                                             tasks.py:119
[12/08/24 19:23:09] INFO     CryticCompile: 'npx hardhat clean' running (wd: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-12-amun-main)                 subprocess.py:41
[12/08/24 19:23:10] ERROR    CryticCompile: 'npx' returned non-zero exit code 1                                                                                                                    subprocess.py:60
                    ERROR    CryticCompile: Error HH8: There's one or more errors in your config file:                                                                                             subprocess.py:68
                             stderr:                                                                                                                                                                               
                             stderr:   * Invalid account: #0 for network: goerli - private key too short, expected 32 bytes                                                                                        
                             stderr:   * Invalid account: #0 for network: matic - private key too short, expected 32 bytes                                                                                         
                             stderr:   * Invalid account: #0 for network: mumbai - private key too short, expected 32 bytes                                                                                        
                             stderr:                                                                                                                                                                               
                             stderr: To learn more about Hardhat's configuration, please go to https://hardhat.org/config/                                                                                         
                             stderr: For more info go to https://hardhat.org/HH8 or run Hardhat with --show-stack-traces                                                                                           
                    INFO     CryticCompile: 'npx hardhat clean --global' running (wd: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-12-amun-main)        subprocess.py:41
[12/08/24 19:23:11] ERROR    CryticCompile: 'npx' returned non-zero exit code 1                                                                                                                    subprocess.py:60
                    ERROR    CryticCompile: Error HH8: There's one or more errors in your config file:                                                                                             subprocess.py:68
                             stderr:                                                                                                                                                                               
                             stderr:   * Invalid account: #0 for network: goerli - private key too short, expected 32 bytes                                                                                        
                             stderr:   * Invalid account: #0 for network: matic - private key too short, expected 32 bytes                                                                                         
                             stderr:   * Invalid account: #0 for network: mumbai - private key too short, expected 32 bytes                                                                                        
                             stderr:                                                                                                                                                                               
                             stderr: To learn more about Hardhat's configuration, please go to https://hardhat.org/config/                                                                                         
                             stderr: For more info go to https://hardhat.org/HH8 or run Hardhat with --show-stack-traces                                                                                           
[12/08/24 19:23:12] INFO     CryticCompile: Problem executing hardhat: Error HH8: There's one or more errors in your config file:                                                                    hardhat.py:327
                                                                                                                                                                                                                   
                               * Invalid account: #0 for network: goerli - private key too short, expected 32 bytes                                                                                                
                               * Invalid account: #0 for network: matic - private key too short, expected 32 bytes                                                                                                 
                               * Invalid account: #0 for network: mumbai - private key too short, expected 32 bytes                                                                                                
                                                                                                                                                                                                                   
                             To learn more about Hardhat's configuration, please go to https://hardhat.org/config/                                                                                                 
                             For more info go to https://hardhat.org/HH8 or run Hardhat with --show-stack-traces                                                                                                   
                                                                                                                                                                                                                   
                    INFO     CryticCompile: 'npx hardhat compile --force' running (wd: /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-12-amun-main)       subprocess.py:41
[12/08/24 19:23:13] ERROR    CryticCompile: 'npx' returned non-zero exit code 1                                                                                                                    subprocess.py:60
                    ERROR    CryticCompile: Error HH8: There's one or more errors in your config file:                                                                                             subprocess.py:68
                             stderr:                                                                                                                                                                               
                             stderr:   * Invalid account: #0 for network: goerli - private key too short, expected 32 bytes                                                                                        
                             stderr:   * Invalid account: #0 for network: matic - private key too short, expected 32 bytes                                                                                         
                             stderr:   * Invalid account: #0 for network: mumbai - private key too short, expected 32 bytes                                                                                        
                             stderr:                                                                                                                                                                               
                             stderr: To learn more about Hardhat's configuration, please go to https://hardhat.org/config/                                                                                         
                             stderr: For more info go to https://hardhat.org/HH8 or run Hardhat with --show-stack-traces                                                                                           
[19:23:13] Traceback (most recent call last):                                                                                                                                                          tasks.py:126
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/falcon/falcon.py", line 90, in __init__                                                                     
               crytic_compile = CryticCompile(target, **kwargs)                                                                                                                                                    
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/crytic_compile/crytic_compile.py", line 131, in __init__                                                    
               self._compile(**kwargs)                                                                                                                                                                             
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/crytic_compile/crytic_compile.py", line 553, in _compile                                                    
               self._platform.compile(self, **kwargs)                                                                                                                                                              
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/crytic_compile/platform/hardhat.py", line 183, in compile                                                   
               hardhat_like_parsing(crytic_compile, self._target, build_directory, hardhat_working_dir)                                                                                                            
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/crytic_compile/platform/hardhat.py", line 52, in hardhat_like_parsing                                       
               raise InvalidCompilation(txt)                                                                                                                                                                       
           crytic_compile.platform.exceptions.InvalidCompilation: Compilation failed. Can you run build command?                                                                                                   
           /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-12-amun-main/artifacts/build-info is not a directory.                                                           
                                                                                                                                                                                                                   
           During handling of the above exception, another exception occurred:                                                                                                                                     
                                                                                                                                                                                                                   
           Traceback (most recent call last):                                                                                                                                                                      
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 124, in simple_cli                                                                                                         
               falcon_instance = compile_project(source_dir)                                                                                                                                                       
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 103, in compile_project                                                                                                    
               return falcon.Falcon(abs_path)                                                                                                                                                                      
             File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/.venv/lib/python3.10/site-packages/falcon/falcon.py", line 94, in __init__                                                                     
               raise FalconError(f"Invalid compilation: \n{str(e)}")                                                                                                                                               
           falcon.exceptions.FalconError: Invalid compilation:                                                                                                                                                     
           Compilation failed. Can you run build command?                                                                                                                                                          
           /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-12-amun-main/artifacts/build-info is not a directory.                                                           
                                                                                                                                                                                                                   
           Compile failed.                                                                                                                                                                             tasks.py:127
           Since the compilation is failed, some static analysis tool may not be enabled, which may cause lower precision and recall.                                                                  tasks.py:128
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function joinTokenEth(JoinTokenStruct calldata _joinTokenStruct)                                                                                                                                            │
│         external                                                                                                                                                                                                │
│         payable                                                                                                                                                                                                 │
│     {                                                                                                                                                                                                           │
│         require(                                                                                                                                                                                                │
│             _joinTokenStruct.inputToken == address(INTERMEDIATE_TOKEN),                                                                                                                                         │
│             "Wrong input token"                                                                                                                                                                                 │
│         );                                                                                                                                                                                                      │
│         require(msg.value > 0, "No native token passed");                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // ######## Wrap TOKEN #########                                                                                                                                                                        │
│         address(INTERMEDIATE_TOKEN).call{value: msg.value}("");                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│         _joinTokenSingle(_joinTokenStruct);                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│         uint256 remainingIntermediateBalance = INTERMEDIATE_TOKEN.balanceOf(                                                                                                                                    │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         if (remainingIntermediateBalance > 0) {                                                                                                                                                                 │
│             IWrappedNativeToken(address(INTERMEDIATE_TOKEN)).withdraw(                                                                                                                                          │
│                 remainingIntermediateBalance                                                                                                                                                                    │
│             );                                                                                                                                                                                                  │
│             msg.sender.transfer(remainingIntermediateBalance);                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function joinTokenEth(JoinTokenStructV2 calldata _joinTokenStruct)                                                                                                                                          │
│         external                                                                                                                                                                                                │
│         payable                                                                                                                                                                                                 │
│     {                                                                                                                                                                                                           │
│         require(                                                                                                                                                                                                │
│             _joinTokenStruct.inputToken == address(INTERMEDIATE_TOKEN),                                                                                                                                         │
│             "Wrong input token"                                                                                                                                                                                 │
│         );                                                                                                                                                                                                      │
│         require(msg.value > 0, "No native token passed");                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // ######## Wrap TOKEN #########                                                                                                                                                                        │
│         address(INTERMEDIATE_TOKEN).call{value: msg.value}("");                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│         _joinTokenSingle(_joinTokenStruct);                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│         uint256 remainingIntermediateBalance = INTERMEDIATE_TOKEN.balanceOf(                                                                                                                                    │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         if (remainingIntermediateBalance > 0) {                                                                                                                                                                 │
│             IWrappedNativeToken(address(INTERMEDIATE_TOKEN)).withdraw(                                                                                                                                          │
│                 remainingIntermediateBalance                                                                                                                                                                    │
│             );                                                                                                                                                                                                  │
│             msg.sender.transfer(remainingIntermediateBalance);                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ have inside code statements that update/accrue interest/exchange rate,                                                                                                                                          │
│ Code:                                                                                                                                                                                                           │
│     function _exit(ExitTokenStructV2 calldata _exitTokenStruct) internal {                                                                                                                                      │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputBasket = IERC20(_exitTokenStruct.inputBasket);                                                                                                                                              │
│                                                                                                                                                                                                                 │
│         inputBasket.safeTransferFrom(                                                                                                                                                                           │
│             msg.sender,                                                                                                                                                                                         │
│             address(this),                                                                                                                                                                                      │
│             _exitTokenStruct.inputAmount                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         IBasketFacet(address(inputBasket)).exitPool(                                                                                                                                                            │
│             _exitTokenStruct.inputAmount,                                                                                                                                                                       │
│             _exitTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < _exitTokenStruct.trades.length; i++) {                                                                                                                                              │
│             ExitUnderlyingTrade calldata trade = _exitTokenStruct.trades;                                                                                                                                       │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 ExitUniswapV2SwapStruct calldata swap = trade.swaps;                                                                                                                                            │
│                 _maxApprove(IERC20(swap.path[0]), address(swap.exchange));                                                                                                                                      │
│                 IPangolinRouter(swap.exchange).swapExactTokensForTokens(                                                                                                                                        │
│                     IERC20(swap.path[0]).balanceOf(address(this)),                                                                                                                                              │
│                     0,                                                                                                                                                                                          │
│                     swap.path,                                                                                                                                                                                  │
│                     address(this),                                                                                                                                                                              │
│                     block.timestamp                                                                                                                                                                             │
│                 );                                                                                                                                                                                              │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function exit(ExitTokenStructV2 calldata _exitTokenStruct) external {                                                                                                                                       │
│         _exit(_exitTokenStruct);                                                                                                                                                                                │
│         address[] calldata path = _exitTokenStruct                                                                                                                                                              │
│             .trades[0]                                                                                                                                                                                          │
│             .swaps[_exitTokenStruct.trades[0].swaps.length - 1]                                                                                                                                                 │
│             .path;                                                                                                                                                                                              │
│         IERC20 outputToken = IERC20(path); //this could be not the target token                                                                                                                                 │
│                                                                                                                                                                                                                 │
│         uint256 outputTokenBalance = outputToken.balanceOf(address(this));                                                                                                                                      │
│         require(                                                                                                                                                                                                │
│             outputTokenBalance >= _exitTokenStruct.minAmount,                                                                                                                                                   │
│             "Insufficient output"                                                                                                                                                                               │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         outputToken.transfer(msg.sender, outputTokenBalance);                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
│     function _exit(ExitTokenStructV2 calldata _exitTokenStruct) internal {                                                                                                                                      │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputBasket = IERC20(_exitTokenStruct.inputBasket);                                                                                                                                              │
│                                                                                                                                                                                                                 │
│         inputBasket.safeTransferFrom(                                                                                                                                                                           │
│             msg.sender,                                                                                                                                                                                         │
│             address(this),                                                                                                                                                                                      │
│             _exitTokenStruct.inputAmount                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         IBasketFacet(address(inputBasket)).exitPool(                                                                                                                                                            │
│             _exitTokenStruct.inputAmount,                                                                                                                                                                       │
│             _exitTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < _exitTokenStruct.trades.length; i++) {                                                                                                                                              │
│             ExitUnderlyingTrade calldata trade = _exitTokenStruct.trades;                                                                                                                                       │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 ExitUniswapV2SwapStruct calldata swap = trade.swaps;                                                                                                                                            │
│                 _maxApprove(IERC20(swap.path[0]), address(swap.exchange));                                                                                                                                      │
│                 IPangolinRouter(swap.exchange).swapExactTokensForTokens(                                                                                                                                        │
│                     IERC20(swap.path[0]).balanceOf(address(this)),                                                                                                                                              │
│                     0,                                                                                                                                                                                          │
│                     swap.path,                                                                                                                                                                                  │
│                     address(this),                                                                                                                                                                              │
│                     block.timestamp                                                                                                                                                                             │
│                 );                                                                                                                                                                                              │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function exitEth(ExitTokenStructV2 calldata _exitTokenStruct) external {                                                                                                                                    │
│         _exit(_exitTokenStruct);                                                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         uint256 intermediateTokenBalance = INTERMEDIATE_TOKEN.balanceOf(                                                                                                                                        │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         require(                                                                                                                                                                                                │
│             intermediateTokenBalance >= _exitTokenStruct.minAmount,                                                                                                                                             │
│             "Insufficient output"                                                                                                                                                                               │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         IWrappedNativeToken(address(INTERMEDIATE_TOKEN)).withdraw(                                                                                                                                              │
│             intermediateTokenBalance                                                                                                                                                                            │
│         );                                                                                                                                                                                                      │
│         msg.sender.transfer(intermediateTokenBalance);                                                                                                                                                          │
│     }                                                                                                                                                                                                           │
│     function _exit(ExitTokenStructV2 calldata _exitTokenStruct) internal {                                                                                                                                      │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputBasket = IERC20(_exitTokenStruct.inputBasket);                                                                                                                                              │
│                                                                                                                                                                                                                 │
│         inputBasket.safeTransferFrom(                                                                                                                                                                           │
│             msg.sender,                                                                                                                                                                                         │
│             address(this),                                                                                                                                                                                      │
│             _exitTokenStruct.inputAmount                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         IBasketFacet(address(inputBasket)).exitPool(                                                                                                                                                            │
│             _exitTokenStruct.inputAmount,                                                                                                                                                                       │
│             _exitTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < _exitTokenStruct.trades.length; i++) {                                                                                                                                              │
│             ExitUnderlyingTrade calldata trade = _exitTokenStruct.trades;                                                                                                                                       │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 ExitUniswapV2SwapStruct calldata swap = trade.swaps;                                                                                                                                            │
│                 _maxApprove(IERC20(swap.path[0]), address(swap.exchange));                                                                                                                                      │
│                 IPangolinRouter(swap.exchange).swapExactTokensForTokens(                                                                                                                                        │
│                     IERC20(swap.path[0]).balanceOf(address(this)),                                                                                                                                              │
│                     0,                                                                                                                                                                                          │
│                     swap.path,                                                                                                                                                                                  │
│                     address(this),                                                                                                                                                                              │
│                     block.timestamp                                                                                                                                                                             │
│                 );                                                                                                                                                                                              │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function exit(ExitTokenStructV2 calldata _exitTokenStruct) external {                                                                                                                                       │
│         _exit(_exitTokenStruct);                                                                                                                                                                                │
│         address[] calldata path = _exitTokenStruct                                                                                                                                                              │
│             .trades[0]                                                                                                                                                                                          │
│             .swaps[_exitTokenStruct.trades[0].swaps.length - 1]                                                                                                                                                 │
│             .path;                                                                                                                                                                                              │
│         IERC20 outputToken = IERC20(path); //this could be not the target token                                                                                                                                 │
│                                                                                                                                                                                                                 │
│         uint256 outputTokenBalance = outputToken.balanceOf(address(this));                                                                                                                                      │
│         require(                                                                                                                                                                                                │
│             outputTokenBalance >= _exitTokenStruct.minAmount,                                                                                                                                                   │
│             "Insufficient output"                                                                                                                                                                               │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         outputToken.transfer(msg.sender, outputTokenBalance);                                                                                                                                                   │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function exitEth(ExitTokenStructV2 calldata _exitTokenStruct) external {                                                                                                                                    │
│         _exit(_exitTokenStruct);                                                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         uint256 intermediateTokenBalance = INTERMEDIATE_TOKEN.balanceOf(                                                                                                                                        │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         require(                                                                                                                                                                                                │
│             intermediateTokenBalance >= _exitTokenStruct.minAmount,                                                                                                                                             │
│             "Insufficient output"                                                                                                                                                                               │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         IWrappedNativeToken(address(INTERMEDIATE_TOKEN)).withdraw(                                                                                                                                              │
│             intermediateTokenBalance                                                                                                                                                                            │
│         );                                                                                                                                                                                                      │
│         msg.sender.transfer(intermediateTokenBalance);                                                                                                                                                          │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function joinTokenSingle(JoinTokenStruct calldata _joinTokenStruct)                                                                                                                                         │
│         external                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         inputToken.safeTransferFrom(                                                                                                                                                                            │
│             msg.sender,                                                                                                                                                                                         │
│             address(this),                                                                                                                                                                                      │
│             _joinTokenStruct.inputAmount                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         _joinTokenSingle(_joinTokenStruct);                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│         uint256 remainingIntermediateBalance = INTERMEDIATE_TOKEN.balanceOf(                                                                                                                                    │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         if (remainingIntermediateBalance > 0) {                                                                                                                                                                 │
│             INTERMEDIATE_TOKEN.safeTransfer(                                                                                                                                                                    │
│                 msg.sender,                                                                                                                                                                                     │
│                 remainingIntermediateBalance                                                                                                                                                                    │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStruct calldata _joinTokenStruct)                                                                                                                                        │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         (address[] memory tokens, uint256[] memory amounts) = IBasketFacet(                                                                                                                                     │
│             _joinTokenStruct.outputBasket                                                                                                                                                                       │
│         ).calcTokensForAmount(_joinTokenStruct.outputAmount);                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│         // ######## SWAP TOKEN #########                                                                                                                                                                        │
│         address[] memory path = new address[](2);                                                                                                                                                               │
│         if (_joinTokenStruct.inputToken != address(INTERMEDIATE_TOKEN)) {                                                                                                                                       │
│             _maxApprove(inputToken, address(uniSwapLikeRouter));                                                                                                                                                │
│                                                                                                                                                                                                                 │
│             path[0] = _joinTokenStruct.inputToken;                                                                                                                                                              │
│             path[1] = address(INTERMEDIATE_TOKEN);                                                                                                                                                              │
│             uint256[] memory amountsOut = uniSwapLikeRouter.getAmountsOut(                                                                                                                                      │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapExactTokensForTokens(                                                                                                                                                         │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 amountsOut,                                                                                                                                                                                     │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         path[0] = address(INTERMEDIATE_TOKEN);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         _maxApprove(INTERMEDIATE_TOKEN, address(uniSwapLikeRouter));                                                                                                                                            │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             path[1] = tokens;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             uint256[] memory amountsIn = uniSwapLikeRouter.getAmountsIn(                                                                                                                                        │
│                 amounts,                                                                                                                                                                                        │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapTokensForExactTokens(                                                                                                                                                         │
│                 amounts,                                                                                                                                                                                        │
│                 amountsIn[0],                                                                                                                                                                                   │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function joinTokenSingle(JoinTokenStructV2 calldata _joinTokenStruct)                                                                                                                                       │
│         external                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         inputToken.safeTransferFrom(                                                                                                                                                                            │
│             msg.sender,                                                                                                                                                                                         │
│             address(this),                                                                                                                                                                                      │
│             _joinTokenStruct.inputAmount                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         _joinTokenSingle(_joinTokenStruct);                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│         uint256 remainingIntermediateBalance = inputToken.balanceOf(                                                                                                                                            │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         if (remainingIntermediateBalance > 0) {                                                                                                                                                                 │
│             inputToken.safeTransfer(msg.sender, remainingIntermediateBalance);                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStruct calldata _joinTokenStruct)                                                                                                                                        │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         (address[] memory tokens, uint256[] memory amounts) = IBasketFacet(                                                                                                                                     │
│             _joinTokenStruct.outputBasket                                                                                                                                                                       │
│         ).calcTokensForAmount(_joinTokenStruct.outputAmount);                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│         // ######## SWAP TOKEN #########                                                                                                                                                                        │
│         address[] memory path = new address[](2);                                                                                                                                                               │
│         if (_joinTokenStruct.inputToken != address(INTERMEDIATE_TOKEN)) {                                                                                                                                       │
│             _maxApprove(inputToken, address(uniSwapLikeRouter));                                                                                                                                                │
│                                                                                                                                                                                                                 │
│             path[0] = _joinTokenStruct.inputToken;                                                                                                                                                              │
│             path[1] = address(INTERMEDIATE_TOKEN);                                                                                                                                                              │
│             uint256[] memory amountsOut = uniSwapLikeRouter.getAmountsOut(                                                                                                                                      │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapExactTokensForTokens(                                                                                                                                                         │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 amountsOut,                                                                                                                                                                                     │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         path[0] = address(INTERMEDIATE_TOKEN);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         _maxApprove(INTERMEDIATE_TOKEN, address(uniSwapLikeRouter));                                                                                                                                            │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             path[1] = tokens;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             uint256[] memory amountsIn = uniSwapLikeRouter.getAmountsIn(                                                                                                                                        │
│                 amounts,                                                                                                                                                                                        │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapTokensForExactTokens(                                                                                                                                                         │
│                 amounts,                                                                                                                                                                                        │
│                 amountsIn[0],                                                                                                                                                                                   │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price based on the market reserves/AMMprice/exchangeRate OR the custom token balanceOf/totalSupply/amount/liquidity calculation          │
│ Code:                                                                                                                                                                                                           │
│     function joinTokenSingle(JoinTokenStructV2 calldata _joinTokenStruct)                                                                                                                                       │
│         external                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         inputToken.safeTransferFrom(                                                                                                                                                                            │
│             msg.sender,                                                                                                                                                                                         │
│             address(this),                                                                                                                                                                                      │
│             _joinTokenStruct.inputAmount                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         _joinTokenSingle(_joinTokenStruct);                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│         uint256 remainingIntermediateBalance = inputToken.balanceOf(                                                                                                                                            │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         if (remainingIntermediateBalance > 0) {                                                                                                                                                                 │
│             inputToken.safeTransfer(msg.sender, remainingIntermediateBalance);                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStruct calldata _joinTokenStruct)                                                                                                                                        │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         (address[] memory tokens, uint256[] memory amounts) = IBasketFacet(                                                                                                                                     │
│             _joinTokenStruct.outputBasket                                                                                                                                                                       │
│         ).calcTokensForAmount(_joinTokenStruct.outputAmount);                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│         // ######## SWAP TOKEN #########                                                                                                                                                                        │
│         address[] memory path = new address[](2);                                                                                                                                                               │
│         if (_joinTokenStruct.inputToken != address(INTERMEDIATE_TOKEN)) {                                                                                                                                       │
│             _maxApprove(inputToken, address(uniSwapLikeRouter));                                                                                                                                                │
│                                                                                                                                                                                                                 │
│             path[0] = _joinTokenStruct.inputToken;                                                                                                                                                              │
│             path[1] = address(INTERMEDIATE_TOKEN);                                                                                                                                                              │
│             uint256[] memory amountsOut = uniSwapLikeRouter.getAmountsOut(                                                                                                                                      │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapExactTokensForTokens(                                                                                                                                                         │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 amountsOut,                                                                                                                                                                                     │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         path[0] = address(INTERMEDIATE_TOKEN);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         _maxApprove(INTERMEDIATE_TOKEN, address(uniSwapLikeRouter));                                                                                                                                            │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             path[1] = tokens;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             uint256[] memory amountsIn = uniSwapLikeRouter.getAmountsIn(                                                                                                                                        │
│                 amounts,                                                                                                                                                                                        │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapTokensForExactTokens(                                                                                                                                                         │
│                 amounts,                                                                                                                                                                                        │
│                 amountsIn[0],                                                                                                                                                                                   │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function joinTokenEth(JoinTokenStructV2 calldata _joinTokenStruct)                                                                                                                                          │
│         external                                                                                                                                                                                                │
│         payable                                                                                                                                                                                                 │
│     {                                                                                                                                                                                                           │
│         require(                                                                                                                                                                                                │
│             _joinTokenStruct.inputToken == address(INTERMEDIATE_TOKEN),                                                                                                                                         │
│             "Wrong input token"                                                                                                                                                                                 │
│         );                                                                                                                                                                                                      │
│         require(msg.value > 0, "No native token passed");                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // ######## Wrap TOKEN #########                                                                                                                                                                        │
│         address(INTERMEDIATE_TOKEN).call{value: msg.value}("");                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│         _joinTokenSingle(_joinTokenStruct);                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│         uint256 remainingIntermediateBalance = INTERMEDIATE_TOKEN.balanceOf(                                                                                                                                    │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         if (remainingIntermediateBalance > 0) {                                                                                                                                                                 │
│             IWrappedNativeToken(address(INTERMEDIATE_TOKEN)).withdraw(                                                                                                                                          │
│                 remainingIntermediateBalance                                                                                                                                                                    │
│             );                                                                                                                                                                                                  │
│             msg.sender.transfer(remainingIntermediateBalance);                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStruct calldata _joinTokenStruct)                                                                                                                                        │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         (address[] memory tokens, uint256[] memory amounts) = IBasketFacet(                                                                                                                                     │
│             _joinTokenStruct.outputBasket                                                                                                                                                                       │
│         ).calcTokensForAmount(_joinTokenStruct.outputAmount);                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│         // ######## SWAP TOKEN #########                                                                                                                                                                        │
│         address[] memory path = new address[](2);                                                                                                                                                               │
│         if (_joinTokenStruct.inputToken != address(INTERMEDIATE_TOKEN)) {                                                                                                                                       │
│             _maxApprove(inputToken, address(uniSwapLikeRouter));                                                                                                                                                │
│                                                                                                                                                                                                                 │
│             path[0] = _joinTokenStruct.inputToken;                                                                                                                                                              │
│             path[1] = address(INTERMEDIATE_TOKEN);                                                                                                                                                              │
│             uint256[] memory amountsOut = uniSwapLikeRouter.getAmountsOut(                                                                                                                                      │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapExactTokensForTokens(                                                                                                                                                         │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 amountsOut,                                                                                                                                                                                     │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         path[0] = address(INTERMEDIATE_TOKEN);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         _maxApprove(INTERMEDIATE_TOKEN, address(uniSwapLikeRouter));                                                                                                                                            │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             path[1] = tokens;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             uint256[] memory amountsIn = uniSwapLikeRouter.getAmountsIn(                                                                                                                                        │
│                 amounts,                                                                                                                                                                                        │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapTokensForExactTokens(                                                                                                                                                         │
│                 amounts,                                                                                                                                                                                        │
│                 amountsIn[0],                                                                                                                                                                                   │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function joinTokenSingle(JoinTokenStruct calldata _joinTokenStruct)                                                                                                                                         │
│         external                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         inputToken.safeTransferFrom(                                                                                                                                                                            │
│             msg.sender,                                                                                                                                                                                         │
│             address(this),                                                                                                                                                                                      │
│             _joinTokenStruct.inputAmount                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         _joinTokenSingle(_joinTokenStruct);                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│         uint256 remainingIntermediateBalance = INTERMEDIATE_TOKEN.balanceOf(                                                                                                                                    │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         if (remainingIntermediateBalance > 0) {                                                                                                                                                                 │
│             INTERMEDIATE_TOKEN.safeTransfer(                                                                                                                                                                    │
│                 msg.sender,                                                                                                                                                                                     │
│                 remainingIntermediateBalance                                                                                                                                                                    │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStruct calldata _joinTokenStruct)                                                                                                                                        │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         (address[] memory tokens, uint256[] memory amounts) = IBasketFacet(                                                                                                                                     │
│             _joinTokenStruct.outputBasket                                                                                                                                                                       │
│         ).calcTokensForAmount(_joinTokenStruct.outputAmount);                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│         // ######## SWAP TOKEN #########                                                                                                                                                                        │
│         address[] memory path = new address[](2);                                                                                                                                                               │
│         if (_joinTokenStruct.inputToken != address(INTERMEDIATE_TOKEN)) {                                                                                                                                       │
│             _maxApprove(inputToken, address(uniSwapLikeRouter));                                                                                                                                                │
│                                                                                                                                                                                                                 │
│             path[0] = _joinTokenStruct.inputToken;                                                                                                                                                              │
│             path[1] = address(INTERMEDIATE_TOKEN);                                                                                                                                                              │
│             uint256[] memory amountsOut = uniSwapLikeRouter.getAmountsOut(                                                                                                                                      │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapExactTokensForTokens(                                                                                                                                                         │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 amountsOut,                                                                                                                                                                                     │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         path[0] = address(INTERMEDIATE_TOKEN);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         _maxApprove(INTERMEDIATE_TOKEN, address(uniSwapLikeRouter));                                                                                                                                            │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             path[1] = tokens;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             uint256[] memory amountsIn = uniSwapLikeRouter.getAmountsIn(                                                                                                                                        │
│                 amounts,                                                                                                                                                                                        │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapTokensForExactTokens(                                                                                                                                                         │
│                 amounts,                                                                                                                                                                                        │
│                 amountsIn[0],                                                                                                                                                                                   │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function joinTokenEth(JoinTokenStruct calldata _joinTokenStruct)                                                                                                                                            │
│         external                                                                                                                                                                                                │
│         payable                                                                                                                                                                                                 │
│     {                                                                                                                                                                                                           │
│         require(                                                                                                                                                                                                │
│             _joinTokenStruct.inputToken == address(INTERMEDIATE_TOKEN),                                                                                                                                         │
│             "Wrong input token"                                                                                                                                                                                 │
│         );                                                                                                                                                                                                      │
│         require(msg.value > 0, "No native token passed");                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // ######## Wrap TOKEN #########                                                                                                                                                                        │
│         address(INTERMEDIATE_TOKEN).call{value: msg.value}("");                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│         _joinTokenSingle(_joinTokenStruct);                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│         uint256 remainingIntermediateBalance = INTERMEDIATE_TOKEN.balanceOf(                                                                                                                                    │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         if (remainingIntermediateBalance > 0) {                                                                                                                                                                 │
│             IWrappedNativeToken(address(INTERMEDIATE_TOKEN)).withdraw(                                                                                                                                          │
│                 remainingIntermediateBalance                                                                                                                                                                    │
│             );                                                                                                                                                                                                  │
│             msg.sender.transfer(remainingIntermediateBalance);                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStruct calldata _joinTokenStruct)                                                                                                                                        │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         (address[] memory tokens, uint256[] memory amounts) = IBasketFacet(                                                                                                                                     │
│             _joinTokenStruct.outputBasket                                                                                                                                                                       │
│         ).calcTokensForAmount(_joinTokenStruct.outputAmount);                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│         // ######## SWAP TOKEN #########                                                                                                                                                                        │
│         address[] memory path = new address[](2);                                                                                                                                                               │
│         if (_joinTokenStruct.inputToken != address(INTERMEDIATE_TOKEN)) {                                                                                                                                       │
│             _maxApprove(inputToken, address(uniSwapLikeRouter));                                                                                                                                                │
│                                                                                                                                                                                                                 │
│             path[0] = _joinTokenStruct.inputToken;                                                                                                                                                              │
│             path[1] = address(INTERMEDIATE_TOKEN);                                                                                                                                                              │
│             uint256[] memory amountsOut = uniSwapLikeRouter.getAmountsOut(                                                                                                                                      │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapExactTokensForTokens(                                                                                                                                                         │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 amountsOut,                                                                                                                                                                                     │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         path[0] = address(INTERMEDIATE_TOKEN);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         _maxApprove(INTERMEDIATE_TOKEN, address(uniSwapLikeRouter));                                                                                                                                            │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             path[1] = tokens;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             uint256[] memory amountsIn = uniSwapLikeRouter.getAmountsIn(                                                                                                                                        │
│                 amounts,                                                                                                                                                                                        │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapTokensForExactTokens(                                                                                                                                                         │
│                 amounts,                                                                                                                                                                                        │
│                 amountsIn[0],                                                                                                                                                                                   │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function exitEth(ExitTokenStruct calldata _exitTokenStruct) external {                                                                                                                                      │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputBasket = IERC20(_exitTokenStruct.inputBasket);                                                                                                                                              │
│                                                                                                                                                                                                                 │
│         inputBasket.safeTransferFrom(                                                                                                                                                                           │
│             msg.sender,                                                                                                                                                                                         │
│             address(this),                                                                                                                                                                                      │
│             _exitTokenStruct.inputAmount                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         IBasketFacet(address(inputBasket)).exitPool(                                                                                                                                                            │
│             _exitTokenStruct.inputAmount,                                                                                                                                                                       │
│             _exitTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         address[] memory tokens = IBasketFacet(address(inputBasket))                                                                                                                                            │
│             .getTokens();                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         address[] memory path = new address[](2);                                                                                                                                                               │
│         path[1] = address(INTERMEDIATE_TOKEN);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             path[0] = tokens;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             _maxApprove(IERC20(tokens), address(uniSwapLikeRouter));                                                                                                                                            │
│             uniSwapLikeRouter.swapExactTokensForTokens(                                                                                                                                                         │
│                 IERC20(tokens).balanceOf(address(this)),                                                                                                                                                        │
│                 0,                                                                                                                                                                                              │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _exitTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 intermediateTokenBalance = INTERMEDIATE_TOKEN.balanceOf(                                                                                                                                        │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         require(                                                                                                                                                                                                │
│             intermediateTokenBalance >= _exitTokenStruct.minAmount,                                                                                                                                             │
│             "Insufficient output"                                                                                                                                                                               │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         IWrappedNativeToken(address(INTERMEDIATE_TOKEN)).withdraw(                                                                                                                                              │
│             intermediateTokenBalance                                                                                                                                                                            │
│         );                                                                                                                                                                                                      │
│         msg.sender.transfer(intermediateTokenBalance);                                                                                                                                                          │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function joinTokenSingle(JoinTokenStructV2 calldata _joinTokenStruct)                                                                                                                                       │
│         external                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         inputToken.safeTransferFrom(                                                                                                                                                                            │
│             msg.sender,                                                                                                                                                                                         │
│             address(this),                                                                                                                                                                                      │
│             _joinTokenStruct.inputAmount                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         _joinTokenSingle(_joinTokenStruct);                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│         uint256 remainingIntermediateBalance = inputToken.balanceOf(                                                                                                                                            │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         if (remainingIntermediateBalance > 0) {                                                                                                                                                                 │
│             inputToken.safeTransfer(msg.sender, remainingIntermediateBalance);                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ have inside code statements that update/accrue interest/exchange rate,                                                                                                                                          │
│ Code:                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStructV2 calldata _joinTokenStruct)                                                                                                                                      │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < _joinTokenStruct.trades.length; i++) {                                                                                                                                              │
│             UnderlyingTrade calldata trade = _joinTokenStruct.trades;                                                                                                                                           │
│             uint256[] memory inputs = new uint256[](trade.swaps.length + 1);                                                                                                                                    │
│             inputs[0] = trade.quantity;                                                                                                                                                                         │
│             //Get inputs to                                                                                                                                                                                     │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 UniswapV2SwapStruct calldata swap = trade.swaps[                                                                                                                                                │
│                     trade.swaps.length - j - 1                                                                                                                                                                  │
│                 ];                                                                                                                                                                                              │
│                 uint256[] memory amounts = IPangolinRouter(swap.exchange)                                                                                                                                       │
│                     .getAmountsIn(inputs, swap.path);                                                                                                                                                           │
│                 inputs = amounts[0];                                                                                                                                                                            │
│             }                                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 UniswapV2SwapStruct calldata swap = trade.swaps;                                                                                                                                                │
│                 uint256 amountIn = inputs;                                                                                                                                                                      │
│                 _maxApprove(IERC20(swap.path[0]), address(swap.exchange));                                                                                                                                      │
│                 IPangolinRouter(swap.exchange).swapExactTokensForTokens(                                                                                                                                        │
│                     amountIn,                                                                                                                                                                                   │
│                     0,                                                                                                                                                                                          │
│                     swap.path,                                                                                                                                                                                  │
│                     address(this),                                                                                                                                                                              │
│                     block.timestamp                                                                                                                                                                             │
│                 );                                                                                                                                                                                              │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         address[] memory tokens = IBasketFacet(_joinTokenStruct.outputBasket)                                                                                                                                   │
│             .getTokens();                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function joinTokenSingle(JoinTokenStructV2 calldata _joinTokenStruct)                                                                                                                                       │
│         external                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         inputToken.safeTransferFrom(                                                                                                                                                                            │
│             msg.sender,                                                                                                                                                                                         │
│             address(this),                                                                                                                                                                                      │
│             _joinTokenStruct.inputAmount                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         _joinTokenSingle(_joinTokenStruct);                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│         uint256 remainingIntermediateBalance = inputToken.balanceOf(                                                                                                                                            │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         if (remainingIntermediateBalance > 0) {                                                                                                                                                                 │
│             inputToken.safeTransfer(msg.sender, remainingIntermediateBalance);                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStructV2 calldata _joinTokenStruct)                                                                                                                                      │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < _joinTokenStruct.trades.length; i++) {                                                                                                                                              │
│             UnderlyingTrade calldata trade = _joinTokenStruct.trades;                                                                                                                                           │
│             uint256[] memory inputs = new uint256[](trade.swaps.length + 1);                                                                                                                                    │
│             inputs[0] = trade.quantity;                                                                                                                                                                         │
│             //Get inputs to                                                                                                                                                                                     │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 UniswapV2SwapStruct calldata swap = trade.swaps[                                                                                                                                                │
│                     trade.swaps.length - j - 1                                                                                                                                                                  │
│                 ];                                                                                                                                                                                              │
│                 uint256[] memory amounts = IPangolinRouter(swap.exchange)                                                                                                                                       │
│                     .getAmountsIn(inputs, swap.path);                                                                                                                                                           │
│                 inputs = amounts[0];                                                                                                                                                                            │
│             }                                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 UniswapV2SwapStruct calldata swap = trade.swaps;                                                                                                                                                │
│                 uint256 amountIn = inputs;                                                                                                                                                                      │
│                 _maxApprove(IERC20(swap.path[0]), address(swap.exchange));                                                                                                                                      │
│                 IPangolinRouter(swap.exchange).swapExactTokensForTokens(                                                                                                                                        │
│                     amountIn,                                                                                                                                                                                   │
│                     0,                                                                                                                                                                                          │
│                     swap.path,                                                                                                                                                                                  │
│                     address(this),                                                                                                                                                                              │
│                     block.timestamp                                                                                                                                                                             │
│                 );                                                                                                                                                                                              │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         address[] memory tokens = IBasketFacet(_joinTokenStruct.outputBasket)                                                                                                                                   │
│             .getTokens();                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function joinTokenEth(JoinTokenStructV2 calldata _joinTokenStruct)                                                                                                                                          │
│         external                                                                                                                                                                                                │
│         payable                                                                                                                                                                                                 │
│     {                                                                                                                                                                                                           │
│         require(                                                                                                                                                                                                │
│             _joinTokenStruct.inputToken == address(INTERMEDIATE_TOKEN),                                                                                                                                         │
│             "Wrong input token"                                                                                                                                                                                 │
│         );                                                                                                                                                                                                      │
│         require(msg.value > 0, "No native token passed");                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // ######## Wrap TOKEN #########                                                                                                                                                                        │
│         address(INTERMEDIATE_TOKEN).call{value: msg.value}("");                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│         _joinTokenSingle(_joinTokenStruct);                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│         uint256 remainingIntermediateBalance = INTERMEDIATE_TOKEN.balanceOf(                                                                                                                                    │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         if (remainingIntermediateBalance > 0) {                                                                                                                                                                 │
│             IWrappedNativeToken(address(INTERMEDIATE_TOKEN)).withdraw(                                                                                                                                          │
│                 remainingIntermediateBalance                                                                                                                                                                    │
│             );                                                                                                                                                                                                  │
│             msg.sender.transfer(remainingIntermediateBalance);                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStructV2 calldata _joinTokenStruct)                                                                                                                                      │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < _joinTokenStruct.trades.length; i++) {                                                                                                                                              │
│             UnderlyingTrade calldata trade = _joinTokenStruct.trades;                                                                                                                                           │
│             uint256[] memory inputs = new uint256[](trade.swaps.length + 1);                                                                                                                                    │
│             inputs[0] = trade.quantity;                                                                                                                                                                         │
│             //Get inputs to                                                                                                                                                                                     │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 UniswapV2SwapStruct calldata swap = trade.swaps[                                                                                                                                                │
│                     trade.swaps.length - j - 1                                                                                                                                                                  │
│                 ];                                                                                                                                                                                              │
│                 uint256[] memory amounts = IPangolinRouter(swap.exchange)                                                                                                                                       │
│                     .getAmountsIn(inputs, swap.path);                                                                                                                                                           │
│                 inputs = amounts[0];                                                                                                                                                                            │
│             }                                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 UniswapV2SwapStruct calldata swap = trade.swaps;                                                                                                                                                │
│                 uint256 amountIn = inputs;                                                                                                                                                                      │
│                 _maxApprove(IERC20(swap.path[0]), address(swap.exchange));                                                                                                                                      │
│                 IPangolinRouter(swap.exchange).swapExactTokensForTokens(                                                                                                                                        │
│                     amountIn,                                                                                                                                                                                   │
│                     0,                                                                                                                                                                                          │
│                     swap.path,                                                                                                                                                                                  │
│                     address(this),                                                                                                                                                                              │
│                     block.timestamp                                                                                                                                                                             │
│                 );                                                                                                                                                                                              │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         address[] memory tokens = IBasketFacet(_joinTokenStruct.outputBasket)                                                                                                                                   │
│             .getTokens();                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function joinTokenSingle(JoinTokenStruct calldata _joinTokenStruct)                                                                                                                                         │
│         external                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         inputToken.safeTransferFrom(                                                                                                                                                                            │
│             msg.sender,                                                                                                                                                                                         │
│             address(this),                                                                                                                                                                                      │
│             _joinTokenStruct.inputAmount                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         _joinTokenSingle(_joinTokenStruct);                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│         uint256 remainingIntermediateBalance = INTERMEDIATE_TOKEN.balanceOf(                                                                                                                                    │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         if (remainingIntermediateBalance > 0) {                                                                                                                                                                 │
│             INTERMEDIATE_TOKEN.safeTransfer(                                                                                                                                                                    │
│                 msg.sender,                                                                                                                                                                                     │
│                 remainingIntermediateBalance                                                                                                                                                                    │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStructV2 calldata _joinTokenStruct)                                                                                                                                      │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < _joinTokenStruct.trades.length; i++) {                                                                                                                                              │
│             UnderlyingTrade calldata trade = _joinTokenStruct.trades;                                                                                                                                           │
│             uint256[] memory inputs = new uint256[](trade.swaps.length + 1);                                                                                                                                    │
│             inputs[0] = trade.quantity;                                                                                                                                                                         │
│             //Get inputs to                                                                                                                                                                                     │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 UniswapV2SwapStruct calldata swap = trade.swaps[                                                                                                                                                │
│                     trade.swaps.length - j - 1                                                                                                                                                                  │
│                 ];                                                                                                                                                                                              │
│                 uint256[] memory amounts = IPangolinRouter(swap.exchange)                                                                                                                                       │
│                     .getAmountsIn(inputs, swap.path);                                                                                                                                                           │
│                 inputs = amounts[0];                                                                                                                                                                            │
│             }                                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 UniswapV2SwapStruct calldata swap = trade.swaps;                                                                                                                                                │
│                 uint256 amountIn = inputs;                                                                                                                                                                      │
│                 _maxApprove(IERC20(swap.path[0]), address(swap.exchange));                                                                                                                                      │
│                 IPangolinRouter(swap.exchange).swapExactTokensForTokens(                                                                                                                                        │
│                     amountIn,                                                                                                                                                                                   │
│                     0,                                                                                                                                                                                          │
│                     swap.path,                                                                                                                                                                                  │
│                     address(this),                                                                                                                                                                              │
│                     block.timestamp                                                                                                                                                                             │
│                 );                                                                                                                                                                                              │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         address[] memory tokens = IBasketFacet(_joinTokenStruct.outputBasket)                                                                                                                                   │
│             .getTokens();                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ Code:                                                                                                                                                                                                           │
│     function joinTokenEth(JoinTokenStruct calldata _joinTokenStruct)                                                                                                                                            │
│         external                                                                                                                                                                                                │
│         payable                                                                                                                                                                                                 │
│     {                                                                                                                                                                                                           │
│         require(                                                                                                                                                                                                │
│             _joinTokenStruct.inputToken == address(INTERMEDIATE_TOKEN),                                                                                                                                         │
│             "Wrong input token"                                                                                                                                                                                 │
│         );                                                                                                                                                                                                      │
│         require(msg.value > 0, "No native token passed");                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // ######## Wrap TOKEN #########                                                                                                                                                                        │
│         address(INTERMEDIATE_TOKEN).call{value: msg.value}("");                                                                                                                                                 │
│                                                                                                                                                                                                                 │
│         _joinTokenSingle(_joinTokenStruct);                                                                                                                                                                     │
│                                                                                                                                                                                                                 │
│         uint256 remainingIntermediateBalance = INTERMEDIATE_TOKEN.balanceOf(                                                                                                                                    │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         if (remainingIntermediateBalance > 0) {                                                                                                                                                                 │
│             IWrappedNativeToken(address(INTERMEDIATE_TOKEN)).withdraw(                                                                                                                                          │
│                 remainingIntermediateBalance                                                                                                                                                                    │
│             );                                                                                                                                                                                                  │
│             msg.sender.transfer(remainingIntermediateBalance);                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStructV2 calldata _joinTokenStruct)                                                                                                                                      │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < _joinTokenStruct.trades.length; i++) {                                                                                                                                              │
│             UnderlyingTrade calldata trade = _joinTokenStruct.trades;                                                                                                                                           │
│             uint256[] memory inputs = new uint256[](trade.swaps.length + 1);                                                                                                                                    │
│             inputs[0] = trade.quantity;                                                                                                                                                                         │
│             //Get inputs to                                                                                                                                                                                     │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 UniswapV2SwapStruct calldata swap = trade.swaps[                                                                                                                                                │
│                     trade.swaps.length - j - 1                                                                                                                                                                  │
│                 ];                                                                                                                                                                                              │
│                 uint256[] memory amounts = IPangolinRouter(swap.exchange)                                                                                                                                       │
│                     .getAmountsIn(inputs, swap.path);                                                                                                                                                           │
│                 inputs = amounts[0];                                                                                                                                                                            │
│             }                                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 UniswapV2SwapStruct calldata swap = trade.swaps;                                                                                                                                                │
│                 uint256 amountIn = inputs;                                                                                                                                                                      │
│                 _maxApprove(IERC20(swap.path[0]), address(swap.exchange));                                                                                                                                      │
│                 IPangolinRouter(swap.exchange).swapExactTokensForTokens(                                                                                                                                        │
│                     amountIn,                                                                                                                                                                                   │
│                     0,                                                                                                                                                                                          │
│                     swap.path,                                                                                                                                                                                  │
│                     address(this),                                                                                                                                                                              │
│                     block.timestamp                                                                                                                                                                             │
│                 );                                                                                                                                                                                              │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         address[] memory tokens = IBasketFacet(_joinTokenStruct.outputBasket)                                                                                                                                   │
│             .getTokens();                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function joinPool(uint256 _amount, uint16 _referral)                                                                                                                                                        │
│         external                                                                                                                                                                                                │
│         override                                                                                                                                                                                                │
│         noReentry                                                                                                                                                                                               │
│     {                                                                                                                                                                                                           │
│         require(!this.getLock(), "POOL_LOCKED");                                                                                                                                                                │
│         chargeOutstandingAnnualizedFee();                                                                                                                                                                       │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply = LibERC20Storage.erc20Storage().totalSupply;                                                                                                                                       │
│         require(                                                                                                                                                                                                │
│             totalSupply.add(_amount) <= this.getCap(),                                                                                                                                                          │
│             "MAX_POOL_CAP_REACHED"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         uint256 feeAmount = _amount.mul(bs.entryFee).div(10**18);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenAmount =                                                                                                                                                                               │
│                 balance(address(token)).mul(_amount.add(feeAmount)).div(                                                                                                                                        │
│                     totalSupply                                                                                                                                                                                 │
│                 );                                                                                                                                                                                              │
│             require(tokenAmount != 0, "AMOUNT_TOO_SMALL");                                                                                                                                                      │
│             token.safeTransferFrom(msg.sender, address(this), tokenAmount);                                                                                                                                     │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // If there is any fee that should go to the beneficiary mint it                                                                                                                                        │
│         if (                                                                                                                                                                                                    │
│             feeAmount != 0 &&                                                                                                                                                                                   │
│             bs.entryFeeBeneficiaryShare != 0 &&                                                                                                                                                                 │
│             bs.feeBeneficiary != address(0)                                                                                                                                                                     │
│         ) {                                                                                                                                                                                                     │
│             uint256 feeBeneficiaryShare =                                                                                                                                                                       │
│                 feeAmount.mul(bs.entryFeeBeneficiaryShare).div(10**18);                                                                                                                                         │
│             if (feeBeneficiaryShare != 0) {                                                                                                                                                                     │
│                 LibERC20.mint(bs.feeBeneficiary, feeBeneficiaryShare);                                                                                                                                          │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         LibERC20.mint(msg.sender, _amount);                                                                                                                                                                     │
│         emit PoolJoined(msg.sender, _amount, _referral);                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: deposit/mint/add the liquidity pool/amount/share and set the total share to the number of first deposit when the supply/liquidity is 0                                                               │
│ Code:                                                                                                                                                                                                           │
│     function joinPool(uint256 _amount, uint16 _referral)                                                                                                                                                        │
│         external                                                                                                                                                                                                │
│         override                                                                                                                                                                                                │
│         noReentry                                                                                                                                                                                               │
│     {                                                                                                                                                                                                           │
│         require(!this.getLock(), "POOL_LOCKED");                                                                                                                                                                │
│         chargeOutstandingAnnualizedFee();                                                                                                                                                                       │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply = LibERC20Storage.erc20Storage().totalSupply;                                                                                                                                       │
│         require(                                                                                                                                                                                                │
│             totalSupply.add(_amount) <= this.getCap(),                                                                                                                                                          │
│             "MAX_POOL_CAP_REACHED"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         uint256 feeAmount = _amount.mul(bs.entryFee).div(10**18);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenAmount =                                                                                                                                                                               │
│                 balance(address(token)).mul(_amount.add(feeAmount)).div(                                                                                                                                        │
│                     totalSupply                                                                                                                                                                                 │
│                 );                                                                                                                                                                                              │
│             require(tokenAmount != 0, "AMOUNT_TOO_SMALL");                                                                                                                                                      │
│             token.safeTransferFrom(msg.sender, address(this), tokenAmount);                                                                                                                                     │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // If there is any fee that should go to the beneficiary mint it                                                                                                                                        │
│         if (                                                                                                                                                                                                    │
│             feeAmount != 0 &&                                                                                                                                                                                   │
│             bs.entryFeeBeneficiaryShare != 0 &&                                                                                                                                                                 │
│             bs.feeBeneficiary != address(0)                                                                                                                                                                     │
│         ) {                                                                                                                                                                                                     │
│             uint256 feeBeneficiaryShare =                                                                                                                                                                       │
│                 feeAmount.mul(bs.entryFeeBeneficiaryShare).div(10**18);                                                                                                                                         │
│             if (feeBeneficiaryShare != 0) {                                                                                                                                                                     │
│                 LibERC20.mint(bs.feeBeneficiary, feeBeneficiaryShare);                                                                                                                                          │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         LibERC20.mint(msg.sender, _amount);                                                                                                                                                                     │
│         emit PoolJoined(msg.sender, _amount, _referral);                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ No                                                                                                                                                                                                              │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStructV2 calldata _joinTokenStruct)                                                                                                                                      │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < _joinTokenStruct.trades.length; i++) {                                                                                                                                              │
│             UnderlyingTrade calldata trade = _joinTokenStruct.trades;                                                                                                                                           │
│             uint256[] memory inputs = new uint256[](trade.swaps.length + 1);                                                                                                                                    │
│             inputs[0] = trade.quantity;                                                                                                                                                                         │
│             //Get inputs to                                                                                                                                                                                     │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 UniswapV2SwapStruct calldata swap = trade.swaps[                                                                                                                                                │
│                     trade.swaps.length - j - 1                                                                                                                                                                  │
│                 ];                                                                                                                                                                                              │
│                 uint256[] memory amounts = IPangolinRouter(swap.exchange)                                                                                                                                       │
│                     .getAmountsIn(inputs, swap.path);                                                                                                                                                           │
│                 inputs = amounts[0];                                                                                                                                                                            │
│             }                                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 UniswapV2SwapStruct calldata swap = trade.swaps;                                                                                                                                                │
│                 uint256 amountIn = inputs;                                                                                                                                                                      │
│                 _maxApprove(IERC20(swap.path[0]), address(swap.exchange));                                                                                                                                      │
│                 IPangolinRouter(swap.exchange).swapExactTokensForTokens(                                                                                                                                        │
│                     amountIn,                                                                                                                                                                                   │
│                     0,                                                                                                                                                                                          │
│                     swap.path,                                                                                                                                                                                  │
│                     address(this),                                                                                                                                                                              │
│                     block.timestamp                                                                                                                                                                             │
│                 );                                                                                                                                                                                              │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         address[] memory tokens = IBasketFacet(_joinTokenStruct.outputBasket)                                                                                                                                   │
│             .getTokens();                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
│     function joinPool(uint256 _amount, uint16 _referral)                                                                                                                                                        │
│         external                                                                                                                                                                                                │
│         override                                                                                                                                                                                                │
│         noReentry                                                                                                                                                                                               │
│     {                                                                                                                                                                                                           │
│         require(!this.getLock(), "POOL_LOCKED");                                                                                                                                                                │
│         chargeOutstandingAnnualizedFee();                                                                                                                                                                       │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply = LibERC20Storage.erc20Storage().totalSupply;                                                                                                                                       │
│         require(                                                                                                                                                                                                │
│             totalSupply.add(_amount) <= this.getCap(),                                                                                                                                                          │
│             "MAX_POOL_CAP_REACHED"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         uint256 feeAmount = _amount.mul(bs.entryFee).div(10**18);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenAmount =                                                                                                                                                                               │
│                 balance(address(token)).mul(_amount.add(feeAmount)).div(                                                                                                                                        │
│                     totalSupply                                                                                                                                                                                 │
│                 );                                                                                                                                                                                              │
│             require(tokenAmount != 0, "AMOUNT_TOO_SMALL");                                                                                                                                                      │
│             token.safeTransferFrom(msg.sender, address(this), tokenAmount);                                                                                                                                     │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // If there is any fee that should go to the beneficiary mint it                                                                                                                                        │
│         if (                                                                                                                                                                                                    │
│             feeAmount != 0 &&                                                                                                                                                                                   │
│             bs.entryFeeBeneficiaryShare != 0 &&                                                                                                                                                                 │
│             bs.feeBeneficiary != address(0)                                                                                                                                                                     │
│         ) {                                                                                                                                                                                                     │
│             uint256 feeBeneficiaryShare =                                                                                                                                                                       │
│                 feeAmount.mul(bs.entryFeeBeneficiaryShare).div(10**18);                                                                                                                                         │
│             if (feeBeneficiaryShare != 0) {                                                                                                                                                                     │
│                 LibERC20.mint(bs.feeBeneficiary, feeBeneficiaryShare);                                                                                                                                          │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         LibERC20.mint(msg.sender, _amount);                                                                                                                                                                     │
│         emit PoolJoined(msg.sender, _amount, _referral);                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: deposit/mint/add the liquidity pool/amount/share and set the total share to the number of first deposit when the supply/liquidity is 0                                                               │
│ Code:                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStructV2 calldata _joinTokenStruct)                                                                                                                                      │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < _joinTokenStruct.trades.length; i++) {                                                                                                                                              │
│             UnderlyingTrade calldata trade = _joinTokenStruct.trades;                                                                                                                                           │
│             uint256[] memory inputs = new uint256[](trade.swaps.length + 1);                                                                                                                                    │
│             inputs[0] = trade.quantity;                                                                                                                                                                         │
│             //Get inputs to                                                                                                                                                                                     │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 UniswapV2SwapStruct calldata swap = trade.swaps[                                                                                                                                                │
│                     trade.swaps.length - j - 1                                                                                                                                                                  │
│                 ];                                                                                                                                                                                              │
│                 uint256[] memory amounts = IPangolinRouter(swap.exchange)                                                                                                                                       │
│                     .getAmountsIn(inputs, swap.path);                                                                                                                                                           │
│                 inputs = amounts[0];                                                                                                                                                                            │
│             }                                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 UniswapV2SwapStruct calldata swap = trade.swaps;                                                                                                                                                │
│                 uint256 amountIn = inputs;                                                                                                                                                                      │
│                 _maxApprove(IERC20(swap.path[0]), address(swap.exchange));                                                                                                                                      │
│                 IPangolinRouter(swap.exchange).swapExactTokensForTokens(                                                                                                                                        │
│                     amountIn,                                                                                                                                                                                   │
│                     0,                                                                                                                                                                                          │
│                     swap.path,                                                                                                                                                                                  │
│                     address(this),                                                                                                                                                                              │
│                     block.timestamp                                                                                                                                                                             │
│                 );                                                                                                                                                                                              │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         address[] memory tokens = IBasketFacet(_joinTokenStruct.outputBasket)                                                                                                                                   │
│             .getTokens();                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
│     function joinPool(uint256 _amount, uint16 _referral)                                                                                                                                                        │
│         external                                                                                                                                                                                                │
│         override                                                                                                                                                                                                │
│         noReentry                                                                                                                                                                                               │
│     {                                                                                                                                                                                                           │
│         require(!this.getLock(), "POOL_LOCKED");                                                                                                                                                                │
│         chargeOutstandingAnnualizedFee();                                                                                                                                                                       │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply = LibERC20Storage.erc20Storage().totalSupply;                                                                                                                                       │
│         require(                                                                                                                                                                                                │
│             totalSupply.add(_amount) <= this.getCap(),                                                                                                                                                          │
│             "MAX_POOL_CAP_REACHED"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         uint256 feeAmount = _amount.mul(bs.entryFee).div(10**18);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenAmount =                                                                                                                                                                               │
│                 balance(address(token)).mul(_amount.add(feeAmount)).div(                                                                                                                                        │
│                     totalSupply                                                                                                                                                                                 │
│                 );                                                                                                                                                                                              │
│             require(tokenAmount != 0, "AMOUNT_TOO_SMALL");                                                                                                                                                      │
│             token.safeTransferFrom(msg.sender, address(this), tokenAmount);                                                                                                                                     │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // If there is any fee that should go to the beneficiary mint it                                                                                                                                        │
│         if (                                                                                                                                                                                                    │
│             feeAmount != 0 &&                                                                                                                                                                                   │
│             bs.entryFeeBeneficiaryShare != 0 &&                                                                                                                                                                 │
│             bs.feeBeneficiary != address(0)                                                                                                                                                                     │
│         ) {                                                                                                                                                                                                     │
│             uint256 feeBeneficiaryShare =                                                                                                                                                                       │
│                 feeAmount.mul(bs.entryFeeBeneficiaryShare).div(10**18);                                                                                                                                         │
│             if (feeBeneficiaryShare != 0) {                                                                                                                                                                     │
│                 LibERC20.mint(bs.feeBeneficiary, feeBeneficiaryShare);                                                                                                                                          │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         LibERC20.mint(msg.sender, _amount);                                                                                                                                                                     │
│         emit PoolJoined(msg.sender, _amount, _referral);                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStruct calldata _joinTokenStruct)                                                                                                                                        │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         (address[] memory tokens, uint256[] memory amounts) = IBasketFacet(                                                                                                                                     │
│             _joinTokenStruct.outputBasket                                                                                                                                                                       │
│         ).calcTokensForAmount(_joinTokenStruct.outputAmount);                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│         // ######## SWAP TOKEN #########                                                                                                                                                                        │
│         address[] memory path = new address[](2);                                                                                                                                                               │
│         if (_joinTokenStruct.inputToken != address(INTERMEDIATE_TOKEN)) {                                                                                                                                       │
│             _maxApprove(inputToken, address(uniSwapLikeRouter));                                                                                                                                                │
│                                                                                                                                                                                                                 │
│             path[0] = _joinTokenStruct.inputToken;                                                                                                                                                              │
│             path[1] = address(INTERMEDIATE_TOKEN);                                                                                                                                                              │
│             uint256[] memory amountsOut = uniSwapLikeRouter.getAmountsOut(                                                                                                                                      │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapExactTokensForTokens(                                                                                                                                                         │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 amountsOut,                                                                                                                                                                                     │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         path[0] = address(INTERMEDIATE_TOKEN);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         _maxApprove(INTERMEDIATE_TOKEN, address(uniSwapLikeRouter));                                                                                                                                            │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             path[1] = tokens;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             uint256[] memory amountsIn = uniSwapLikeRouter.getAmountsIn(                                                                                                                                        │
│                 amounts,                                                                                                                                                                                        │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapTokensForExactTokens(                                                                                                                                                         │
│                 amounts,                                                                                                                                                                                        │
│                 amountsIn[0],                                                                                                                                                                                   │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
│     function joinPool(uint256 _amount, uint16 _referral)                                                                                                                                                        │
│         external                                                                                                                                                                                                │
│         override                                                                                                                                                                                                │
│         noReentry                                                                                                                                                                                               │
│     {                                                                                                                                                                                                           │
│         require(!this.getLock(), "POOL_LOCKED");                                                                                                                                                                │
│         chargeOutstandingAnnualizedFee();                                                                                                                                                                       │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply = LibERC20Storage.erc20Storage().totalSupply;                                                                                                                                       │
│         require(                                                                                                                                                                                                │
│             totalSupply.add(_amount) <= this.getCap(),                                                                                                                                                          │
│             "MAX_POOL_CAP_REACHED"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         uint256 feeAmount = _amount.mul(bs.entryFee).div(10**18);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenAmount =                                                                                                                                                                               │
│                 balance(address(token)).mul(_amount.add(feeAmount)).div(                                                                                                                                        │
│                     totalSupply                                                                                                                                                                                 │
│                 );                                                                                                                                                                                              │
│             require(tokenAmount != 0, "AMOUNT_TOO_SMALL");                                                                                                                                                      │
│             token.safeTransferFrom(msg.sender, address(this), tokenAmount);                                                                                                                                     │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // If there is any fee that should go to the beneficiary mint it                                                                                                                                        │
│         if (                                                                                                                                                                                                    │
│             feeAmount != 0 &&                                                                                                                                                                                   │
│             bs.entryFeeBeneficiaryShare != 0 &&                                                                                                                                                                 │
│             bs.feeBeneficiary != address(0)                                                                                                                                                                     │
│         ) {                                                                                                                                                                                                     │
│             uint256 feeBeneficiaryShare =                                                                                                                                                                       │
│                 feeAmount.mul(bs.entryFeeBeneficiaryShare).div(10**18);                                                                                                                                         │
│             if (feeBeneficiaryShare != 0) {                                                                                                                                                                     │
│                 LibERC20.mint(bs.feeBeneficiary, feeBeneficiaryShare);                                                                                                                                          │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         LibERC20.mint(msg.sender, _amount);                                                                                                                                                                     │
│         emit PoolJoined(msg.sender, _amount, _referral);                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: deposit/mint/add the liquidity pool/amount/share and set the total share to the number of first deposit when the supply/liquidity is 0                                                               │
│ Code:                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStruct calldata _joinTokenStruct)                                                                                                                                        │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         (address[] memory tokens, uint256[] memory amounts) = IBasketFacet(                                                                                                                                     │
│             _joinTokenStruct.outputBasket                                                                                                                                                                       │
│         ).calcTokensForAmount(_joinTokenStruct.outputAmount);                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│         // ######## SWAP TOKEN #########                                                                                                                                                                        │
│         address[] memory path = new address[](2);                                                                                                                                                               │
│         if (_joinTokenStruct.inputToken != address(INTERMEDIATE_TOKEN)) {                                                                                                                                       │
│             _maxApprove(inputToken, address(uniSwapLikeRouter));                                                                                                                                                │
│                                                                                                                                                                                                                 │
│             path[0] = _joinTokenStruct.inputToken;                                                                                                                                                              │
│             path[1] = address(INTERMEDIATE_TOKEN);                                                                                                                                                              │
│             uint256[] memory amountsOut = uniSwapLikeRouter.getAmountsOut(                                                                                                                                      │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapExactTokensForTokens(                                                                                                                                                         │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 amountsOut,                                                                                                                                                                                     │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         path[0] = address(INTERMEDIATE_TOKEN);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         _maxApprove(INTERMEDIATE_TOKEN, address(uniSwapLikeRouter));                                                                                                                                            │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             path[1] = tokens;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             uint256[] memory amountsIn = uniSwapLikeRouter.getAmountsIn(                                                                                                                                        │
│                 amounts,                                                                                                                                                                                        │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapTokensForExactTokens(                                                                                                                                                         │
│                 amounts,                                                                                                                                                                                        │
│                 amountsIn[0],                                                                                                                                                                                   │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
│     function joinPool(uint256 _amount, uint16 _referral)                                                                                                                                                        │
│         external                                                                                                                                                                                                │
│         override                                                                                                                                                                                                │
│         noReentry                                                                                                                                                                                               │
│     {                                                                                                                                                                                                           │
│         require(!this.getLock(), "POOL_LOCKED");                                                                                                                                                                │
│         chargeOutstandingAnnualizedFee();                                                                                                                                                                       │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply = LibERC20Storage.erc20Storage().totalSupply;                                                                                                                                       │
│         require(                                                                                                                                                                                                │
│             totalSupply.add(_amount) <= this.getCap(),                                                                                                                                                          │
│             "MAX_POOL_CAP_REACHED"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         uint256 feeAmount = _amount.mul(bs.entryFee).div(10**18);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenAmount =                                                                                                                                                                               │
│                 balance(address(token)).mul(_amount.add(feeAmount)).div(                                                                                                                                        │
│                     totalSupply                                                                                                                                                                                 │
│                 );                                                                                                                                                                                              │
│             require(tokenAmount != 0, "AMOUNT_TOO_SMALL");                                                                                                                                                      │
│             token.safeTransferFrom(msg.sender, address(this), tokenAmount);                                                                                                                                     │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // If there is any fee that should go to the beneficiary mint it                                                                                                                                        │
│         if (                                                                                                                                                                                                    │
│             feeAmount != 0 &&                                                                                                                                                                                   │
│             bs.entryFeeBeneficiaryShare != 0 &&                                                                                                                                                                 │
│             bs.feeBeneficiary != address(0)                                                                                                                                                                     │
│         ) {                                                                                                                                                                                                     │
│             uint256 feeBeneficiaryShare =                                                                                                                                                                       │
│                 feeAmount.mul(bs.entryFeeBeneficiaryShare).div(10**18);                                                                                                                                         │
│             if (feeBeneficiaryShare != 0) {                                                                                                                                                                     │
│                 LibERC20.mint(bs.feeBeneficiary, feeBeneficiaryShare);                                                                                                                                          │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         LibERC20.mint(msg.sender, _amount);                                                                                                                                                                     │
│         emit PoolJoined(msg.sender, _amount, _referral);                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function exitPool(uint256 _amount, uint16 _referral)                                                                                                                                                        │
│         external                                                                                                                                                                                                │
│         virtual                                                                                                                                                                                                 │
│         override                                                                                                                                                                                                │
│         noReentry                                                                                                                                                                                               │
│     {                                                                                                                                                                                                           │
│         require(!this.getLock(), "POOL_LOCKED");                                                                                                                                                                │
│         chargeOutstandingAnnualizedFee();                                                                                                                                                                       │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply = LibERC20Storage.erc20Storage().totalSupply;                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 feeAmount = _amount.mul(bs.exitFee).div(10**18);                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenBalance = balance(address(token));                                                                                                                                                     │
│             // redeem less tokens if there is an exit fee                                                                                                                                                       │
│             uint256 tokenAmount =                                                                                                                                                                               │
│                 tokenBalance.mul(_amount.sub(feeAmount)).div(totalSupply);                                                                                                                                      │
│             require(                                                                                                                                                                                            │
│                 tokenBalance.sub(tokenAmount) >= MIN_AMOUNT,                                                                                                                                                    │
│                 "TOKEN_BALANCE_TOO_LOW"                                                                                                                                                                         │
│             );                                                                                                                                                                                                  │
│             token.safeTransfer(msg.sender, tokenAmount);                                                                                                                                                        │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // If there is any fee that should go to the beneficiary mint it                                                                                                                                        │
│         if (                                                                                                                                                                                                    │
│             feeAmount != 0 &&                                                                                                                                                                                   │
│             bs.exitFeeBeneficiaryShare != 0 &&                                                                                                                                                                  │
│             bs.feeBeneficiary != address(0)                                                                                                                                                                     │
│         ) {                                                                                                                                                                                                     │
│             uint256 feeBeneficiaryShare =                                                                                                                                                                       │
│                 feeAmount.mul(bs.exitFeeBeneficiaryShare).div(10**18);                                                                                                                                          │
│             if (feeBeneficiaryShare != 0) {                                                                                                                                                                     │
│                 LibERC20.mint(bs.feeBeneficiary, feeBeneficiaryShare);                                                                                                                                          │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         require(                                                                                                                                                                                                │
│             totalSupply.sub(_amount) >= MIN_AMOUNT,                                                                                                                                                             │
│             "POOL_TOKEN_BALANCE_TOO_LOW"                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│         LibERC20.burn(msg.sender, _amount);                                                                                                                                                                     │
│         emit PoolExited(msg.sender, _amount, _referral);                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: deposit/mint/add the liquidity pool/amount/share and set the total share to the number of first deposit when the supply/liquidity is 0                                                               │
│ Code:                                                                                                                                                                                                           │
│     function exitPool(uint256 _amount, uint16 _referral)                                                                                                                                                        │
│         external                                                                                                                                                                                                │
│         virtual                                                                                                                                                                                                 │
│         override                                                                                                                                                                                                │
│         noReentry                                                                                                                                                                                               │
│     {                                                                                                                                                                                                           │
│         require(!this.getLock(), "POOL_LOCKED");                                                                                                                                                                │
│         chargeOutstandingAnnualizedFee();                                                                                                                                                                       │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply = LibERC20Storage.erc20Storage().totalSupply;                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 feeAmount = _amount.mul(bs.exitFee).div(10**18);                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenBalance = balance(address(token));                                                                                                                                                     │
│             // redeem less tokens if there is an exit fee                                                                                                                                                       │
│             uint256 tokenAmount =                                                                                                                                                                               │
│                 tokenBalance.mul(_amount.sub(feeAmount)).div(totalSupply);                                                                                                                                      │
│             require(                                                                                                                                                                                            │
│                 tokenBalance.sub(tokenAmount) >= MIN_AMOUNT,                                                                                                                                                    │
│                 "TOKEN_BALANCE_TOO_LOW"                                                                                                                                                                         │
│             );                                                                                                                                                                                                  │
│             token.safeTransfer(msg.sender, tokenAmount);                                                                                                                                                        │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // If there is any fee that should go to the beneficiary mint it                                                                                                                                        │
│         if (                                                                                                                                                                                                    │
│             feeAmount != 0 &&                                                                                                                                                                                   │
│             bs.exitFeeBeneficiaryShare != 0 &&                                                                                                                                                                  │
│             bs.feeBeneficiary != address(0)                                                                                                                                                                     │
│         ) {                                                                                                                                                                                                     │
│             uint256 feeBeneficiaryShare =                                                                                                                                                                       │
│                 feeAmount.mul(bs.exitFeeBeneficiaryShare).div(10**18);                                                                                                                                          │
│             if (feeBeneficiaryShare != 0) {                                                                                                                                                                     │
│                 LibERC20.mint(bs.feeBeneficiary, feeBeneficiaryShare);                                                                                                                                          │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         require(                                                                                                                                                                                                │
│             totalSupply.sub(_amount) >= MIN_AMOUNT,                                                                                                                                                             │
│             "POOL_TOKEN_BALANCE_TOO_LOW"                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│         LibERC20.burn(msg.sender, _amount);                                                                                                                                                                     │
│         emit PoolExited(msg.sender, _amount, _referral);                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ No                                                                                                                                                                                                              │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function _exit(ExitTokenStructV2 calldata _exitTokenStruct) internal {                                                                                                                                      │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputBasket = IERC20(_exitTokenStruct.inputBasket);                                                                                                                                              │
│                                                                                                                                                                                                                 │
│         inputBasket.safeTransferFrom(                                                                                                                                                                           │
│             msg.sender,                                                                                                                                                                                         │
│             address(this),                                                                                                                                                                                      │
│             _exitTokenStruct.inputAmount                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         IBasketFacet(address(inputBasket)).exitPool(                                                                                                                                                            │
│             _exitTokenStruct.inputAmount,                                                                                                                                                                       │
│             _exitTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < _exitTokenStruct.trades.length; i++) {                                                                                                                                              │
│             ExitUnderlyingTrade calldata trade = _exitTokenStruct.trades;                                                                                                                                       │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 ExitUniswapV2SwapStruct calldata swap = trade.swaps;                                                                                                                                            │
│                 _maxApprove(IERC20(swap.path[0]), address(swap.exchange));                                                                                                                                      │
│                 IPangolinRouter(swap.exchange).swapExactTokensForTokens(                                                                                                                                        │
│                     IERC20(swap.path[0]).balanceOf(address(this)),                                                                                                                                              │
│                     0,                                                                                                                                                                                          │
│                     swap.path,                                                                                                                                                                                  │
│                     address(this),                                                                                                                                                                              │
│                     block.timestamp                                                                                                                                                                             │
│                 );                                                                                                                                                                                              │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│     function exitPool(uint256 _amount, uint16 _referral)                                                                                                                                                        │
│         external                                                                                                                                                                                                │
│         virtual                                                                                                                                                                                                 │
│         override                                                                                                                                                                                                │
│         noReentry                                                                                                                                                                                               │
│     {                                                                                                                                                                                                           │
│         require(!this.getLock(), "POOL_LOCKED");                                                                                                                                                                │
│         chargeOutstandingAnnualizedFee();                                                                                                                                                                       │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply = LibERC20Storage.erc20Storage().totalSupply;                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 feeAmount = _amount.mul(bs.exitFee).div(10**18);                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenBalance = balance(address(token));                                                                                                                                                     │
│             // redeem less tokens if there is an exit fee                                                                                                                                                       │
│             uint256 tokenAmount =                                                                                                                                                                               │
│                 tokenBalance.mul(_amount.sub(feeAmount)).div(totalSupply);                                                                                                                                      │
│             require(                                                                                                                                                                                            │
│                 tokenBalance.sub(tokenAmount) >= MIN_AMOUNT,                                                                                                                                                    │
│                 "TOKEN_BALANCE_TOO_LOW"                                                                                                                                                                         │
│             );                                                                                                                                                                                                  │
│             token.safeTransfer(msg.sender, tokenAmount);                                                                                                                                                        │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // If there is any fee that should go to the beneficiary mint it                                                                                                                                        │
│         if (                                                                                                                                                                                                    │
│             feeAmount != 0 &&                                                                                                                                                                                   │
│             bs.exitFeeBeneficiaryShare != 0 &&                                                                                                                                                                  │
│             bs.feeBeneficiary != address(0)                                                                                                                                                                     │
│         ) {                                                                                                                                                                                                     │
│             uint256 feeBeneficiaryShare =                                                                                                                                                                       │
│                 feeAmount.mul(bs.exitFeeBeneficiaryShare).div(10**18);                                                                                                                                          │
│             if (feeBeneficiaryShare != 0) {                                                                                                                                                                     │
│                 LibERC20.mint(bs.feeBeneficiary, feeBeneficiaryShare);                                                                                                                                          │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         require(                                                                                                                                                                                                │
│             totalSupply.sub(_amount) >= MIN_AMOUNT,                                                                                                                                                             │
│             "POOL_TOKEN_BALANCE_TOO_LOW"                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│         LibERC20.burn(msg.sender, _amount);                                                                                                                                                                     │
│         emit PoolExited(msg.sender, _amount, _referral);                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: deposit/mint/add the liquidity pool/amount/share and set the total share to the number of first deposit when the supply/liquidity is 0                                                               │
│ Code:                                                                                                                                                                                                           │
│     function _exit(ExitTokenStructV2 calldata _exitTokenStruct) internal {                                                                                                                                      │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputBasket = IERC20(_exitTokenStruct.inputBasket);                                                                                                                                              │
│                                                                                                                                                                                                                 │
│         inputBasket.safeTransferFrom(                                                                                                                                                                           │
│             msg.sender,                                                                                                                                                                                         │
│             address(this),                                                                                                                                                                                      │
│             _exitTokenStruct.inputAmount                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         IBasketFacet(address(inputBasket)).exitPool(                                                                                                                                                            │
│             _exitTokenStruct.inputAmount,                                                                                                                                                                       │
│             _exitTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < _exitTokenStruct.trades.length; i++) {                                                                                                                                              │
│             ExitUnderlyingTrade calldata trade = _exitTokenStruct.trades;                                                                                                                                       │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 ExitUniswapV2SwapStruct calldata swap = trade.swaps;                                                                                                                                            │
│                 _maxApprove(IERC20(swap.path[0]), address(swap.exchange));                                                                                                                                      │
│                 IPangolinRouter(swap.exchange).swapExactTokensForTokens(                                                                                                                                        │
│                     IERC20(swap.path[0]).balanceOf(address(this)),                                                                                                                                              │
│                     0,                                                                                                                                                                                          │
│                     swap.path,                                                                                                                                                                                  │
│                     address(this),                                                                                                                                                                              │
│                     block.timestamp                                                                                                                                                                             │
│                 );                                                                                                                                                                                              │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
│     function exitPool(uint256 _amount, uint16 _referral)                                                                                                                                                        │
│         external                                                                                                                                                                                                │
│         virtual                                                                                                                                                                                                 │
│         override                                                                                                                                                                                                │
│         noReentry                                                                                                                                                                                               │
│     {                                                                                                                                                                                                           │
│         require(!this.getLock(), "POOL_LOCKED");                                                                                                                                                                │
│         chargeOutstandingAnnualizedFee();                                                                                                                                                                       │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply = LibERC20Storage.erc20Storage().totalSupply;                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 feeAmount = _amount.mul(bs.exitFee).div(10**18);                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenBalance = balance(address(token));                                                                                                                                                     │
│             // redeem less tokens if there is an exit fee                                                                                                                                                       │
│             uint256 tokenAmount =                                                                                                                                                                               │
│                 tokenBalance.mul(_amount.sub(feeAmount)).div(totalSupply);                                                                                                                                      │
│             require(                                                                                                                                                                                            │
│                 tokenBalance.sub(tokenAmount) >= MIN_AMOUNT,                                                                                                                                                    │
│                 "TOKEN_BALANCE_TOO_LOW"                                                                                                                                                                         │
│             );                                                                                                                                                                                                  │
│             token.safeTransfer(msg.sender, tokenAmount);                                                                                                                                                        │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // If there is any fee that should go to the beneficiary mint it                                                                                                                                        │
│         if (                                                                                                                                                                                                    │
│             feeAmount != 0 &&                                                                                                                                                                                   │
│             bs.exitFeeBeneficiaryShare != 0 &&                                                                                                                                                                  │
│             bs.feeBeneficiary != address(0)                                                                                                                                                                     │
│         ) {                                                                                                                                                                                                     │
│             uint256 feeBeneficiaryShare =                                                                                                                                                                       │
│                 feeAmount.mul(bs.exitFeeBeneficiaryShare).div(10**18);                                                                                                                                          │
│             if (feeBeneficiaryShare != 0) {                                                                                                                                                                     │
│                 LibERC20.mint(bs.feeBeneficiary, feeBeneficiaryShare);                                                                                                                                          │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         require(                                                                                                                                                                                                │
│             totalSupply.sub(_amount) >= MIN_AMOUNT,                                                                                                                                                             │
│             "POOL_TOKEN_BALANCE_TOO_LOW"                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│         LibERC20.burn(msg.sender, _amount);                                                                                                                                                                     │
│         emit PoolExited(msg.sender, _amount, _referral);                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ No                                                                                                                                                                                                              │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function exitEth(ExitTokenStruct calldata _exitTokenStruct) external {                                                                                                                                      │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputBasket = IERC20(_exitTokenStruct.inputBasket);                                                                                                                                              │
│                                                                                                                                                                                                                 │
│         inputBasket.safeTransferFrom(                                                                                                                                                                           │
│             msg.sender,                                                                                                                                                                                         │
│             address(this),                                                                                                                                                                                      │
│             _exitTokenStruct.inputAmount                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         IBasketFacet(address(inputBasket)).exitPool(                                                                                                                                                            │
│             _exitTokenStruct.inputAmount,                                                                                                                                                                       │
│             _exitTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         address[] memory tokens = IBasketFacet(address(inputBasket))                                                                                                                                            │
│             .getTokens();                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         address[] memory path = new address[](2);                                                                                                                                                               │
│         path[1] = address(INTERMEDIATE_TOKEN);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             path[0] = tokens;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             _maxApprove(IERC20(tokens), address(uniSwapLikeRouter));                                                                                                                                            │
│             uniSwapLikeRouter.swapExactTokensForTokens(                                                                                                                                                         │
│                 IERC20(tokens).balanceOf(address(this)),                                                                                                                                                        │
│                 0,                                                                                                                                                                                              │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _exitTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 intermediateTokenBalance = INTERMEDIATE_TOKEN.balanceOf(                                                                                                                                        │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         require(                                                                                                                                                                                                │
│             intermediateTokenBalance >= _exitTokenStruct.minAmount,                                                                                                                                             │
│             "Insufficient output"                                                                                                                                                                               │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         IWrappedNativeToken(address(INTERMEDIATE_TOKEN)).withdraw(                                                                                                                                              │
│             intermediateTokenBalance                                                                                                                                                                            │
│         );                                                                                                                                                                                                      │
│         msg.sender.transfer(intermediateTokenBalance);                                                                                                                                                          │
│     }                                                                                                                                                                                                           │
│     function exitPool(uint256 _amount, uint16 _referral)                                                                                                                                                        │
│         external                                                                                                                                                                                                │
│         virtual                                                                                                                                                                                                 │
│         override                                                                                                                                                                                                │
│         noReentry                                                                                                                                                                                               │
│     {                                                                                                                                                                                                           │
│         require(!this.getLock(), "POOL_LOCKED");                                                                                                                                                                │
│         chargeOutstandingAnnualizedFee();                                                                                                                                                                       │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply = LibERC20Storage.erc20Storage().totalSupply;                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 feeAmount = _amount.mul(bs.exitFee).div(10**18);                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenBalance = balance(address(token));                                                                                                                                                     │
│             // redeem less tokens if there is an exit fee                                                                                                                                                       │
│             uint256 tokenAmount =                                                                                                                                                                               │
│                 tokenBalance.mul(_amount.sub(feeAmount)).div(totalSupply);                                                                                                                                      │
│             require(                                                                                                                                                                                            │
│                 tokenBalance.sub(tokenAmount) >= MIN_AMOUNT,                                                                                                                                                    │
│                 "TOKEN_BALANCE_TOO_LOW"                                                                                                                                                                         │
│             );                                                                                                                                                                                                  │
│             token.safeTransfer(msg.sender, tokenAmount);                                                                                                                                                        │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // If there is any fee that should go to the beneficiary mint it                                                                                                                                        │
│         if (                                                                                                                                                                                                    │
│             feeAmount != 0 &&                                                                                                                                                                                   │
│             bs.exitFeeBeneficiaryShare != 0 &&                                                                                                                                                                  │
│             bs.feeBeneficiary != address(0)                                                                                                                                                                     │
│         ) {                                                                                                                                                                                                     │
│             uint256 feeBeneficiaryShare =                                                                                                                                                                       │
│                 feeAmount.mul(bs.exitFeeBeneficiaryShare).div(10**18);                                                                                                                                          │
│             if (feeBeneficiaryShare != 0) {                                                                                                                                                                     │
│                 LibERC20.mint(bs.feeBeneficiary, feeBeneficiaryShare);                                                                                                                                          │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         require(                                                                                                                                                                                                │
│             totalSupply.sub(_amount) >= MIN_AMOUNT,                                                                                                                                                             │
│             "POOL_TOKEN_BALANCE_TOO_LOW"                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│         LibERC20.burn(msg.sender, _amount);                                                                                                                                                                     │
│         emit PoolExited(msg.sender, _amount, _referral);                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: deposit/mint/add the liquidity pool/amount/share and set the total share to the number of first deposit when the supply/liquidity is 0                                                               │
│ Code:                                                                                                                                                                                                           │
│     function exitEth(ExitTokenStruct calldata _exitTokenStruct) external {                                                                                                                                      │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputBasket = IERC20(_exitTokenStruct.inputBasket);                                                                                                                                              │
│                                                                                                                                                                                                                 │
│         inputBasket.safeTransferFrom(                                                                                                                                                                           │
│             msg.sender,                                                                                                                                                                                         │
│             address(this),                                                                                                                                                                                      │
│             _exitTokenStruct.inputAmount                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         IBasketFacet(address(inputBasket)).exitPool(                                                                                                                                                            │
│             _exitTokenStruct.inputAmount,                                                                                                                                                                       │
│             _exitTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         address[] memory tokens = IBasketFacet(address(inputBasket))                                                                                                                                            │
│             .getTokens();                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         address[] memory path = new address[](2);                                                                                                                                                               │
│         path[1] = address(INTERMEDIATE_TOKEN);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             path[0] = tokens;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             _maxApprove(IERC20(tokens), address(uniSwapLikeRouter));                                                                                                                                            │
│             uniSwapLikeRouter.swapExactTokensForTokens(                                                                                                                                                         │
│                 IERC20(tokens).balanceOf(address(this)),                                                                                                                                                        │
│                 0,                                                                                                                                                                                              │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _exitTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 intermediateTokenBalance = INTERMEDIATE_TOKEN.balanceOf(                                                                                                                                        │
│             address(this)                                                                                                                                                                                       │
│         );                                                                                                                                                                                                      │
│         require(                                                                                                                                                                                                │
│             intermediateTokenBalance >= _exitTokenStruct.minAmount,                                                                                                                                             │
│             "Insufficient output"                                                                                                                                                                               │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         IWrappedNativeToken(address(INTERMEDIATE_TOKEN)).withdraw(                                                                                                                                              │
│             intermediateTokenBalance                                                                                                                                                                            │
│         );                                                                                                                                                                                                      │
│         msg.sender.transfer(intermediateTokenBalance);                                                                                                                                                          │
│     }                                                                                                                                                                                                           │
│     function exitPool(uint256 _amount, uint16 _referral)                                                                                                                                                        │
│         external                                                                                                                                                                                                │
│         virtual                                                                                                                                                                                                 │
│         override                                                                                                                                                                                                │
│         noReentry                                                                                                                                                                                               │
│     {                                                                                                                                                                                                           │
│         require(!this.getLock(), "POOL_LOCKED");                                                                                                                                                                │
│         chargeOutstandingAnnualizedFee();                                                                                                                                                                       │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply = LibERC20Storage.erc20Storage().totalSupply;                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 feeAmount = _amount.mul(bs.exitFee).div(10**18);                                                                                                                                                │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenBalance = balance(address(token));                                                                                                                                                     │
│             // redeem less tokens if there is an exit fee                                                                                                                                                       │
│             uint256 tokenAmount =                                                                                                                                                                               │
│                 tokenBalance.mul(_amount.sub(feeAmount)).div(totalSupply);                                                                                                                                      │
│             require(                                                                                                                                                                                            │
│                 tokenBalance.sub(tokenAmount) >= MIN_AMOUNT,                                                                                                                                                    │
│                 "TOKEN_BALANCE_TOO_LOW"                                                                                                                                                                         │
│             );                                                                                                                                                                                                  │
│             token.safeTransfer(msg.sender, tokenAmount);                                                                                                                                                        │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // If there is any fee that should go to the beneficiary mint it                                                                                                                                        │
│         if (                                                                                                                                                                                                    │
│             feeAmount != 0 &&                                                                                                                                                                                   │
│             bs.exitFeeBeneficiaryShare != 0 &&                                                                                                                                                                  │
│             bs.feeBeneficiary != address(0)                                                                                                                                                                     │
│         ) {                                                                                                                                                                                                     │
│             uint256 feeBeneficiaryShare =                                                                                                                                                                       │
│                 feeAmount.mul(bs.exitFeeBeneficiaryShare).div(10**18);                                                                                                                                          │
│             if (feeBeneficiaryShare != 0) {                                                                                                                                                                     │
│                 LibERC20.mint(bs.feeBeneficiary, feeBeneficiaryShare);                                                                                                                                          │
│             }                                                                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         require(                                                                                                                                                                                                │
│             totalSupply.sub(_amount) >= MIN_AMOUNT,                                                                                                                                                             │
│             "POOL_TOKEN_BALANCE_TOO_LOW"                                                                                                                                                                        │
│         );                                                                                                                                                                                                      │
│         LibERC20.burn(msg.sender, _amount);                                                                                                                                                                     │
│         emit PoolExited(msg.sender, _amount, _referral);                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ No                                                                                                                                                                                                              │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function calcOutStandingAnnualizedFee()                                                                                                                                                                     │
│         public                                                                                                                                                                                                  │
│         view                                                                                                                                                                                                    │
│         override                                                                                                                                                                                                │
│         returns (uint256)                                                                                                                                                                                       │
│     {                                                                                                                                                                                                           │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply = LibERC20Storage.erc20Storage().totalSupply;                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 lastFeeClaimed = bs.lastAnnualizedFeeClaimed;                                                                                                                                                   │
│         uint256 annualizedFee = bs.annualizedFee;                                                                                                                                                               │
│                                                                                                                                                                                                                 │
│         if (                                                                                                                                                                                                    │
│             annualizedFee == 0 ||                                                                                                                                                                               │
│             bs.feeBeneficiary == address(0) ||                                                                                                                                                                  │
│             lastFeeClaimed == 0                                                                                                                                                                                 │
│         ) {                                                                                                                                                                                                     │
│             return 0;                                                                                                                                                                                           │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 timePassed = block.timestamp.sub(lastFeeClaimed);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│         return                                                                                                                                                                                                  │
│             totalSupply.mul(annualizedFee).div(10**18).mul(timePassed).div(                                                                                                                                     │
│                 365 days                                                                                                                                                                                        │
│             );                                                                                                                                                                                                  │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function chargeOutstandingAnnualizedFee() public override {                                                                                                                                                 │
│         uint256 outStandingFee = calcOutStandingAnnualizedFee();                                                                                                                                                │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│         bs.lastAnnualizedFeeClaimed = block.timestamp;                                                                                                                                                          │
│                                                                                                                                                                                                                 │
│         // if there is any fee to mint and the beneficiary is set                                                                                                                                               │
│         // note: feeBeneficiary is already checked in calc function                                                                                                                                             │
│         if (outStandingFee != 0) {                                                                                                                                                                              │
│             LibERC20.mint(bs.feeBeneficiary, outStandingFee);                                                                                                                                                   │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         emit FeeCharged(outStandingFee);                                                                                                                                                                        │
│     }                                                                                                                                                                                                           │
│     function calcOutStandingAnnualizedFee()                                                                                                                                                                     │
│         public                                                                                                                                                                                                  │
│         view                                                                                                                                                                                                    │
│         override                                                                                                                                                                                                │
│         returns (uint256)                                                                                                                                                                                       │
│     {                                                                                                                                                                                                           │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply = LibERC20Storage.erc20Storage().totalSupply;                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 lastFeeClaimed = bs.lastAnnualizedFeeClaimed;                                                                                                                                                   │
│         uint256 annualizedFee = bs.annualizedFee;                                                                                                                                                               │
│                                                                                                                                                                                                                 │
│         if (                                                                                                                                                                                                    │
│             annualizedFee == 0 ||                                                                                                                                                                               │
│             bs.feeBeneficiary == address(0) ||                                                                                                                                                                  │
│             lastFeeClaimed == 0                                                                                                                                                                                 │
│         ) {                                                                                                                                                                                                     │
│             return 0;                                                                                                                                                                                           │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 timePassed = block.timestamp.sub(lastFeeClaimed);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│         return                                                                                                                                                                                                  │
│             totalSupply.mul(annualizedFee).div(10**18).mul(timePassed).div(                                                                                                                                     │
│                 365 days                                                                                                                                                                                        │
│             );                                                                                                                                                                                                  │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function calcTokensForAmount(uint256 _amount)                                                                                                                                                               │
│         external                                                                                                                                                                                                │
│         view                                                                                                                                                                                                    │
│         override                                                                                                                                                                                                │
│         returns (address[] memory tokens, uint256[] memory amounts)                                                                                                                                             │
│     {                                                                                                                                                                                                           │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply =                                                                                                                                                                                   │
│             LibERC20Storage.erc20Storage().totalSupply.add(                                                                                                                                                     │
│                 calcOutStandingAnnualizedFee()                                                                                                                                                                  │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         tokens = new address[](bs.tokens.length);                                                                                                                                                               │
│         amounts = new uint256[](bs.tokens.length);                                                                                                                                                              │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenBalance = balance(address(token));                                                                                                                                                     │
│             uint256 tokenAmount = tokenBalance.mul(_amount).div(totalSupply);                                                                                                                                   │
│             // Add entry fee                                                                                                                                                                                    │
│             tokenAmount = tokenAmount.add(                                                                                                                                                                      │
│                 tokenAmount.mul(bs.entryFee).div(10**18)                                                                                                                                                        │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             tokens = address(token);                                                                                                                                                                            │
│             amounts = tokenAmount;                                                                                                                                                                              │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         return (tokens, amounts);                                                                                                                                                                               │
│     }                                                                                                                                                                                                           │
│     function calcOutStandingAnnualizedFee()                                                                                                                                                                     │
│         public                                                                                                                                                                                                  │
│         view                                                                                                                                                                                                    │
│         override                                                                                                                                                                                                │
│         returns (uint256)                                                                                                                                                                                       │
│     {                                                                                                                                                                                                           │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply = LibERC20Storage.erc20Storage().totalSupply;                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 lastFeeClaimed = bs.lastAnnualizedFeeClaimed;                                                                                                                                                   │
│         uint256 annualizedFee = bs.annualizedFee;                                                                                                                                                               │
│                                                                                                                                                                                                                 │
│         if (                                                                                                                                                                                                    │
│             annualizedFee == 0 ||                                                                                                                                                                               │
│             bs.feeBeneficiary == address(0) ||                                                                                                                                                                  │
│             lastFeeClaimed == 0                                                                                                                                                                                 │
│         ) {                                                                                                                                                                                                     │
│             return 0;                                                                                                                                                                                           │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 timePassed = block.timestamp.sub(lastFeeClaimed);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│         return                                                                                                                                                                                                  │
│             totalSupply.mul(annualizedFee).div(10**18).mul(timePassed).div(                                                                                                                                     │
│                 365 days                                                                                                                                                                                        │
│             );                                                                                                                                                                                                  │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function calcTokensForAmountExit(uint256 _amount)                                                                                                                                                           │
│         external                                                                                                                                                                                                │
│         view                                                                                                                                                                                                    │
│         override                                                                                                                                                                                                │
│         returns (address[] memory tokens, uint256[] memory amounts)                                                                                                                                             │
│     {                                                                                                                                                                                                           │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 feeAmount = _amount.mul(bs.exitFee).div(10**18);                                                                                                                                                │
│         uint256 totalSupply =                                                                                                                                                                                   │
│             LibERC20Storage.erc20Storage().totalSupply.add(                                                                                                                                                     │
│                 calcOutStandingAnnualizedFee()                                                                                                                                                                  │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         tokens = new address[](bs.tokens.length);                                                                                                                                                               │
│         amounts = new uint256[](bs.tokens.length);                                                                                                                                                              │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenBalance = balance(address(token));                                                                                                                                                     │
│             uint256 tokenAmount =                                                                                                                                                                               │
│                 tokenBalance.mul(_amount.sub(feeAmount)).div(totalSupply);                                                                                                                                      │
│                                                                                                                                                                                                                 │
│             tokens = address(token);                                                                                                                                                                            │
│             amounts = tokenAmount;                                                                                                                                                                              │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         return (tokens, amounts);                                                                                                                                                                               │
│     }                                                                                                                                                                                                           │
│     function calcOutStandingAnnualizedFee()                                                                                                                                                                     │
│         public                                                                                                                                                                                                  │
│         view                                                                                                                                                                                                    │
│         override                                                                                                                                                                                                │
│         returns (uint256)                                                                                                                                                                                       │
│     {                                                                                                                                                                                                           │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply = LibERC20Storage.erc20Storage().totalSupply;                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 lastFeeClaimed = bs.lastAnnualizedFeeClaimed;                                                                                                                                                   │
│         uint256 annualizedFee = bs.annualizedFee;                                                                                                                                                               │
│                                                                                                                                                                                                                 │
│         if (                                                                                                                                                                                                    │
│             annualizedFee == 0 ||                                                                                                                                                                               │
│             bs.feeBeneficiary == address(0) ||                                                                                                                                                                  │
│             lastFeeClaimed == 0                                                                                                                                                                                 │
│         ) {                                                                                                                                                                                                     │
│             return 0;                                                                                                                                                                                           │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         uint256 timePassed = block.timestamp.sub(lastFeeClaimed);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│         return                                                                                                                                                                                                  │
│             totalSupply.mul(annualizedFee).div(10**18).mul(timePassed).div(                                                                                                                                     │
│                 365 days                                                                                                                                                                                        │
│             );                                                                                                                                                                                                  │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function calcTokensForAmount(uint256 _amount)                                                                                                                                                               │
│         external                                                                                                                                                                                                │
│         view                                                                                                                                                                                                    │
│         override                                                                                                                                                                                                │
│         returns (address[] memory tokens, uint256[] memory amounts)                                                                                                                                             │
│     {                                                                                                                                                                                                           │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply =                                                                                                                                                                                   │
│             LibERC20Storage.erc20Storage().totalSupply.add(                                                                                                                                                     │
│                 calcOutStandingAnnualizedFee()                                                                                                                                                                  │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         tokens = new address[](bs.tokens.length);                                                                                                                                                               │
│         amounts = new uint256[](bs.tokens.length);                                                                                                                                                              │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenBalance = balance(address(token));                                                                                                                                                     │
│             uint256 tokenAmount = tokenBalance.mul(_amount).div(totalSupply);                                                                                                                                   │
│             // Add entry fee                                                                                                                                                                                    │
│             tokenAmount = tokenAmount.add(                                                                                                                                                                      │
│                 tokenAmount.mul(bs.entryFee).div(10**18)                                                                                                                                                        │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             tokens = address(token);                                                                                                                                                                            │
│             amounts = tokenAmount;                                                                                                                                                                              │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         return (tokens, amounts);                                                                                                                                                                               │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStruct calldata _joinTokenStruct)                                                                                                                                        │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         (address[] memory tokens, uint256[] memory amounts) = IBasketFacet(                                                                                                                                     │
│             _joinTokenStruct.outputBasket                                                                                                                                                                       │
│         ).calcTokensForAmount(_joinTokenStruct.outputAmount);                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│         // ######## SWAP TOKEN #########                                                                                                                                                                        │
│         address[] memory path = new address[](2);                                                                                                                                                               │
│         if (_joinTokenStruct.inputToken != address(INTERMEDIATE_TOKEN)) {                                                                                                                                       │
│             _maxApprove(inputToken, address(uniSwapLikeRouter));                                                                                                                                                │
│                                                                                                                                                                                                                 │
│             path[0] = _joinTokenStruct.inputToken;                                                                                                                                                              │
│             path[1] = address(INTERMEDIATE_TOKEN);                                                                                                                                                              │
│             uint256[] memory amountsOut = uniSwapLikeRouter.getAmountsOut(                                                                                                                                      │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapExactTokensForTokens(                                                                                                                                                         │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 amountsOut,                                                                                                                                                                                     │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         path[0] = address(INTERMEDIATE_TOKEN);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         _maxApprove(INTERMEDIATE_TOKEN, address(uniSwapLikeRouter));                                                                                                                                            │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             path[1] = tokens;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             uint256[] memory amountsIn = uniSwapLikeRouter.getAmountsIn(                                                                                                                                        │
│                 amounts,                                                                                                                                                                                        │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapTokensForExactTokens(                                                                                                                                                         │
│                 amounts,                                                                                                                                                                                        │
│                 amountsIn[0],                                                                                                                                                                                   │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
│     function calcTokensForAmount(uint256 _amount)                                                                                                                                                               │
│         external                                                                                                                                                                                                │
│         view                                                                                                                                                                                                    │
│         override                                                                                                                                                                                                │
│         returns (address[] memory tokens, uint256[] memory amounts)                                                                                                                                             │
│     {                                                                                                                                                                                                           │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply =                                                                                                                                                                                   │
│             LibERC20Storage.erc20Storage().totalSupply.add(                                                                                                                                                     │
│                 calcOutStandingAnnualizedFee()                                                                                                                                                                  │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         tokens = new address[](bs.tokens.length);                                                                                                                                                               │
│         amounts = new uint256[](bs.tokens.length);                                                                                                                                                              │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenBalance = balance(address(token));                                                                                                                                                     │
│             uint256 tokenAmount = tokenBalance.mul(_amount).div(totalSupply);                                                                                                                                   │
│             // Add entry fee                                                                                                                                                                                    │
│             tokenAmount = tokenAmount.add(                                                                                                                                                                      │
│                 tokenAmount.mul(bs.entryFee).div(10**18)                                                                                                                                                        │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             tokens = address(token);                                                                                                                                                                            │
│             amounts = tokenAmount;                                                                                                                                                                              │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         return (tokens, amounts);                                                                                                                                                                               │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: deposit/mint/add the liquidity pool/amount/share and set the total share to the number of first deposit when the supply/liquidity is 0                                                               │
│ Code:                                                                                                                                                                                                           │
│     function _joinTokenSingle(JoinTokenStruct calldata _joinTokenStruct)                                                                                                                                        │
│         internal                                                                                                                                                                                                │
│     {                                                                                                                                                                                                           │
│         // ######## INIT TOKEN #########                                                                                                                                                                        │
│         IERC20 inputToken = IERC20(_joinTokenStruct.inputToken);                                                                                                                                                │
│         IERC20 outputToken = IERC20(_joinTokenStruct.outputBasket);                                                                                                                                             │
│                                                                                                                                                                                                                 │
│         (address[] memory tokens, uint256[] memory amounts) = IBasketFacet(                                                                                                                                     │
│             _joinTokenStruct.outputBasket                                                                                                                                                                       │
│         ).calcTokensForAmount(_joinTokenStruct.outputAmount);                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│         // ######## SWAP TOKEN #########                                                                                                                                                                        │
│         address[] memory path = new address[](2);                                                                                                                                                               │
│         if (_joinTokenStruct.inputToken != address(INTERMEDIATE_TOKEN)) {                                                                                                                                       │
│             _maxApprove(inputToken, address(uniSwapLikeRouter));                                                                                                                                                │
│                                                                                                                                                                                                                 │
│             path[0] = _joinTokenStruct.inputToken;                                                                                                                                                              │
│             path[1] = address(INTERMEDIATE_TOKEN);                                                                                                                                                              │
│             uint256[] memory amountsOut = uniSwapLikeRouter.getAmountsOut(                                                                                                                                      │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapExactTokensForTokens(                                                                                                                                                         │
│                 _joinTokenStruct.inputAmount,                                                                                                                                                                   │
│                 amountsOut,                                                                                                                                                                                     │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         path[0] = address(INTERMEDIATE_TOKEN);                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         _maxApprove(INTERMEDIATE_TOKEN, address(uniSwapLikeRouter));                                                                                                                                            │
│         for (uint256 i; i < tokens.length; i++) {                                                                                                                                                               │
│             path[1] = tokens;                                                                                                                                                                                   │
│                                                                                                                                                                                                                 │
│             uint256[] memory amountsIn = uniSwapLikeRouter.getAmountsIn(                                                                                                                                        │
│                 amounts,                                                                                                                                                                                        │
│                 path                                                                                                                                                                                            │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             uniSwapLikeRouter.swapTokensForExactTokens(                                                                                                                                                         │
│                 amounts,                                                                                                                                                                                        │
│                 amountsIn[0],                                                                                                                                                                                   │
│                 path,                                                                                                                                                                                           │
│                 address(this),                                                                                                                                                                                  │
│                 _joinTokenStruct.deadline                                                                                                                                                                       │
│             );                                                                                                                                                                                                  │
│             _maxApprove(IERC20(tokens), _joinTokenStruct.outputBasket);                                                                                                                                         │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         IBasketFacet(_joinTokenStruct.outputBasket).joinPool(                                                                                                                                                   │
│             _joinTokenStruct.outputAmount,                                                                                                                                                                      │
│             _joinTokenStruct.referral                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // ######## SEND TOKEN #########                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│         uint256 outputAmount = outputToken.balanceOf(address(this));                                                                                                                                            │
│         require(                                                                                                                                                                                                │
│             outputAmount == _joinTokenStruct.outputAmount,                                                                                                                                                      │
│             "FAILED_OUTPUT_AMOUNT"                                                                                                                                                                              │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         outputToken.safeTransfer(msg.sender, outputAmount);                                                                                                                                                     │
│     }                                                                                                                                                                                                           │
│     function calcTokensForAmount(uint256 _amount)                                                                                                                                                               │
│         external                                                                                                                                                                                                │
│         view                                                                                                                                                                                                    │
│         override                                                                                                                                                                                                │
│         returns (address[] memory tokens, uint256[] memory amounts)                                                                                                                                             │
│     {                                                                                                                                                                                                           │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 totalSupply =                                                                                                                                                                                   │
│             LibERC20Storage.erc20Storage().totalSupply.add(                                                                                                                                                     │
│                 calcOutStandingAnnualizedFee()                                                                                                                                                                  │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         tokens = new address[](bs.tokens.length);                                                                                                                                                               │
│         amounts = new uint256[](bs.tokens.length);                                                                                                                                                              │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenBalance = balance(address(token));                                                                                                                                                     │
│             uint256 tokenAmount = tokenBalance.mul(_amount).div(totalSupply);                                                                                                                                   │
│             // Add entry fee                                                                                                                                                                                    │
│             tokenAmount = tokenAmount.add(                                                                                                                                                                      │
│                 tokenAmount.mul(bs.entryFee).div(10**18)                                                                                                                                                        │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             tokens = address(token);                                                                                                                                                                            │
│             amounts = tokenAmount;                                                                                                                                                                              │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         return (tokens, amounts);                                                                                                                                                                               │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Yes                                                                                                                                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ deposit/mint/add the liquidity pool/amount/share                                                                                                                                                                │
│ Code:                                                                                                                                                                                                           │
│     function calcTokensForAmountExit(uint256 _amount)                                                                                                                                                           │
│         external                                                                                                                                                                                                │
│         view                                                                                                                                                                                                    │
│         override                                                                                                                                                                                                │
│         returns (address[] memory tokens, uint256[] memory amounts)                                                                                                                                             │
│     {                                                                                                                                                                                                           │
│         LibBasketStorage.BasketStorage storage bs =                                                                                                                                                             │
│             LibBasketStorage.basketStorage();                                                                                                                                                                   │
│         uint256 feeAmount = _amount.mul(bs.exitFee).div(10**18);                                                                                                                                                │
│         uint256 totalSupply =                                                                                                                                                                                   │
│             LibERC20Storage.erc20Storage().totalSupply.add(                                                                                                                                                     │
│                 calcOutStandingAnnualizedFee()                                                                                                                                                                  │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         tokens = new address[](bs.tokens.length);                                                                                                                                                               │
│         amounts = new uint256[](bs.tokens.length);                                                                                                                                                              │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < bs.tokens.length; i++) {                                                                                                                                                            │
│             IERC20 token = bs.tokens;                                                                                                                                                                           │
│             uint256 tokenBalance = balance(address(token));                                                                                                                                                     │
│             uint256 tokenAmount =                                                                                                                                                                               │
│                 tokenBalance.mul(_amount.sub(feeAmount)).div(totalSupply);                                                                                                                                      │
│                                                                                                                                                                                                                 │
│             tokens = address(token);                                                                                                                                                                            │
│             amounts = tokenAmount;                                                                                                                                                                              │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         return (tokens, amounts);                                                                                                                                                                               │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have inside code statements that update/accrue interest/exchange rate,                                                                                                                               │
│ Code:                                                                                                                                                                                                           │
│     function _swapUniswapV3(                                                                                                                                                                                    │
│         UniswapV3SwapStruct calldata swap,                                                                                                                                                                      │
│         address recipient,                                                                                                                                                                                      │
│         uint256 deadline                                                                                                                                                                                        │
│     ) internal {                                                                                                                                                                                                │
│         if (                                                                                                                                                                                                    │
│             IERC20(swap.tokenIn).allowance(address(basket), swap.exchange) <                                                                                                                                    │
│             swap.quantity                                                                                                                                                                                       │
│         ) {                                                                                                                                                                                                     │
│             basket.singleCall(                                                                                                                                                                                  │
│                 swap.tokenIn,                                                                                                                                                                                   │
│                 abi.encodeWithSelector(                                                                                                                                                                         │
│                     IERC20(swap.tokenIn).approve.selector,                                                                                                                                                      │
│                     address(swap.exchange),                                                                                                                                                                     │
│                     uint256(-1)                                                                                                                                                                                 │
│                 ),                                                                                                                                                                                              │
│                 0                                                                                                                                                                                               │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│         ISwapRouter.ExactInputParams memory params = ISwapRouter                                                                                                                                                │
│             .ExactInputParams(                                                                                                                                                                                  │
│                 swap.path,                                                                                                                                                                                      │
│                 recipient,                                                                                                                                                                                      │
│                 deadline,                                                                                                                                                                                       │
│                 swap.quantity,                                                                                                                                                                                  │
│                 swap.minReturn                                                                                                                                                                                  │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│         // Swap on uniswapV3                                                                                                                                                                                    │
│         // uniswapV3.exactInputSingle(params);                                                                                                                                                                  │
│         basket.singleCall(                                                                                                                                                                                      │
│             address(swap.exchange),                                                                                                                                                                             │
│             abi.encodeWithSelector(                                                                                                                                                                             │
│                 ISwapRouter(swap.exchange).exactInput.selector,                                                                                                                                                 │
│                 params                                                                                                                                                                                          │
│             ),                                                                                                                                                                                                  │
│             0                                                                                                                                                                                                   │
│         );                                                                                                                                                                                                      │
│         emit Swaped(                                                                                                                                                                                            │
│             address(basket),                                                                                                                                                                                    │
│             swap.tokenIn,                                                                                                                                                                                       │
│             swap.tokenOut,                                                                                                                                                                                      │
│             swap.quantity,                                                                                                                                                                                      │
│             swap.minReturn                                                                                                                                                                                      │
│         );                                                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have inside code statements that update/accrue interest/exchange rate,                                                                                                                               │
│ Code:                                                                                                                                                                                                           │
│     function _swapUniswapV2(                                                                                                                                                                                    │
│         UniswapV2SwapStruct calldata swap,                                                                                                                                                                      │
│         address recipient,                                                                                                                                                                                      │
│         uint256 deadline                                                                                                                                                                                        │
│     ) internal {                                                                                                                                                                                                │
│         if (                                                                                                                                                                                                    │
│             IERC20(swap.path[0]).allowance(address(basket), swap.exchange) <                                                                                                                                    │
│             swap.quantity                                                                                                                                                                                       │
│         ) {                                                                                                                                                                                                     │
│             basket.singleCall(                                                                                                                                                                                  │
│                 swap.path[0],                                                                                                                                                                                   │
│                 abi.encodeWithSelector(                                                                                                                                                                         │
│                     IERC20(swap.path[0]).approve.selector,                                                                                                                                                      │
│                     address(swap.exchange),                                                                                                                                                                     │
│                     uint256(-1)                                                                                                                                                                                 │
│                 ),                                                                                                                                                                                              │
│                 0                                                                                                                                                                                               │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│         // Swap on exchange                                                                                                                                                                                     │
│         // exchange.swapExactTokensForTokens(amount, minReturnAmount, path, recipient, deadline);                                                                                                               │
│         basket.singleCall(                                                                                                                                                                                      │
│             swap.exchange,                                                                                                                                                                                      │
│             abi.encodeWithSelector(                                                                                                                                                                             │
│                 IUniswapV2Router02(swap.exchange)                                                                                                                                                               │
│                     .swapExactTokensForTokens                                                                                                                                                                   │
│                     .selector,                                                                                                                                                                                  │
│                 swap.quantity,                                                                                                                                                                                  │
│                 swap.minReturn,                                                                                                                                                                                 │
│                 swap.path,                                                                                                                                                                                      │
│                 recipient,                                                                                                                                                                                      │
│                 deadline                                                                                                                                                                                        │
│             ),                                                                                                                                                                                                  │
│             0                                                                                                                                                                                                   │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         emit Swaped(                                                                                                                                                                                            │
│             address(basket),                                                                                                                                                                                    │
│             swap.path[0],                                                                                                                                                                                       │
│             swap.path,                                                                                                                                                                                          │
│             swap.quantity,                                                                                                                                                                                      │
│             swap.minReturn                                                                                                                                                                                      │
│         );                                                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have inside code statements that update/accrue interest/exchange rate,                                                                                                                               │
│ Code:                                                                                                                                                                                                           │
│     function rebalance(                                                                                                                                                                                         │
│         UniswapV2SwapStruct[] calldata _swapsV2,                                                                                                                                                                │
│         UniswapV3SwapStruct[] calldata _swapsV3,                                                                                                                                                                │
│         uint256 _deadline                                                                                                                                                                                       │
│     ) external override onlyRebalanceManager {                                                                                                                                                                  │
│         lockBasketData(block.number + 30);                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // remove token from array                                                                                                                                                                              │
│         for (uint256 i; i < _swapsV2.length; i++) {                                                                                                                                                             │
│             require(                                                                                                                                                                                            │
│                 exchanges[_swapsV2.exchange] == ExchangeType.UniswapV2,                                                                                                                                         │
│                 "NOT_UNISWAP_V2"                                                                                                                                                                                │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             //swap token                                                                                                                                                                                        │
│             _swapUniswapV2(_swapsV2, address(basket), _deadline);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│             //add to token if missing                                                                                                                                                                           │
│             addToken(_swapsV2.path[_swapsV2.path.length - 1]);                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             //remove from token if resulting quantity is 0                                                                                                                                                      │
│             removeToken(_swapsV2.path[0]);                                                                                                                                                                      │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < _swapsV3.length; i++) {                                                                                                                                                             │
│             require(                                                                                                                                                                                            │
│                 exchanges[_swapsV3.exchange] == ExchangeType.UniswapV3,                                                                                                                                         │
│                 "NOT_UNISWAP_V3"                                                                                                                                                                                │
│             );                                                                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             //swap token                                                                                                                                                                                        │
│             _swapUniswapV3(_swapsV3, address(basket), _deadline);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│             //add to token if missing                                                                                                                                                                           │
│             addToken(_swapsV3.tokenOut);                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│             //remove from token if resulting quantity is 0                                                                                                                                                      │
│             removeToken(_swapsV3.tokenIn);                                                                                                                                                                      │
│         }                                                                                                                                                                                                       │
│         emit Rebalanced(address(basket));                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have inside code statements that update/accrue interest/exchange rate,                                                                                                                               │
│ Code:                                                                                                                                                                                                           │
│     function _swapUniswapV2(                                                                                                                                                                                    │
│         address exchange,                                                                                                                                                                                       │
│         uint256 quantity,                                                                                                                                                                                       │
│         uint256 minReturn,                                                                                                                                                                                      │
│         address[] calldata path,                                                                                                                                                                                │
│         address recipient,                                                                                                                                                                                      │
│         uint256 deadline                                                                                                                                                                                        │
│     ) internal {                                                                                                                                                                                                │
│         if (IERC20(path[0]).allowance(address(basket), exchange) < quantity) {                                                                                                                                  │
│             basket.singleCall(                                                                                                                                                                                  │
│                 path[0],                                                                                                                                                                                        │
│                 abi.encodeWithSelector(                                                                                                                                                                         │
│                     IERC20(path[0]).approve.selector,                                                                                                                                                           │
│                     address(exchange),                                                                                                                                                                          │
│                     uint256(-1)                                                                                                                                                                                 │
│                 ),                                                                                                                                                                                              │
│                 0                                                                                                                                                                                               │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         // Swap on exchange                                                                                                                                                                                     │
│         basket.singleCall(                                                                                                                                                                                      │
│             exchange,                                                                                                                                                                                           │
│             abi.encodeWithSelector(                                                                                                                                                                             │
│                 IUniswapV2Router02(exchange).swapExactTokensForTokens.selector,                                                                                                                                 │
│                 quantity,                                                                                                                                                                                       │
│                 minReturn,                                                                                                                                                                                      │
│                 path,                                                                                                                                                                                           │
│                 recipient,                                                                                                                                                                                      │
│                 deadline                                                                                                                                                                                        │
│             ),                                                                                                                                                                                                  │
│             0                                                                                                                                                                                                   │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         emit Swaped(                                                                                                                                                                                            │
│             address(basket),                                                                                                                                                                                    │
│             path[0],                                                                                                                                                                                            │
│             path,                                                                                                                                                                                               │
│             quantity,                                                                                                                                                                                           │
│             minReturn                                                                                                                                                                                           │
│         );                                                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have code statements that get or calculate LP token's value/price                                                                                                                                    │
│ have inside code statements that update/accrue interest/exchange rate,                                                                                                                                          │
│ Code:                                                                                                                                                                                                           │
│     function rebalance(UnderlyingTrade[] calldata _swapsV2, uint256 _deadline)                                                                                                                                  │
│         external                                                                                                                                                                                                │
│         override                                                                                                                                                                                                │
│         onlyRebalanceManager                                                                                                                                                                                    │
│     {                                                                                                                                                                                                           │
│         require(basket.getLock(), "REQUIRE_LOCK");                                                                                                                                                              │
│         lockBasketData(block.number + 30);                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         for (uint256 i; i < _swapsV2.length; i++) {                                                                                                                                                             │
│             UnderlyingTrade calldata trade = _swapsV2;                                                                                                                                                          │
│             uint256 input = trade.quantity;                                                                                                                                                                     │
│             address targetToken = trade.swaps[0].path[0];                                                                                                                                                       │
│             //internal trades                                                                                                                                                                                   │
│             for (uint256 j; j < trade.swaps.length; j++) {                                                                                                                                                      │
│                 UniswapV2SwapStruct calldata swap = trade.swaps;                                                                                                                                                │
│                 require(exchanges, "INVALID_EXCHANGE");                                                                                                                                                         │
│                 require(targetToken == swap.path[0], "INVALID_INPUT_TOKEN");                                                                                                                                    │
│                 targetToken = swap.path;                                                                                                                                                                        │
│                                                                                                                                                                                                                 │
│                 uint256 oldBalance = IERC20(targetToken).balanceOf(                                                                                                                                             │
│                     address(basket)                                                                                                                                                                             │
│                 );                                                                                                                                                                                              │
│                 //swap token                                                                                                                                                                                    │
│                 _swapUniswapV2(                                                                                                                                                                                 │
│                     swap.exchange,                                                                                                                                                                              │
│                     input,                                                                                                                                                                                      │
│                     0,                                                                                                                                                                                          │
│                     swap.path,                                                                                                                                                                                  │
│                     address(basket),                                                                                                                                                                            │
│                     _deadline                                                                                                                                                                                   │
│                 );                                                                                                                                                                                              │
│                 //The output of this trade is the input for the next trade                                                                                                                                      │
│                 input =                                                                                                                                                                                         │
│                     IERC20(targetToken).balanceOf(address(basket)) -                                                                                                                                            │
│                     oldBalance;                                                                                                                                                                                 │
│             }                                                                                                                                                                                                   │
│             require(trade.minimumReturn <= input, "INSUFFICIENT_OUTPUT_AMOUNT");                                                                                                                                │
│             //add to token if missing                                                                                                                                                                           │
│             UniswapV2SwapStruct calldata toAdd = trade.swaps[                                                                                                                                                   │
│                 trade.swaps.length - 1                                                                                                                                                                          │
│             ];                                                                                                                                                                                                  │
│             addToken(toAdd.path);                                                                                                                                                                               │
│                                                                                                                                                                                                                 │
│             //remove from token if resulting quantity is 0                                                                                                                                                      │
│             removeToken(trade.swaps[0].path[0]);                                                                                                                                                                │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         emit Rebalanced(address(basket));                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No",                                                                                                                                                                                                  │
│     "2": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have inside code statements that update/accrue interest/exchange rate,                                                                                                                               │
│ Code:                                                                                                                                                                                                           │
│     function _swapUniswapV2(                                                                                                                                                                                    │
│         UniswapV2SwapStruct calldata swap,                                                                                                                                                                      │
│         address recipient,                                                                                                                                                                                      │
│         uint256 deadline                                                                                                                                                                                        │
│     ) internal {                                                                                                                                                                                                │
│         if (                                                                                                                                                                                                    │
│             IERC20(swap.path[0]).allowance(address(basket), swap.exchange) <                                                                                                                                    │
│             swap.quantity                                                                                                                                                                                       │
│         ) {                                                                                                                                                                                                     │
│             basket.singleCall(                                                                                                                                                                                  │
│                 swap.path[0],                                                                                                                                                                                   │
│                 abi.encodeWithSelector(                                                                                                                                                                         │
│                     IERC20(swap.path[0]).approve.selector,                                                                                                                                                      │
│                     address(swap.exchange),                                                                                                                                                                     │
│                     uint256(-1)                                                                                                                                                                                 │
│                 ),                                                                                                                                                                                              │
│                 0                                                                                                                                                                                               │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│         // Swap on exchange                                                                                                                                                                                     │
│         // exchange.swapExactTokensForTokens(amount, minReturnAmount, path, recipient, deadline);                                                                                                               │
│         basket.singleCall(                                                                                                                                                                                      │
│             swap.exchange,                                                                                                                                                                                      │
│             abi.encodeWithSelector(                                                                                                                                                                             │
│                 IUniswapV2Router02(swap.exchange)                                                                                                                                                               │
│                     .swapExactTokensForTokens                                                                                                                                                                   │
│                     .selector,                                                                                                                                                                                  │
│                 swap.quantity,                                                                                                                                                                                  │
│                 swap.minReturn,                                                                                                                                                                                 │
│                 swap.path,                                                                                                                                                                                      │
│                 recipient,                                                                                                                                                                                      │
│                 deadline                                                                                                                                                                                        │
│             ),                                                                                                                                                                                                  │
│             0                                                                                                                                                                                                   │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         emit Swaped(                                                                                                                                                                                            │
│             address(basket),                                                                                                                                                                                    │
│             swap.path[0],                                                                                                                                                                                       │
│             swap.path,                                                                                                                                                                                          │
│             swap.quantity,                                                                                                                                                                                      │
│             swap.minReturn                                                                                                                                                                                      │
│         );                                                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "Yes"                                                                                                                                                                                                  │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭──────────────────────────────────────────────────────────────────────────────────────────── Single Choice Scenario ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have inside code statements that update/accrue interest/exchange rate, and have inside code statements that calculate/assign/distribute the balance/share/stake/fee/loan/reward                      │
│ Code:                                                                                                                                                                                                           │
│     function _swapUniswapV2(                                                                                                                                                                                    │
│         UniswapV2SwapStruct calldata swap,                                                                                                                                                                      │
│         address recipient,                                                                                                                                                                                      │
│         uint256 deadline                                                                                                                                                                                        │
│     ) internal {                                                                                                                                                                                                │
│         if (                                                                                                                                                                                                    │
│             IERC20(swap.path[0]).allowance(address(basket), swap.exchange) <                                                                                                                                    │
│             swap.quantity                                                                                                                                                                                       │
│         ) {                                                                                                                                                                                                     │
│             basket.singleCall(                                                                                                                                                                                  │
│                 swap.path[0],                                                                                                                                                                                   │
│                 abi.encodeWithSelector(                                                                                                                                                                         │
│                     IERC20(swap.path[0]).approve.selector,                                                                                                                                                      │
│                     address(swap.exchange),                                                                                                                                                                     │
│                     uint256(-1)                                                                                                                                                                                 │
│                 ),                                                                                                                                                                                              │
│                 0                                                                                                                                                                                               │
│             );                                                                                                                                                                                                  │
│         }                                                                                                                                                                                                       │
│         // Swap on exchange                                                                                                                                                                                     │
│         // exchange.swapExactTokensForTokens(amount, minReturnAmount, path, recipient, deadline);                                                                                                               │
│         basket.singleCall(                                                                                                                                                                                      │
│             swap.exchange,                                                                                                                                                                                      │
│             abi.encodeWithSelector(                                                                                                                                                                             │
│                 IUniswapV2Router02(swap.exchange)                                                                                                                                                               │
│                     .swapExactTokensForTokens                                                                                                                                                                   │
│                     .selector,                                                                                                                                                                                  │
│                 swap.quantity,                                                                                                                                                                                  │
│                 swap.minReturn,                                                                                                                                                                                 │
│                 swap.path,                                                                                                                                                                                      │
│                 recipient,                                                                                                                                                                                      │
│                 deadline                                                                                                                                                                                        │
│             ),                                                                                                                                                                                                  │
│             0                                                                                                                                                                                                   │
│         );                                                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         emit Swaped(                                                                                                                                                                                            │
│             address(basket),                                                                                                                                                                                    │
│             swap.path[0],                                                                                                                                                                                       │
│             swap.path,                                                                                                                                                                                          │
│             swap.quantity,                                                                                                                                                                                      │
│             swap.minReturn                                                                                                                                                                                      │
│         );                                                                                                                                                                                                      │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ No                                                                                                                                                                                                              │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────── Multiple Choice Scenarios ───────────────────────────────────────────────────────────────────────────────────────────╮
│ Knowledge: have inside code statements that update/accrue interest/exchange rate,                                                                                                                               │
│ Code:                                                                                                                                                                                                           │
│     function rebalance(                                                                                                                                                                                         │
│         UniswapV2SwapStruct[] calldata _swapsV2,                                                                                                                                                                │
│         uint256 _deadline                                                                                                                                                                                       │
│     ) external override onlyRebalanceManager {                                                                                                                                                                  │
│         lockBasketData(block.number + 30);                                                                                                                                                                      │
│                                                                                                                                                                                                                 │
│         // remove token from array                                                                                                                                                                              │
│         for (uint256 i; i < _swapsV2.length; i++) {                                                                                                                                                             │
│             require(exchanges[_swapsV2.exchange], "NOT_UNISWAP_V2");                                                                                                                                            │
│                                                                                                                                                                                                                 │
│             //swap token                                                                                                                                                                                        │
│             _swapUniswapV2(_swapsV2, address(basket), _deadline);                                                                                                                                               │
│                                                                                                                                                                                                                 │
│             //add to token if missing                                                                                                                                                                           │
│             addToken(_swapsV2.path[_swapsV2.path.length - 1]);                                                                                                                                                  │
│                                                                                                                                                                                                                 │
│             //remove from token if resulting quantity is 0                                                                                                                                                      │
│             removeToken(_swapsV2.path[0]);                                                                                                                                                                      │
│         }                                                                                                                                                                                                       │
│                                                                                                                                                                                                                 │
│         emit Rebalanced(address(basket));                                                                                                                                                                       │
│     }                                                                                                                                                                                                           │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "1": "No"                                                                                                                                                                                                   │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "VariableA": {                                                                                                                                                                                              │
│         "outputAmount": "Variable holding the market reserves/AMM price/exchange rate or the custom token balanceOf/totalSupply/amount/liquidity calculation"                                                   │
│     },                                                                                                                                                                                                          │
│     "VariableB": {                                                                                                                                                                                              │
│         "outputAmount": "Variable holding the calculated value/price of LP token"                                                                                                                               │
│     }                                                                                                                                                                                                           │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:23:40] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File:                                                                                                                                                      tasks.py:260
                             /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-12-amun-main/contracts/basket/contracts/singleJoinExit/SingleTokenJoin.sol,                   
                             current function: _joinTokenSingle, current vul: price-manipulation                                                                                                                   
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "VariableA": {                                                                                                                                                                                              │
│         "remainingIntermediateBalance": "Variable holding the remaining balance of inputToken in the contract"                                                                                                  │
│     },                                                                                                                                                                                                          │
│     "VariableB": {                                                                                                                                                                                              │
│         "N/A": "No variable holding the calculated value/price of LP token in the provided function"                                                                                                            │
│     }                                                                                                                                                                                                           │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:23:41] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:357
                    ERROR    tasks: Current File:                                                                                                                                                      tasks.py:359
                             /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-12-amun-main/contracts/basket/contracts/singleJoinExit/SingleTokenJoin.sol,                   
                             current function: _joinTokenSingle, current vul: price-manipulation                                                                                                                   
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:361
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 355, in simple_cli                                                                                       
                                 falcon_instance, function2_text)                                                                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "VariableA": {                                                                                                                                                                                              │
│         "totalSupply": "Holds the value of total minted share or amount"                                                                                                                                        │
│     },                                                                                                                                                                                                          │
│     "VariableB": {                                                                                                                                                                                              │
│         "totalSupply": "Holds the total supply/liquidity AND is used by the conditional branch to determine the supply/liquidity is 0"                                                                          │
│     },                                                                                                                                                                                                          │
│     "VariableC": {                                                                                                                                                                                              │
│         "_amount": "Holds the value of the deposit/mint/add amount"                                                                                                                                             │
│     }                                                                                                                                                                                                           │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:23:42] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File:                                                                                                                                                      tasks.py:260
                             /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-12-amun-main/contracts/basket/contracts/facets/Basket/BasketFacet.sol, current                
                             function: joinPool, current vul: first-deposit                                                                                                                                        
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "VariableA": {                                                                                                                                                                                              │
│         "outputAmount": "Holds the value of total minted share or amount"                                                                                                                                       │
│     },                                                                                                                                                                                                          │
│     "VariableB": {                                                                                                                                                                                              │
│         "outputToken": "Holds the total supply/liquidity AND is used by the conditional branch to determine the supply/liquidity is 0"                                                                          │
│     },                                                                                                                                                                                                          │
│     "VariableC": {                                                                                                                                                                                              │
│         "amountIn": "Holds the value of the deposit/mint/add amount"                                                                                                                                            │
│     }                                                                                                                                                                                                           │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:23:44] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:357
                    ERROR    tasks: Current File:                                                                                                                                                      tasks.py:359
                             /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-12-amun-main/contracts/basket/contracts/facets/Basket/BasketFacet.sol, current                
                             function: joinPool, current vul: first-deposit                                                                                                                                        
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:361
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 355, in simple_cli                                                                                       
                                 falcon_instance, function2_text)                                                                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "VariableA": {                                                                                                                                                                                              │
│         "outputAmount": "Holds the value of total minted share or amount"                                                                                                                                       │
│     },                                                                                                                                                                                                          │
│     "VariableB": {                                                                                                                                                                                              │
│         "outputToken": "Holds the total supply/liquidity AND is used by the conditional branch to determine the supply/liquidity is 0"                                                                          │
│     },                                                                                                                                                                                                          │
│     "VariableC": {                                                                                                                                                                                              │
│         "_joinTokenStruct.inputAmount": "Holds the value of the deposit/mint/add amount"                                                                                                                        │
│     }                                                                                                                                                                                                           │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:23:45] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:357
                    ERROR    tasks: Current File:                                                                                                                                                      tasks.py:359
                             /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-12-amun-main/contracts/basket/contracts/facets/Basket/BasketFacet.sol, current                
                             function: joinPool, current vul: first-deposit                                                                                                                                        
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:361
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 355, in simple_cli                                                                                       
                                 falcon_instance, function2_text)                                                                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "VariableA": {                                                                                                                                                                                              │
│         "totalSupply": "Holds the value of total minted share or amount"                                                                                                                                        │
│     },                                                                                                                                                                                                          │
│     "VariableB": {                                                                                                                                                                                              │
│         "totalSupply": "Holds the total supply/liquidity AND is used by the conditional branch to determine the supply/liquidity is 0"                                                                          │
│     },                                                                                                                                                                                                          │
│     "VariableC": {                                                                                                                                                                                              │
│         "tokenAmount": "Holds the value of the deposit/mint/add amount"                                                                                                                                         │
│     }                                                                                                                                                                                                           │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:23:46] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:258
                    ERROR    tasks: Current File:                                                                                                                                                      tasks.py:260
                             /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-12-amun-main/contracts/basket/contracts/facets/Basket/BasketFacet.sol, current                
                             function: calcTokensForAmount, current vul: first-deposit                                                                                                                             
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:262
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 254, in simple_cli                                                                                       
                                 res_1 = static_check.run_static_check(checker, args, function1, falcon_instance,                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
╭─────────────────────────────────────────────────────────────────────────────────────────────────── Response ────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ {                                                                                                                                                                                                               │
│     "VariableA": {                                                                                                                                                                                              │
│         "outputAmount": "Holds the value of total minted share or amount"                                                                                                                                       │
│     },                                                                                                                                                                                                          │
│     "VariableB": {                                                                                                                                                                                              │
│         "outputToken": "Holds the total supply/liquidity AND is used by the conditional branch to determine the supply/liquidity is 0"                                                                          │
│     },                                                                                                                                                                                                          │
│     "VariableC": {                                                                                                                                                                                              │
│         "_joinTokenStruct.inputAmount": "Holds the value of the deposit/mint/add amount"                                                                                                                        │
│     }                                                                                                                                                                                                           │
│ }                                                                                                                                                                                                               │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
[12/08/24 19:23:47] ERROR    tasks: Static analysis failed: Invalid args                                                                                                                               tasks.py:357
                    ERROR    tasks: Current File:                                                                                                                                                      tasks.py:359
                             /home/owen/Documents/GitHub/GPTScan-Bigger-Model/datasets/code-423n4-Web3Bugs-data/2021-12-amun-main/contracts/basket/contracts/facets/Basket/BasketFacet.sol, current                
                             function: calcTokensForAmount, current vul: first-deposit                                                                                                                             
                    ERROR    tasks: Traceback (most recent call last):                                                                                                                                 tasks.py:361
                               File "/home/owen/Documents/GitHub/GPTScan-Bigger-Model/src/tasks.py", line 355, in simple_cli                                                                                       
                                 falcon_instance, function2_text)                                                                                                                                                  
                             UnboundLocalError: local variable 'falcon_instance' referenced before assignment                                                                                                      
                                                                                                                                                                                                                   
                      Scan Results                       
┏━━━━━━┳━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┓
┃ Type ┃ Description ┃ Affected Files ┃ Analysis Report ┃
┡━━━━━━╇━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━┩
└──────┴─────────────┴────────────────┴─────────────────┘
                   Summary                   
┏━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━┓
┃ Key                  ┃ Value              ┃
┡━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━┩
│ Files                │ 29                 │
│ Contracts            │ 29                 │
│ Functions            │ 42                 │
│ Lines of Code        │ 2511               │
│ Used Time            │ 38.183260917663574 │
│ Estimated Cost (USD) │ 0.048833           │
└──────────────────────┴────────────────────┘
